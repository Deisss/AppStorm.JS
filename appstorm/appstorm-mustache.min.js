(function(e,b){if("object"==typeof exports&&exports)b(exports);else{var d={};b(d);"function"==typeof define&&define.amd?define(d):e.Mustache=d}})(this,function(e){function b(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(b){this.tail=this.string=b;this.pos=0}function c(b,c){this.view=b||{};this.parent=c;this._cache={}}function f(){this.clearCache()}function g(b,c,d,f){for(var m,k,h,u="",r=0,n=b.length;n>r;++r)switch(m=b[r],k=m[1],m[0]){case "#":if(h=d.lookup(k),"object"==typeof h)if(l(h)){k=
0;for(var x=h.length;x>k;++k)u+=g(m[4],c,d.push(h[k]),f)}else h&&(u+=g(m[4],c,d.push(h),f));else"function"==typeof h?(k=null==f?null:f.slice(m[3],m[5]),h=h.call(d.view,k,function(b){return c.render(b,d)}),null!=h&&(u+=h)):h&&(u+=g(m[4],c,d,f));break;case "^":h=d.lookup(k);(!h||l(h)&&0===h.length)&&(u+=g(m[4],c,d,f));break;case ">":h=c.getPartial(k);"function"==typeof h&&(u+=h(d));break;case "&":h=d.lookup(k);null!=h&&(u+=h);break;case "name":h=d.lookup(k);null!=h&&(u+=e.escape(h));break;case "text":u+=
k}return u}function h(c){return[RegExp(b(c[0])+"\\s*"),RegExp("\\s*"+b(c[1]))]}var n=/\s*/,k=/\s+/,x=/\S/,r=/\s*=/,s=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,t=RegExp.prototype.test,v=Object.prototype.toString,l=Array.isArray||function(b){return"[object Array]"===v.call(b)},m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};d.prototype.eos=function(){return""===this.tail};d.prototype.scan=function(b){return(b=this.tail.match(b))&&0===b.index?(this.tail=this.tail.substring(b[0].length),
this.pos+=b[0].length,b[0]):""};d.prototype.scanUntil=function(b){var c=this.tail.search(b);switch(c){case -1:b=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c),this.pos+=c}return b};c.make=function(b){return b instanceof c?b:new c(b)};c.prototype.push=function(b){return new c(b,this)};c.prototype.lookup=function(b){var c=this._cache[b];if(!c){if("."==b)c=this.view;else for(var d=this;d;){if(0<b.indexOf("."))for(var c=
d.view,e=b.split("."),l=0;c&&e.length>l;)c=c[e[l++]];else c=d.view[b];if(null!=c)break;d=d.parent}this._cache[b]=c}return"function"==typeof c&&(c=c.call(this.view)),c};f.prototype.clearCache=function(){this._cache={};this._partialCache={}};f.prototype.compile=function(b,c){var d=this._cache[b];d||(d=e.parse(b,c),d=this._cache[b]=this.compileTokens(d,b));return d};f.prototype.compilePartial=function(b,c,d){c=this.compile(c,d);return this._partialCache[b]=c,c};f.prototype.getPartial=function(b){return b in
this._partialCache||!this._loadPartial||this.compilePartial(b,this._loadPartial(b)),this._partialCache[b]};f.prototype.compileTokens=function(b,d){var e=this;return function(l,f){if(f)if("function"==typeof f)e._loadPartial=f;else for(var m in f)e.compilePartial(m,f[m]);return g(b,e,c.make(l),d)}};f.prototype.render=function(b,c,d){return this.compile(b)(c,d)};e.name="mustache.js";e.version="0.7.2";e.tags=["{{","}}"];e.Scanner=d;e.Context=c;e.Writer=f;e.parse=function(c,l){if(c=c||"",l=l||e.tags,"string"==
typeof l&&(l=l.split(k)),2!==l.length)throw Error("Invalid tags: "+l.join(", "));for(var f,m,g,u,B,C=h(l),D=new d(c),I=[],L=[],E=[],G=!1,M=!1;!D.eos();){if(f=D.pos,g=D.scanUntil(C[0]))for(var v=0,N=g.length;N>v;++v)if(u=g.charAt(v),t.call(x,u)?M=!0:E.push(L.length),L.push(["text",u,f,f+1]),f+=1,"\n"==u){if(G&&!M)for(;E.length;)delete L[E.pop()];else E=[];M=G=!1}if(!D.scan(C[0]))break;if(G=!0,m=D.scan(y)||"name",D.scan(n),"="===m?(g=D.scanUntil(r),D.scan(r),D.scanUntil(C[1])):"{"===m?(g=D.scanUntil(RegExp("\\s*"+
b("}"+l[1]))),D.scan(s),D.scanUntil(C[1]),m="&"):g=D.scanUntil(C[1]),!D.scan(C[1]))throw Error("Unclosed tag at "+D.pos);if(B=[m,g,f,D.pos],L.push(B),"#"===m||"^"===m)I.push(B);else if("/"===m){if(0===I.length)throw Error('Unopened section "'+g+'" at '+f);u=I.pop();if(u[1]!==g)throw Error('Unclosed section "'+u[1]+'" at '+f);}else if("name"===m||"{"===m||"&"===m)M=!0;else if("="===m){if(l=g.split(k),2!==l.length)throw Error("Invalid tags at "+f+": "+l.join(", "));C=h(l)}}if(u=I.pop())throw Error('Unclosed section "'+
u[1]+'" at '+D.pos);f=L;var H;g=[];B=0;for(C=f.length;C>B;++B)(m=f[B])&&("text"===m[0]&&H&&"text"===H[0]?(H[1]+=m[1],H[3]=m[3]):(H=m,g.push(m)));H=g;var J;m=f=[];g=[];B=0;for(C=H.length;C>B;++B)switch(J=H[B],J[0]){case "#":case "^":g.push(J);m.push(J);m=J[4]=[];break;case "/":g.pop()[5]=J[2];m=0<g.length?g[g.length-1][4]:f;break;default:m.push(J)}return f};e.escape=function(b){return(b+"").replace(/[&<>"'\/]/g,function(b){return m[b]})};var u=new f;e.clearCache=function(){return u.clearCache()};e.compile=
function(b,c){return u.compile(b,c)};e.compilePartial=function(b,c,d){return u.compilePartial(b,c,d)};e.compileTokens=function(b,c){return u.compileTokens(b,c)};e.render=function(b,c,d){return u.render(b,c,d)};e.to_html=function(b,c,d,l){b=e.render(b,c,d);return"function"!=typeof l?b:(l(b),void 0)}});(function(){function e(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent("on"+c,d)}function b(b){if("keypress"==b.type){var c=String.fromCharCode(b.which);b.shiftKey||(c=c.toLowerCase());return c}return r[b.which]?r[b.which]:s[b.which]?s[b.which]:String.fromCharCode(b.which).toLowerCase()}function d(b){b=b||{};var c=!1,d;for(d in u)b[d]?c=!0:u[d]=0;c||(p=!1)}function c(b,c,d,e,f){var m,k,h=[],g=d.type;if(!l[b])return[];"keyup"==g&&n(b)&&(c=[b]);for(m=0;m<l[b].length;++m)(k=l[b][m],
k.seq&&u[k.seq]!=k.level||g!=k.action||("keypress"!=g||d.metaKey||d.ctrlKey)&&c.sort().join(",")!==k.modifiers.sort().join(","))||(e&&k.combo==f&&l[b].splice(m,1),h.push(k));return h}function f(b){var c=[];b.shiftKey&&c.push("shift");b.altKey&&c.push("alt");b.ctrlKey&&c.push("ctrl");b.metaKey&&c.push("meta");return c}function g(b,c,d){z.stopCallback(c,c.target||c.srcElement,d)||!1!==b(c,d)||(c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation(),c.returnValue=!1,c.cancelBubble=
!0)}function h(c){"number"!==typeof c.which&&(c.which=c.keyCode);var d=b(c);d&&("keyup"==c.type&&q==d?q=!1:z.handleKey(d,f(c),c))}function n(b){return"shift"==b||"ctrl"==b||"alt"==b||"meta"==b}function k(b,c,d){if(!d){if(!v){v={};for(var l in r)95<l&&112>l||r.hasOwnProperty(l)&&(v[r[l]]=l)}d=v[b]?"keydown":"keypress"}"keypress"==d&&c.length&&(d="keydown");return d}function x(e,f,h,r,I){m[e+":"+h]=f;e=e.replace(/\s+/g," ");var s=e.split(" "),E,G,A=[];if(1<s.length){var v=e,z=h;u[v]=0;z||(z=k(s[0],
[]));e=function(){p=z;++u[v];clearTimeout(w);w=setTimeout(d,1E3)};h=function(c){g(f,c,v);"keyup"!==z&&(q=b(c));setTimeout(d,10)};for(r=0;r<s.length;++r)x(s[r],r<s.length-1?e:h,z,v,r)}else{G="+"===e?["+"]:e.split("+");for(s=0;s<G.length;++s)E=G[s],t[E]&&(E=t[E]),h&&"keypress"!=h&&y[E]&&(E=y[E],A.push("shift")),n(E)&&A.push(E);h=k(E,A,h);l[E]||(l[E]=[]);c(E,A,{type:h},!r,e);l[E][r?"unshift":"push"]({callback:f,modifiers:A,action:h,seq:r,level:I,combo:e})}}for(var r={8:"backspace",9:"tab",13:"enter",
16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},t={option:"alt",command:"meta",
"return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},v,l={},m={},u={},w,q=!1,p=!1,A=1;20>A;++A)r[111+A]="f"+A;for(A=0;9>=A;++A)r[A+96]=A;e(document,"keypress",h);e(document,"keydown",h);e(document,"keyup",h);var z={bind:function(b,c,d){b=b instanceof Array?b:[b];for(var l=0;l<b.length;++l)x(b[l],c,d);return this},unbind:function(b,c){return z.bind(b,function(){},c)},trigger:function(b,c){if(m[b+":"+c])m[b+":"+c]({},b);return this},reset:function(){l={};
m={};return this},stopCallback:function(b,c){return-1<(" "+c.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==c.tagName||"SELECT"==c.tagName||"TEXTAREA"==c.tagName||c.contentEditable&&"true"==c.contentEditable},handleKey:function(b,l,e){l=c(b,l,e);var f,m={},k=0,h=!1;for(f=0;f<l.length;++f)l[f].seq&&(k=Math.max(k,l[f].level));for(f=0;f<l.length;++f)l[f].seq?l[f].level==k&&(h=!0,m[l[f].seq]=1,g(l[f].callback,e,l[f].combo)):h||g(l[f].callback,e,l[f].combo);e.type==p&&!n(b)&&d(m)}};window.Mousetrap=
z;"function"===typeof define&&define.amd&&define(z)})();(function(){function e(l){var e,m,h,g="json"==l;if(g||"json-stringify"==l||"json-parse"==l){if("json-stringify"==l||g){if(e="function"==typeof k.stringify&&z){(h=function(){return 1}).toJSON=h;try{e="0"===k.stringify(0)&&"0"===k.stringify(new Number)&&'""'==k.stringify(new String)&&k.stringify(f)===b&&k.stringify(b)===b&&k.stringify()===b&&"1"===k.stringify(h)&&"[1]"==k.stringify([h])&&"[null]"==k.stringify([b])&&"null"==k.stringify(c)&&"[null,null,null]"==k.stringify([b,f,c])&&'{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==
k.stringify({A:[h,d,!1,c,"\x00\b\n\f\r\t"]})&&"1"===k.stringify(c,h)&&"[\n 1,\n 2\n]"==k.stringify([1,2],c,1)&&'"-271821-04-20T00:00:00.000Z"'==k.stringify(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==k.stringify(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==k.stringify(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==k.stringify(new Date(-1))}catch(u){e=!1}}if(!g)return e}if("json-parse"==l||g){if("function"==typeof k.parse)try{if(0===k.parse("0")&&!k.parse(!1)&&(h=k.parse('{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'),
m=5==h.a.length&&1==h.a[0])){try{m=!k.parse('"\t"')}catch(w){}if(m)try{m=1!=k.parse("01")}catch(p){}}}catch(q){m=!1}if(!g)return m}return e&&m}}var b=void 0,d=!0,c=null,f={}.toString,g,h,n="function"===typeof define&&define.c,k=!n&&"object"==typeof exports&&exports;k||n?"object"==typeof JSON&&JSON?n?k=JSON:(k.stringify=JSON.stringify,k.parse=JSON.parse):n&&(k=this.JSON={}):k=this.JSON||(this.JSON={});var x,r,s,y,t,v,l,m,u,w,q,p,A,z=new Date(-0xc782b5b800cec),F,B,C;try{z=-109252==z.getUTCFullYear()&&
0===z.getUTCMonth()&&1==z.getUTCDate()&&10==z.getUTCHours()&&37==z.getUTCMinutes()&&6==z.getUTCSeconds()&&708==z.getUTCMilliseconds()}catch(D){}e("json")||(z||(F=Math.floor,B=[0,31,59,90,120,151,181,212,243,273,304,334],C=function(b,c){return B[c]+365*(b-1970)+F((b-1969+(c=+(1<c)))/4)-F((b-1901+c)/100)+F((b-1601+c)/400)}),(g={}.hasOwnProperty)||(g=function(b){var d={},l;(d.__proto__=c,d.__proto__={toString:1},d).toString!=f?g=function(b){var d=this.__proto__;b=b in(this.__proto__=c,this);this.__proto__=
d;return b}:(l=d.constructor,g=function(b){var c=(this.constructor||l).prototype;return b in this&&!(b in c&&this[b]===c[b])});d=c;return g.call(this,b)}),h=function(b,d){var l=0,e,m,h;(e=function(){this.valueOf=0}).prototype.valueOf=0;m=new e;for(h in m)g.call(m,h)&&l++;e=m=c;l?l=2==l?function(b,c){var d={},l="[object Function]"==f.call(b),e;for(e in b)l&&"prototype"==e||g.call(d,e)||(d[e]=1)&&g.call(b,e)&&c(e)}:function(b,c){var d="[object Function]"==f.call(b),l,e;for(l in b)d&&"prototype"==l||
!g.call(b,l)||(e="constructor"===l)||c(l);(e||g.call(b,l="constructor"))&&c(l)}:(m="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),l=function(b,c){var d="[object Function]"==f.call(b),l;for(l in b)d&&"prototype"==l||!g.call(b,l)||c(l);for(d=m.length;l=m[--d];g.call(b,l)&&c(l));});l(b,d)},e("json-stringify")||(x={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},r=function(b,c){return("000000"+(c||0)).slice(-b)},
s=function(b){for(var c='"',d=0,l;l=b.charAt(d);d++)c+=-1<'\\"\b\f\n\r\t'.indexOf(l)?x[l]:x[l]=" ">l?"\\u00"+r(2,l.charCodeAt(0).toString(16)):l;return c+'"'},y=function(l,e,m,k,u,w,p){var q=e[l],n,x,t,A,v,z,B,D,K;if("object"==typeof q&&q)if(n=f.call(q),"[object Date]"!=n||g.call(q,"toJSON"))"function"==typeof q.toJSON&&("[object Number]"!=n&&"[object String]"!=n&&"[object Array]"!=n||g.call(q,"toJSON"))&&(q=q.toJSON(l));else if(q>-1/0&&q<1/0){if(C){t=F(q/864E5);for(n=F(t/365.2425)+1970-1;C(n+1,0)<=
t;n++);for(x=F((t-C(n,0))/30.42);C(n,x+1)<=t;x++);t=1+t-C(n,x);A=(q%864E5+864E5)%864E5;v=F(A/36E5)%24;z=F(A/6E4)%60;B=F(A/1E3)%60;A%=1E3}else n=q.getUTCFullYear(),x=q.getUTCMonth(),t=q.getUTCDate(),v=q.getUTCHours(),z=q.getUTCMinutes(),B=q.getUTCSeconds(),A=q.getUTCMilliseconds();q=(0>=n||1E4<=n?(0>n?"-":"+")+r(6,0>n?-n:n):r(4,n))+"-"+r(2,x+1)+"-"+r(2,t)+"T"+r(2,v)+":"+r(2,z)+":"+r(2,B)+"."+r(3,A)+"Z"}else q=c;m&&(q=m.call(e,l,q));if(q===c)return"null";n=f.call(q);if("[object Boolean]"==n)return""+
q;if("[object Number]"==n)return q>-1/0&&q<1/0?""+q:"null";if("[object String]"==n)return s(q);if("object"==typeof q){for(l=p.length;l--;)if(p[l]===q)throw TypeError();p.push(q);D=[];e=w;w+=u;if("[object Array]"==n){x=0;for(l=q.length;x<l;K||(K=d),x++)n=y(x,q,m,k,u,w,p),D.push(n===b?"null":n);l=K?u?"[\n"+w+D.join(",\n"+w)+"\n"+e+"]":"["+D.join(",")+"]":"[]"}else h(k||q,function(c){var l=y(c,q,m,k,u,w,p);l!==b&&D.push(s(c)+":"+(u?" ":"")+l);K||(K=d)}),l=K?u?"{\n"+w+D.join(",\n"+w)+"\n"+e+"}":"{"+D.join(",")+
"}":"{}";p.pop();return l}},k.stringify=function(b,c,l){var d,e,m,h,k,g;if("function"==typeof c||"object"==typeof c&&c)if("[object Function]"==f.call(c))e=c;else if("[object Array]"==f.call(c))for(m={},h=0,k=c.length;h<k;g=c[h++],("[object String]"==f.call(g)||"[object Number]"==f.call(g))&&(m[g]=1));if(l)if("[object Number]"==f.call(l)){if(0<(l-=l%1))for(d="",10<l&&(l=10);d.length<l;d+=" ");}else"[object String]"==f.call(l)&&(d=10>=l.length?l:l.slice(0,10));return y("",(g={},g[""]=b,g),e,m,d,"",
[])}),e("json-parse")||(t=String.fromCharCode,v={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"},l=function(){p=A=c;throw SyntaxError();},m=function(){for(var b=A,e=b.length,m,f,h,k,g;p<e;)if(m=b.charAt(p),-1<"\t\r\n ".indexOf(m))p++;else{if(-1<"{}[]:,".indexOf(m))return p++,m;if('"'==m){f="@";for(p++;p<e;)if(m=b.charAt(p)," ">m)l();else if("\\"==m)if(m=b.charAt(++p),-1<'\\"/btnfr'.indexOf(m))f+=v[m],p++;else if("u"==m){h=++p;for(k=p+4;p<k;p++)m=b.charAt(p),"0"<=m&&"9">=m||"a"<=m&&"f">=
m||"A"<=m&&"F">=m||l();f+=t("0x"+b.slice(h,p))}else l();else{if('"'==m)break;f+=m;p++}if('"'==b.charAt(p))return p++,f}else{h=p;"-"==m&&(g=d,m=b.charAt(++p));if("0"<=m&&"9">=m){for("0"==m&&(m=b.charAt(p+1),"0"<=m&&"9">=m)&&l();p<e&&(m=b.charAt(p),"0"<=m&&"9">=m);p++);if("."==b.charAt(p)){for(k=++p;k<e&&(m=b.charAt(k),"0"<=m&&"9">=m);k++);k==p&&l();p=k}m=b.charAt(p);if("e"==m||"E"==m){m=b.charAt(++p);"+"!=m&&"-"!=m||p++;for(k=p;k<e&&(m=b.charAt(k),"0"<=m&&"9">=m);k++);k==p&&l();p=k}return+b.slice(h,
p)}g&&l();if("true"==b.slice(p,p+4))return p+=4,d;if("false"==b.slice(p,p+5))return p+=5,!1;if("null"==b.slice(p,p+4))return p+=4,c}l()}return"$"},u=function(b){var c,e;"$"==b&&l();if("string"==typeof b){if("@"==b.charAt(0))return b.slice(1);if("["==b){for(c=[];;e||(e=d)){b=m();if("]"==b)break;e&&(","==b?(b=m(),"]"==b&&l()):l());","==b&&l();c.push(u(b))}return c}if("{"==b){for(c={};;e||(e=d)){b=m();if("}"==b)break;e&&(","==b?(b=m(),"}"==b&&l()):l());","!=b&&"string"==typeof b&&"@"==b.charAt(0)&&":"==
m()||l();c[b.slice(1)]=u(m())}return c}l()}return b},q=function(c,l,d){d=w(c,l,d);d===b?delete c[l]:c[l]=d},w=function(b,c,l){var d=b[c],e;if("object"==typeof d&&d)if("[object Array]"==f.call(d))for(e=d.length;e--;)q(d,e,l);else h(d,function(b){q(d,b,l)});return l.call(b,c,d)},k.parse=function(b,d){var e,k;p=0;A=b;e=u(m());"$"!=m()&&l();p=A=c;return d&&"[object Function]"==f.call(d)?w((k={},k[""]=e,k),"",d):e}));n&&define(function(){return k})})();window.appstorm=window.a=function(){var e={},b={url:"",contains:function(b,d){if(b instanceof Array)for(var e=b.length;e--;){if(b[e]===d)return!0}else if(this.isObject(b))return d in b;return!1},clone:function(b){if(a.isObject(b)){if(a.isArray(b))for(var d=b.length,e=Array(d),h=0;h<d;++h)e[h]=a.clone(b[h]);else for(d in e={},a.isFunction(b.constructor)&&(e=new b.constructor),a.isObject(b.prototype)&&(e.prototype=b.prototype),b)e[d]=a.clone(b[d]);return e}return b},isNumber:function(b){return!isNaN(parseFloat(b))&&
isFinite(b)},isObject:function(b){return"object"===typeof b&&null!==b},isString:function(b){return"string"===typeof b},isFunction:function(b){return"function"===typeof b},isNull:function(b){return"undefined"===typeof b||null===b},isBoolean:function(b){return"boolean"===typeof b},isArray:function(b){return b instanceof Array},setDefaultAjaxOptions:function(b){a.isObject(b)&&(e=b)},getDefaultAjaxOptions:function(){return e}},d=document.getElementById("a-core");d&&"undefined"!==typeof d.src&&(b.url=
d.src.replace(/\/[^/]*$/,"/"));return b}();
a.console=function(){function e(d,c,e,g){a.isArray(b[d])||(d="log");b[d].push(c);if(!a.isNull(window.console)&&a.isFunction(window.console.log)&&!1!==g)switch(a.environment.get("console")){case "error":if("error"!==d)break;case "warning":case "warn":if("warn"!==d&&"error"!==d)break;case "info":if("log"===d)break;default:g=!0;var h=!1;if(a.isString(c)&&0<=c.indexOf(":"))for(var n=c.substr(0,c.indexOf(":")).split("."),k=n.length;k--;){var x="verbose-"+n.join("."),x=a.environment.get(x);if(!a.isNull(x)){h=
!0;g=x<e?!1:!0;break}n.pop()}h||(a.isNull(a.environment.get("verbose"))||a.isNull(e))||parseInt(a.environment.get("verbose"),10)<e&&(g=!1);if(g)window.console[d](c)}for(;2E3<b[d].length;)b[d].shift()}var b={log:[],warn:[],info:[],error:[]};return{log:function(b,c,f){e("log",b,c,f)},warn:function(b,c,f){e("warn",b,c,f)},info:function(b,c,f){e("info",b,c,f)},error:function(b,c,f){e("error",b,c,f)},trace:function(d){return a.isString(d)&&d in b?b[d]:b},clear:function(){b={log:[],warn:[],info:[],error:[]}}}}();
a.parser={json:{stringify:function(e){try{return JSON.stringify(e)}catch(b){return a.console.error("a.parser.json.stringify : unable to stringify the value : "+e,1),""}},parse:function(e){try{return JSON.parse(e)}catch(b){return a.console.error("a.parser.json.parse : unable to parse the value : "+e,1),null}}},xml:{stringify:function(e){if(!a.isNull(e)&&!a.isNull(e.xml))return e.xml;if(!a.isNull(window.XMLSerializer))try{return(new window.XMLSerializer).serializeToString(e)}catch(b){return a.console.error("a.parser.xml.stringify : unable to stringify the value : "+
e,1),""}a.console.error("a.parser.xml.stringify : unable to find any parser available",1);return""},parse:function(e){if(!a.isNull(window.ActiveXObject)){for(var b=null,d=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0"],c=0,f=d.length;c<f;++c)try{b=new ActiveXObject(d[c])}catch(g){}b.async=!1;b.loadXML(e);return 0!=b.parseError.errorCode?(a.console.error("a.parser.xml.parse : error while parsing content : "+b.parseError.reason,1),null):b}if(!a.isNull(window.DOMParser))return(new DOMParser).parseFromString(e,
"text/xml");a.console.error("a.parser.xml.parse : unable to find any parser available",1);return null}}};
a.eventEmitter=function(){function e(d){for(var c in b.__list)1>b.__list[c].length&&delete b.__list[c]}var b=function(){this.__list={};this.__base="a.message"};b.prototype.setName=function(b){this.__base=""+b};b.prototype.addListener=function(b,c){a.isFunction(c)?(a.isNull(this.__list[b])&&(this.__list[b]=[]),this.__list[b].push(c),this.dispatch(this.__base+".add",{type:b,fct:c})):a.console.warn(this.__base+".addListener : unable to bind function, this is not a function",1)};b.prototype.removeListener=
function(b,c){if(!a.isNull(this.__list[b])){var f=this.__list[b].length;if(a.isFunction(c))for(;f--;)this.__list[b][f]===c&&this.__list[b].splice(f,1);this.dispatch(this.__base+".remove",{type:b,fct:c});e(b)}};b.prototype.removeAllListeners=function(b){a.isNull(this.__list[b])||(this.__list[b]=[],e(b))};b.prototype.clear=function(){var b=this.__base+".clear",c;for(c in this.__list)c!==b&&delete this.__list[c];this.dispatch(b,{})};b.prototype.dispatch=function(b,c){var e=this.__list[b];if(!a.isNull(e))for(var g=
0,h=e.length;g<h;++g)(function(b){setTimeout(function(){b(c)},0)})(e[g])};return b}();a.message=new a.eventEmitter;a.message.setName=function(){};
a.environment=function(){var e={verbose:2,console:"log"};return{get:function(b){return b in e?e[b]:null},set:function(b,d){a.isNull(b)||(a.console.log("a.environment.set: add item (key: "+b+", value: "+d+")",3),e[b]=d,a.message.dispatch("a.environment.add",{key:b,value:d}))},remove:function(b){a.isNull(e[b])||(a.console.log("a.environment.remove: remove item (key: "+b+")",3),delete e[b],a.message.dispatch("a.environment.remove",{key:b}))},clear:function(){e={verbose:2,console:"log"}}}}();
a.ajax=function(e,b,d){this.params={url:"",method:"GET",type:"raw",async:!0,cache:!1,data:{},header:{}};var c=a.getDefaultAjaxOptions();this.success=a.isFunction(b)?b:function(){};this.error=a.isFunction(d)?d:function(){};for(var f in this.params)f in c&&typeof c[f]===typeof this.params[f]&&(this.params[f]=c[f]),f in e&&typeof e[f]===typeof this.params[f]&&(this.params[f]=e[f]);a.isString(c.data)&&(this.params.data=c.data);if(a.isString(e.data)||a.isObject(e.data))this.params.data=e.data;this.request=
null;if(a.isNull(window.XMLHttpRequest)){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var g in e)try{this.request=new ActiveXObject(e[g])}catch(h){}}else this.request=new XMLHttpRequest};a.ajax.prototype.parseResult=function(e,b){var d=e.type.toLowerCase();return"json"===d?a.parser.json.parse(b.responseText):"xml"===d?b.responseXML:b.responseText};a.ajax.prototype.abort=function(){try{this.request.abort()}catch(e){}};
a.ajax.prototype.send=function(){var e=this.params.method.toUpperCase();if(!1===this.params.cache){var b=Math.floor(1E5*Math.random())+1;try{this.params.data.cachedisable=b}catch(d){}}b="";if(a.isString(this.params.data))b=this.params.data;else{for(var c in this.params.data)b+=encodeURIComponent(c)+"="+encodeURIComponent(this.params.data[c])+"&";b=b.slice(0,-1)}var f=this.params.url;c=this.params.async;"GET"===e&&""!==b&&(f+="?"+b);if(!0===c){var g={success:this.success,params:this.params,error:this.error,
request:this.request,parseResult:this.parseResult};this.request.onreadystatechange=function(){if(4===g.request.readyState){var b=200<=g.request.status&&300>g.request.status;b?g.success(g.parseResult(g.params,g.request),g.request.status):g.error(f,g.request.status);a.message.dispatch("a.ajax",{success:b,status:g.request.status,url:g.params.url,method:g.method,params:g.params})}}}this.request.open(e,f,c);"POST"===e&&this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var h in this.params.header)this.request.setRequestHeader(h,
this.params.header[h]);this.request.send(b);return!1===c?this.parseResult(this.params,this.request):"No return in async mode"};
a.timer=function(){var e={};setInterval(function(){a.message.dispatch("a.timer.tick",{});for(var b in e){var d=e[b];d.current+=50;if(d.current>=d.timeout&&(d.current=0,a.isFunction(d.fct))){var c=a.isObject(d.scope)?d.scope:null;d.fct.call(c,null)}}},50);return{add:function(b,d,c){var f;for(f=Math.floor(1E6*Math.random());!a.isNull(e[f]);)f=Math.floor(1E6*Math.random());if(!a.isNumber(c)||0>=c)c=1E3,a.console.error("The timeout has not been setted properly into timer, timeout has been setted to 1000ms",
1);e[f]={fct:b,scope:d,timeout:c,current:0};return f},once:function(b,e,c){var f=this.add(function(){a.isFunction(b)&&b.call(this,null);a.timer.remove(f)},e,c);return f},get:function(b){b=e[b];return a.isNull(b)?null:b},remove:function(b){return a.isNull(e[b])?!1:(delete e[b],!0)},clear:function(){e={}}}}();
a.loader=function(){function e(b,e){if(a.isNull(b))return!1;for(var d=0,f=c.length;d<f;++d)if(c[d]===b)return a.isFunction(e)&&e(),!0;return!1}function b(b,e,d,g,r,s){for(var y in e)b.setAttribute(y,e[y]);!a.isNull(r)&&r.id&&b.setAttribute("id",r.id);var t=!1,v=function(l){t||(t=!0,a.isFunction(d)&&d(b),(a.isNull(r)||!1!==r.cache)&&c.push(g))};b.addEventListener?b.addEventListener("load",v,!1):b.readyState?b.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||v()}:
b.onload=v;if("text/css"===e.type){var l=document.styleSheets.length;f++;var m=a.timer.add(function(){document.styleSheets.length>l+f-1&&(f--,a.timer.remove(m),v())},null,50)}document.getElementsByTagName("head")[0].appendChild(b)}function d(b,e,d,f){var r={url:b,method:"GET",type:"raw",async:!0,cache:!0,data:{},header:{}};a.console.log("a.loader: load resource (url: "+b+")",3);a.isNull(d)||(a.contains(g,d.method)&&(r.method=d.method),a.isNull(d.type)||"json"!==d.type&&"xml"!==d.type||(r.type=d.type),
a.isObject(d.data)&&(r.data=d.data),a.isObject(d.header)&&(r.header=d.header),a.isBoolean(d.cache)&&(r.cache=d.cache));f=a.isFunction(f)?f:function(){};(new a.ajax(r,function(f,g){a.isFunction(e)&&e(f,g);(a.isNull(d)||!1!==d.cache)&&c.push(b)},f)).send()}var c=[],f=0,g="GET POST PUT DELETE HEAD OPTIONS".split(" ");return{js:function(b,c,d,f){e(b,c)||this.jsonp(b,c,d,f)},jsonp:function(c,d,e,f){var g=a.isObject(e)&&e.type?e.type:"text/javascript";a.console.log("a.loader: load resource (url: "+c+")",
3);b(document.createElement("script"),{type:g,src:c},d,c,e,f)},json:function(b,c,e,f){a.isObject(e)||(e={});e.type="json";a.isObject(e.header)||(e.header={});e.header.accept="application/json, text/javascript";d(b,c,e,f)},xml:function(b,c,e,f){a.isObject(e)||(e={});e.type="xml";a.isObject(e.header)||(e.header={});e.header.accept="application/xml, text/xml";d(b,c,e,f)},css:function(c,d,f,g){e(c,d)||(a.console.log("a.loader: load resource (url: "+c+")",3),b(document.createElement("link"),{rel:"stylesheet",
type:"text/css",href:c},d,c,f,g))},html:function(b,c,f,g){e(b,c)||(a.isObject(f)||(f={}),f.type="raw",!0===a.environment.get("debug")&&(f.cache=!1),a.isObject(f.header)||(f.header={}),f.header.accept="text/html",d(b,c,f,g))},javafx:function(b,c,d,f){if(a.isNull(d)||a.isNull(d.code)||a.isNull(d.id))a.console.warn("a.loader.javafx : the system need args.code and args.name setted to be able to load any javafx resource... This uri will not be loaded : "+b,3);else if(!e(b,c)){this.js("http://dl.javafx.com/"+
(d.version?d.version:"1.3")+"/dtfx.js",function(){javafx({archive:b,width:d.width||1,height:d.height||1,code:d.code,name:d.id})});var g=null,s=2E3,g=a.timer.add(function(){0<s--&&!a.isNull(document.getElementById(d.id).Packages)?(a.timer.remove(g),a.isFunction(c)&&c()):0>=s&&a.isFunction(f)&&f(b,408)},null,200)}},flash:function(b,c,d,f){a.isNull(d)||a.isNull(d.rootId)||a.isNull(d.id)?a.console.warn("a.loader.flash : the system need args parameters : rootId, id, setted to be able to load any flash resource... This uri will not be loaded : "+
b,3):e(b,c)||this.js(a.url+"vendor/storage/flash/swfobject.js",function(){swfobject.embedSWF(b,d.rootId,"100%","100%","10.0.0",a.url+"vendor/storage/flash/expressInstall.swf",d.flashvars,d.params,{id:d.id},function(d){!1===d.success&&a.isFunction(f)?f(b,408):!0===d.success&&a.isFunction(c)&&setTimeout(c,500)})})},silverlight:function(b,c,d,f){if(a.isNull(d)||a.isNull(d.rootId)||a.isNull(d.id))a.console.warn("a.loader.silverlight : the system need args parameters : rootId, id, setted to be able to load any silverlight resource... This uri will not be loaded : "+
b,3);else if(!e(b,c)){a.console.log("a.loader: load resource (url: "+b+")",3);var g=document.createElement("object");g.id=d.id;g.data="data:application/x-silverlight-2,";g.type="application/x-silverlight-2";a.isArray(d.params)||(d.params=[]);d.params.push({name:"source",value:b});for(var s=0,y=d.params.length;s<y;++s){var t=document.createElement("param");t.name=d.params[s].name;t.value=d.params[s].value;g.appendChild(t)}document.getElementById(d.rootId).appendChild(g);var v=null,l=2E3,v=a.timer.add(function(){0<
l--&&!a.isNull(document.getElementById(d.id).Content)?(a.timer.remove(v),c()):0>=l&&a.isFunction(f)&&f(b,408)},null,200)}},trace:function(){return c}}}();a.callback={};
a.callback.synchronizer=function(){function e(){n--;0>=n&&!1===s?(r=!1,t.prototype.dispatch("a.callback.synchronizer.success",{}),k(y)):0>=n&&(r=s=!1)}function b(){!0===r&&(s=!0,r=!1,t.prototype.dispatch("a.callback.synchronizer.error",{}),x.apply(this,arguments))}function d(b,c){y[b]=c}function c(b){a.isObject(b)&&(y=b)}function f(b){return a.isNull(y[b])?null:y[b]}function g(){return y}var h=[],n=0,k=function(){return!0},x=function(){return!0},r=!1,s=!1,y={},t=function(){};t.prototype=new a.eventEmitter;
t.prototype.constructor=this;t.prototype.setSuccess=function(b){k=a.isFunction(b)?b:k};t.prototype.setDone=t.prototype.setSuccess;t.prototype.setFail=function(b){x=a.isFunction(b)?b:x};t.prototype.setError=t.prototype.setFail;t.prototype.addCallback=function(){for(var l=[],l=!a.isNull(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,m=0,u=l.length;m<u;++m){var w=l[m];a.isFunction(w)&&(n++,h.push(w),!0===r&&w({success:e,done:e,getData:f,getFullData:g,setData:d,setFullData:c,fail:b,error:b}))}!0===
r&&a.console.warn("a.callback.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",1)};t.prototype.removeCallback=function(b){for(var c=h.length-1;0<=c;--c)h[c]===b&&(!0===r&&a.console.warn("a.callback.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1),n--,h.splice(c,1))};t.prototype.start=function(l,m){if(0>=n)e();else{r=!0;y={};for(var u=0,w=h.length;u<w;++u)h[u]({success:e,done:e,getData:f,getFullData:g,setData:d,
setFullData:c,fail:b,error:b},m);a.isNumber(l)&&0<l?setTimeout(function(){var c=parseInt(l,10);t.prototype.dispatch("a.callback.synchronizer.error",{timeout:c});b({timeout:c})},l):t.prototype.dispatch("a.callback.synchronizer.start",{timeout:-1})}};t.prototype.isRunning=function(){return r};var v=new t;v.setName("a.callback.synchronizer");return v};
a.callback.chainer=function(){function e(){0==x.length?(x=[],n(r),s.prototype.dispatch("a.callback.chainer.success",{})):s.prototype.start(arguments)}function b(){x=[];k.apply(this,arguments);s.prototype.dispatch("a.callback.chainer.error",{})}function d(b,c){r[b]=c}function c(b){a.isObject(b)&&(r=b)}function f(b){return a.isNull(r[b])?null:r[b]}function g(){return r}var h=[],n=function(){return!0},k=function(){return!0},x=[],r={},s=function(){};s.prototype=new a.eventEmitter;s.prototype.constructor=
this;s.prototype.setSuccess=function(b){n=a.isFunction(b)?b:n};s.prototype.setDone=s.prototype.setSuccess;s.prototype.setFail=function(b){k=a.isFunction(b)?b:k};s.prototype.setError=s.prototype.setFail;s.prototype.addCallback=function(){for(var b=[],b=!a.isNull(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,c=0,d=b.length;c<d;++c){var e=b[c];a.isFunction(e)&&(h.push(e),!0===s.prototype.isRunning()&&x.push(e))}!0===s.prototype.isRunning()&&a.console.warn("a.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",
1)};s.prototype.removeCallback=function(b){for(var c=h.length-1;0<=c;--c)if(h[c]===b){if(!0===s.prototype.isRunning()){for(var d=x.length-1;0<=d;--d)x[d]===b&&x.splice(d,1);a.console.warn("a.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1)}h.splice(c,1)}};s.prototype.start=function(){if(0==x.length){for(var k=0,n=h.length;k<n;++k)x.push(h[k]);s.prototype.dispatch("a.callback.chainer.start",{});r={};0==x.length&&e()}k=x.shift();a.isFunction(k)&&k({success:e,
done:e,getData:f,getFullData:g,setData:d,setFullData:c,fail:b,error:b},arguments)};s.prototype.isRunning=function(){return 0==x.length?!1:!0};var y=new s;y.setName("a.callback.chainer");return y};a.form=function(){function e(b,c){return a.isNull(b.getAttribute)?null:b.getAttribute(c)}function b(b){for(var c=[],d=b.length;d--;)c.push(b[d]);return c}function d(b){var c=e(b,"name");if(a.isNull(c)||""===c)if(c=e(b,"id"),a.isNull(c)||""===c)c=e(b,"class");return c}function c(c){var d=c.getElementsByTagName("input"),f=c.getElementsByTagName("textarea");c=c.getElementsByTagName("select");for(var d=b(d),g=d.length;g--;)a.contains(k,e(d[g],"type"))||d.splice(g,1);return d.concat(b(f),b(c))}function f(b,
c,d,f){var g="";a.isNull(d)||""===d||(g=e(b,"data-error-"+d));if(a.isNull(g)||""===g)g=e(b,"data-error");(a.isNull(g)||""===g)&&a.console.warn("A data-error tag has not been setted for "+c+" with value "+f+", can't proceed error show",3);a.isNull(a.language)||(g=a.language.getSingleTranslation(g,{name:d,value:f}));return{el:b,id:c,error:g}}var g="text search url tel email password".split(" "),h="number range date datetime datetime-local month time week".split(" "),n=g.concat(h,["number","checkbox",
"radio","file"]),k=h.concat(g,["color","checkbox","file","hidden","radio"]);return{skipNoValidate:!1,get:function(b){b=c(b);for(var f={},g=b.length;g--;){var h=b[g],k=d(h),n;n=h;var l=e(n,"type"),m=n.tagName.toLowerCase();n="input"===m||"textarea"===m?"checkbox"===l?n.checked:n.value:"select"===m?n.options[n.selectedIndex].value:void 0;null!==k&&""!==k&&(a.isNull(h)||"radio"!==e(h,"type")?f[k]=""===n?null:n:h.checked&&(f[k]=""===n?null:n))}a.console.log("a.form.get: found element list:",3);a.console.log(f,
3);return f},validate:function(b){if(!a.isNull(e(b,"novalidate"))&&!1===this.skipNoValidate)return[];b=c(b);for(var k=[],s="number range text search url email password color checkbox hidden radio".split(" "),y=RegExp("^[a-z]{2,}:\\/\\/([a-z0-9\\/\\.\\-_~+;:&=]{2,})$","gi"),t=RegExp("^.{2,}@.*\\.[a-z0-9]{2,}$","gi"),v=RegExp("^#([a-f]{3}|[a-f]{6})$","gi"),l=b.length;l--;){var m=b[l],u=m.tagName.toLowerCase();if("select"!==u&&a.isNull(e(m,"formnovalidate"))){var w=e(m,"type"),q=d(m),p=m.value,A=e(m,
"required"),z=e(m,"pattern");e(m,"multiple");var F=e(m,"min"),B=e(m,"max"),C=e(m,"step"),F=a.isNull(F)||""===F?null:parseFloat(F),B=a.isNull(B)||""===B?null:parseFloat(B),C=a.isNull(C)||""===C?null:parseFloat(C);"input"!==u||a.contains(s,w)?"number"!==w&&"range"!==w||a.isNumber(p)?"url"!==w||y.test(p)?"email"!==w||t.test(p)?"color"!==w||v.test(p)?null!==A&&a.contains(n,w)&&(""===p||a.isNull(p))?k.push(f(m,q,"required",p)):null===z||"textarea"!==u&&!a.contains(g,w)||RegExp(z).test(p)?null===F&&null==
B&&null==C||!a.contains(h,w)||(u=parseFloat(p),null!==F&&u<F?k.push(f(m,q,"min",p)):null!==B&&u>B?k.push(f(m,q,"max",p)):null!==C&&0!==u%C&&k.push(f(m,q,"step",p))):k.push(f(m,q,"pattern",p)):k.push(f(m,q,null,p)):k.push(f(m,q,null,p)):k.push(f(m,q,null,p)):k.push(f(m,q,null,p)):a.console.warn("Type "+w+" for input "+q+" not recognized or not supported",3)}}a.console.log("a.form.validate: found error list:",3);a.console.log(k,3);return k},validateAndGet:function(b){return{errorList:this.validate(b),
error:0<obj.errorList.length?!0:!1,contentList:this.get(b)}}}}();a.keyboard=function(e){return a.isNull(e)?(a.console.error("a.keyboard.global: error, Mousetrap is undefined, the plugin a.keyboard will not work",1),{addListener:function(){},removeListener:function(){},reset:function(){},clear:function(){}}):{addListener:function(b,d){a.console.log("a.keyboard.addListener: bind key: "+b,3);e.bind(b,d)},removeListener:function(b){a.console.log("a.keyboard.removeLister: remove listener on key: "+b,3);e.unbind(b)},reset:function(){a.console.log("a.keyboard.reset: clear all keys",
3);e.reset()},clear:function(){a.console.log("a.keyboard.clear: clear all keys",3);e.reset()}}}(window.Mousetrap);a.language=function(){function e(b,c){if(a.isNull(n[b]))return null;var d=n[b][c];if(a.isNull(d))a.console.info("a.language.__getRawTranslate: unable to find hash in dictionnary (value: "+c+", language: "+b+")",3);else return d;return null}function b(b){b=""+b;0>b.indexOf("{{")&&(b="{{"+b+"}}");b=b.replace("{{","\\{\\{");return b=b.replace("}}","\\}\\}")}function d(c,d){var f=e(g,c);if(!a.isNull(f)){var h=f;if(a.isArray(d))for(var q=0,k=d.length;q<k;++q)var n=b(q+1),n=RegExp(n,"gi"),h=h.replace(n,
d[q]);else for(q in d)n=b(q),n=RegExp(n,"gi"),h=h.replace(n,d[q]);if(0<=h.indexOf("{{")&&0<=h.indexOf("}}"))for(f=f.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],q=0,k=f.length;q<k;++q){var n=b(f[q]),r=f[q].replace("{{","").replace("}}",""),r=a.isNull(s[r])?null:s[r];a.isNull(r)||(n=RegExp(n,"gi"),h=h.replace(n,r))}return h=h.replace(/\{\{[a-z\-_0-9]+\}\}/gi,"")}return c}function c(b,c){a.isString(c)||(c=x);try{return b.getAttribute(c)}catch(d){return null}}function f(b){a.isNull(b)&&(b=document);var f=[];
a.isNull(c(b))||f.push(b);var h=[];b.querySelectorAll?(h=b.querySelectorAll("*["+x+"]"),0===h.length&&(h=b.querySelectorAll("*"))):h=b.getElementsByTagName("*");b=0;for(var w=h.length;b<w;++b)a.isNull(c(h[b]))||f.push(h[b]);h=0;for(b=f.length;h<b;++h){var q=f[h],w=c(q);if(!a.isNull(w)){var p=e(g,w),n={};a.isNull(p)&&(p=w);for(var p=p.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],z=0,y=p.length;z<y;++z){var t=p[z].replace("{{","").replace("}}",""),v=c(q,x+"-"+t);a.isNull(v)?(v="undefined"===s[t]?null:s[t],a.isNull(v)||
(n[t]=v)):n[t]=v}p=d(w,n);w=c(q,r);if(!a.isNull(w))try{q[w]=p}catch(D){}else if(q)if("INPUT"!==q.nodeName||"submit"!==q.type&&"reset"!==q.type)if("INPUT"===q.nodeName)try{q.placeholder=p}catch(I){}else if("FIELDSET"===q.nodeName)q.title=p;else if(!a.isNull(q.text)&&document.all)q.text=p;else if(a.isNull(q.childNodes))q.innerHTML=p;else if(w=q.childNodes.length,n=document.createTextNode(p),"leave"===k){for(p=!1;w--;)z=q.childNodes[w],3===z.nodeType&&(p||(q.insertBefore(n,z),p=!0),q.removeChild(z));
p||q.appendChild(n)}else{for(;w--;)q.removeChild(q.firstChild);q.appendChild(n)}else q.value=p}}}var g="en",h=["en","fr","de","sp"],n={},k="leave",x="data-tr",r="data-tr-attr",s={},y=!a.isNull(a.storage)&&!0===a.storage.persistent.support;if(y){var t=a.storage.persistent.getItem("a_language_store_language"),v=a.storage.persistent.getItem("a_language_store_allowed");a.isString(t)&&(g=t,f(document));a.isArray(v)&&(h=v)}return{setBehavior:function(b){k="erase"===b?"erase":"leave"},getBehavior:function(){return k},
getCurrent:function(){return g},setCurrent:function(b,c){!a.isString(b)||0>=b.length?a.console.error("a.language.setCurrent: setting a non-string lang, or empty string, as default language: "+b,1):(a.isNull(c)&&(c=!0),a.contains(h,b)||a.console.warn("a.language.setCurrent: unable to find language in available language list (value: "+b+", available: "+h.join(";")+")",2),g=b,a.isNull(n[g])&&(n[g]={}),a.console.log("a.language.setCurrent: set current language to "+g+", request update ? "+c,3),a.message.dispatch("a.language.change",
{value:g}),y&&a.storage.persistent.setItem("a_language_store_language",g),this.translate(document,c))},getAllowed:function(){return h},setAllowed:function(b){a.isString(b)&&(b=[b]);if(a.isArray(b)){h=b;var c=0;for(b=b.length;c<b;++c)a.isNull(n[c])&&(n[c]={});y&&(a.console.log("a.language.setAllowed: set allowed language to "+h,3),a.storage.persistent.setItem("a_language_store_allowed",h))}else a.console.error("a.language.setAllowed: the allowed language must be an Array (value: "+b+")",1)},getSingleTranslation:function(b,
c){return d(b,c)},addSingleTranslation:function(b,c,d,e){a.isNull(n[b])&&(a.console.warn("a.language.addSingleTranslation: be carefull, the language you submit does not seems to exist in dict (value: "+b+", dict: "+h.join(";")+")",1),n[b]={});n[b][c]=d;this.translate(document,e)},addTranslation:function(b,c,d){a.isNull(n[b])&&(n[b]={});for(var e in c)n[b][e]=c[e];this.translate(document,d)},getTranslation:function(b){return a.isString(b)?n[b]:n},translate:function(b,c){!1!==c&&f(b)},addVariable:function(b,
c){a.console.log("a.language.addVariable: add global variable (key: "+b+", value: "+c+")",3);s[b]=c},getVariable:function(b){return"undefined"===s[b]?null:s[b]},removeVariable:function(b){a.console.log("a.language.removeVariable: remove global variable (key: "+b+")",3);delete s[b]},clear:function(){n={}}}}();a.page={};
a.page.template={__tmpl:{},get:function(e,b,d,c){var f=null;a.isObject(window.Mustache)?f=window.Mustache:a.isObject(window.Handlebars)&&(f=window.Handlebars);if(null==f)a.console.error("a.page.template.get: unable to find Mustache.JS or Handlebars.JS ! Can't proceed",1);else{var g=e.replace(/[^a-zA-Z0-9\\-]/g,"_"),h="a_tmpl_"+g+"_a",n=function(b,c,d){a.isFunction(b)&&(a.isNull(f.to_html)?(c=f.compile(a.page.template.__tmpl[c]),b(c(d))):b(f.to_html(a.page.template.__tmpl[c],d)))};a.isString(this.__tmpl[h])?(a.console.log("a.page.template.get: loading "+
h+" from cache",3),n(d,h,b)):document.getElementById(h)?(this.__tmpl[h]||(a.console.log("a.page.template.get: loading "+h+" from inner html page",3),this.__tmpl[h]=document.getElementById(h).innerHTML),n(d,h,b)):document.getElementById(g)?(this.__tmpl[g]||(a.console.log("a.page.template.get: loading "+g+" from inner html page",3),this.__tmpl[g]=document.getElementById(g).innerHTML),n(d,g,b)):(a.console.log("a.page.template.get: loading "+e+" from external resource",3),a.loader.html(e,function(c,e,
f){a.page.template.__tmpl[h]||(a.page.template.__tmpl[h]=c);n(d,h,b)},{},c))}},htmlToDom:function(e){var b=document.createElement("div");b.innerHTML=e.replace(/^\s+|\s+$/g,"");e=b.childNodes;for(var b=[],d=0,c=e.length;d<c;++d){var f=e.item(d);!a.isObject(f)||"1"!==f.nodeType.toString()&&"3"!==f.nodeType.toString()||b.push(f)}return b},remove:function(e,b){for(;e.firstChild;)e.removeChild(e.firstChild);a.isFunction(b)&&b()},append:function(e,b,d){var c=this.htmlToDom(b);if(a.isObject(c))for(var f=
0,g=c.length;f<g;++f)e.appendChild(c[f]);a.isNull(a.language)||a.language.translate(e);a.isFunction(d)&&d(b)},replace:function(e,b,d){this.remove(e);this.append(e,b,d)}};
a.page.event=function(){function e(b,c){a.isObject(c)||(c={});return function(){a.message.dispatch("a.page.event."+b,c)}}function b(){var b=(new Date).getTime();b>h+2*g&&(a.console.log("a.page.event.hibernate: hibernate mode has been detected",3),e("hibernate")());h=b}function d(b,c){window.addEventListener?window.addEventListener(b,c,!1):window.attachEvent&&window.attachEvent("on"+b,c)}function c(b){var c=window.location.hash?window.location.hash.substring(1):null;if(n!==c){if(!0!==b){for(k.push({hash:c,
time:(new Date).getTime()});1E3<k.length;)k.shift();a.console.log("a.page.event.hash: hash change (previous: "+n+", new: "+c+")",3);e("hash",{value:c,old:n})()}n=c}}var f={},g=1E4,h=(new Date).getTime(),n=null,k=[];f.hash={getHash:function(){return window.location.hash?window.location.hash.substring(1):null},getPreviousHash:function(){return n},setPreviousHash:function(b){a.console.log("a.page.event.hash.setPreviousHash: change previous hash to "+b,3);n=b},trace:function(){return k}};c(!0);!a.isNull(window.onhashchange)&&
(void 0===document.documentMode||7<document.documentMode)?window.onhashchange=c:a.timer.add(c,null,50);var x=["resize","load","unload"],r;for(r in x)d(x[r],e(x[r]));d("load",function(){a.timer.add(b,null,g)});return f}();a.state=function(){function e(b){return a.isArray(b)?b.reverse():a.isString(b)?[b]:[]}function b(){for(var b=t;t===b||0>=t;)t=Math.floor(1E5*Math.random());return t}function d(b,c){var d=[],e=b.length;c=a.isFunction(c)?c:function(){return!0};for(var f=0;f<e;++f){for(var g=!1,h=0;h<e;++h)if(f!=h&&b[f].id===b[h].id&&c(b[f])){g=!0;break}g||d.push(b[f].id)}return d}function c(b){for(var c=0,d=[],e=a.state.helper.tree.selectLevel(b,k,c);0<e.length;)d.push(e),c++,e=a.state.helper.tree.selectLevel(b,k,c);
return d}function f(b){b=g(b);for(var c=y.length,d=[];c--;){for(var e=y[c].hashtagList,f=e.length,h=!1;f--&&(h=b({hash:e[f]}),!0!==h););h||(d=d.concat(y[c].itemList.slice()),y.splice(c,1))}return d}function g(b){return function(c){if(a.isObject(c)&&0<c.hash.length){if(c.hash===b)return!0;if(0<=c.hash.indexOf("{{")&&0<=c.hash.indexOf("}}")){var d=a.state.helper.parameter.extract(c.hash);c=c.hash;for(var e=d.length;e--;)c=a.state.helper.parameter.replace(c,d[e]);return RegExp("^"+c+"$","gi").test(b)}}return!1}}
function h(b){return function(c){return a.isObject(c)&&(a.isArray(b)&&a.contains(b,c.id)||c.id===b)?!0:!1}}function n(b,c){var d=h(c),e=g(b);return function(b){return!0===d(b)||!0===e(b)?!0:!1}}function k(b){return a.isObject(b)&&a.isArray(b.children)?b.children:[]}function x(b){return a.isObject(b)?b.id:-1}function r(e){var m=a.clone(s),h=a.clone(s),w=a.clone(s),q=f(e.value),p=g(e.old),q=n(e.old,q),r=g(e.value);a.state.helper.tree.selectBranch(m,k,q);a.state.helper.tree.selectBranch(h,k,r);a.state.helper.tree.selectBranch(w,
k,g("*"));var q=a.state.helper.tree.flat(m.concat(h),k),z=d(q,function(b){return 0<=b.hash.indexOf("{{")&&0<=b.hash.indexOf("}}")&&!a.state.helper.tree.isInBranch(b,k,r)&&!a.state.helper.tree.isInBranch(b,k,p)?!1:!0}),t=a.state.helper.tree.flat(w,k,x),m=c(m),v=c(h);a.message.dispatch("a.state.begin",e);a.console.log("a.state: element allowed to proceed change: "+z+" (does not mean all of them will be loaded)",3);var y=b();a.state.helper.chainer("unload",m,z,-1,function(){a.state.helper.chainer("load",
v,z,y,function(){0<w.length?(w=[w],a.console.log("a.state: wildcard allowed to proceed change: "+t+" (does not mean all of them will be loaded)",3),a.state.helper.chainer("unload",w,t,-1,function(){a.state.helper.chainer("load",w,t,-1,function(){a.message.dispatch("a.state.end",e)})})):a.message.dispatch("a.state.end",e)})})}var s=[],y=[],t=-1,v=[];a.message.addListener("a.page.event.hash",r);a.message.addListener("a.message.clear",function(){a.message.addListener("a.page.event.hash",r)});return{clear:function(){s=
[]},tree:function(){return a.clone(s)},add:function(b,c){if(!a.isObject(b))return null;if(a.isArray(b))for(var d=0,f=b.length;d<f;++d)this.add(b[d]);else{b.hash=a.isString(b.hash)?b.hash:"";a.isObject(b.include)||(b.include={});b.include.css=e(b.include.css);b.include.js=e(b.include.js);b.include.translate=e(b.include.translate);b.include.html=a.isString(b.include.html)?b.include.html:null;for(var g=["preLoad","postLoad","preUnload","unload","postUnload"],p=0,d=g.length;p<d;++p)f=b[g[p]],a.isFunction(f)&&
(f=f.toString(),f=f.slice(f.indexOf("(")+1,f.indexOf(")")).match(/([^\s,]+)/g),a.isNull(f)&&a.console.warn("The result parameter for function '"+g[p]+"' in id '"+b.id+"' has not been found, the state may not work properly",2));!a.isArray(b.children)&&a.isObject(b.children)&&(b.children=[a.clone(b.children)]);p=!a.isNull(b.parent);d=a.isArray(b.children);"*"===b.hash&&(p&&a.console.warn("a.state.add : The wildcard has a parent setted (not allowed)",1),d&&a.console.warn("a.state.add : The wildcard has children (not allowed)",
1),b.parent=null,p=!1,b.children=[]);g=[];d&&(g=b.children.slice());b.children=[];a.isNull(b.id)&&(b.id=1);for(;!a.isNull(a.state.helper.tree.getItem(s,k,h(b.id)));)b.id=Math.floor(1E5*Math.random()+1);if(p){p=a.state.helper.tree.getItem(s,k,h(b.parent));if(a.isNull(p))return null;p.children.push(b)}else s.push(b);p=b.id;d=0;for(f=g.length;d<f;++d)a.isObject(g[d])&&(g[d].parent=p,this.add(g[d]));"*"===b.hash&&a.state.helper.chainer("load",[[b]],[p],-1,function(){});!0===b.bootOnLoad&&(g=a.clone(b),
g.data=g.converter=g.options=null,g.preLoad=g.load=g.postLoad=null,g.preUnload=g.unload=g.postUnload=null,c=a.isFunction(c)?c:function(){},a.state.helper.chainer("load",[[g]],[p],-1,c));return p}},getById:function(b){return a.state.helper.tree.getItem(s,k,h(b))},removeById:function(b){var c=a.state.helper.tree.getItem(s,k,h(b));a.console.log("a.state.removeById: remove element (id: "+b+")",3);a.state.helper.tree.selectBranch(s,k,function(b){return b===c?!1:!0})},loadById:function(b,f,n){var w=a.clone(s),
q=a.page.event.hash.getHash(),p=a.clone(s);a.state.helper.tree.selectBranch(w,k,h(b));a.state.helper.tree.selectBranch(p,k,g(q));var r=a.state.helper.tree.flat(w,k),p=a.state.helper.tree.flat(p,k),p=d(p.concat(r)),w=c(w);n=a.isFunction(n)?n:function(){};a.console.log("a.state.loadById: element allowed to proceed change: "+p+" (does not mean all of them will be loaded)",3);a.state.helper.chainer("load",w,p,-1,n);a.isNull(f)&&(f=q);b={id:b,itemList:a.state.helper.tree.flat(r,k,x),hashtagList:e(f)};
y.push(b)},unloadById:function(b,d){for(var e=this.getById(b),e=c([e]),f=[],g=y.length;g--;)f=f.concat(y[g].itemList);a.console.log("a.state.unloadById: element allowed to proceed change: "+f+" (does not mean all of them will be unloaded)",3);g=a.isFunction(d)?d:function(){};a.state.helper.chainer("unload",e,f,-1,g)},forceReloadById:function(d,e){for(var f=a.isFunction(e)?e:function(){},h=y.length,n=[],p=a.clone(y);h--;)a.contains(y[h].itemList,d)&&n.push(y[h].hashtagList);if(0<n.length)this.unloadById(d,
function(){for(var b=n.length;b--;)a.state.loadById(d,n[b]);y=p;f()});else{var h=a.clone(s),r=a.page.event.hash.getHash();a.state.helper.tree.selectBranch(h,k,g(r));for(var r=a.state.helper.tree.flat(h,k),t=r.length;t--;)if(r[t].id===d){var v=c([r[t]]),B=a.state.helper.tree.flat(h,k,x);a.console.log("a.state.forceReloadById: element allowed to proceed change: "+B+" (does not mean all of them will be loaded/unloaded)",3);var C=b();a.state.helper.chainer("unload",v,B,-1,function(){a.state.helper.chainer("load",
v,B,C,f)});break}}},hashExists:function(b){return a.isString(b)&&""!==b?a.state.helper.tree.isInBranch(s,k,g(b)):!1},__currentGeneratedId:function(){return t},type:{add:function(b,c){v[b]=c},get:function(b){return a.isFunction(v[b])?v[b]:null},list:function(){return v}},helper:{tree:{},chainer:{},parameter:{}}}}();
a.state.helper.tree={flat:function(e,b,d){var c=[];if(!a.isArray(e)||!a.isFunction(b))return[];d=a.isFunction(d)?d:function(b){return b};for(var f=0,g=e.length;f<g;++f){var h=this.flat(b(e[f]),b,d);c.push(d(e[f]));0<h.length&&(c=c.concat(h))}return c},getItem:function(e,b,d){if(!a.isArray(e)||!a.isFunction(d)||!a.isFunction(b))return null;for(var c=0,f=e.length;c<f;++c){if(!0===d(e[c]))return e[c];var g=this.getItem(b(e[c]),b,d);if(!a.isNull(g))return g}return null},isInBranch:function(e,b,d){e=this.getItem(e,
b,d);return a.isNull(e)?!1:!0},selectBranch:function(e,b,d){if(a.isArray(e)&&a.isFunction(b)&&a.isFunction(d))for(var c=e.length;c--;){var f=b(e[c]);!1===d(e[c])&&a.isNull(this.getItem(f,b,d))?e.splice(c,1):0<f.length&&this.selectBranch(f,b,d)}},selectLevel:function(e,b,d){if(!a.isArray(e)||!a.isFunction(b))return[];var c=[],f=e.length;if(a.isNull(d)||isNaN(d)||0>=d)return e;for(d--;f--;){var g=b(e[f]);0<g.length&&(c=c.concat(this.selectLevel(g,b,d)))}return c}};
a.state.helper.chainer=function(e,b,d,c,f){function g(b,c){var d={};a.isNull(b)||(d.resource=b);a.isNull(c)||(d.status=c);a.message.dispatch("a.state.error",d)}function h(b){return function(c){y(b,function(){c.done()})}}function n(b,c,d){return function(e){a.loader[b](c,function(b){a.isFunction(d)&&d(b);e.done()})}}function k(b,c,d){if(a.isObject(d))for(var e in d)d[e]=a.state.helper.parameter.extrapolate(d[e],b,c),k(b,c,d[e])}function x(b,c,d,e){var f=a.clone(d);d=a.page.event.hash.getHash();f.url=
a.state.helper.parameter.extrapolate(c,d,e);k(d,e,f);c=c.replace(/^\s+|\s+$/g,"");return 0===c.indexOf("{{")&&c.indexOf("}}")===c.length-2?(c=a.state.helper.parameter.extrapolate(c,d,e,!1),function(d){var e=d.getData("data")||{};a.isObject(e.a)||(e.a=e.appstorm={},e.a.parameter=e.appstorm.parameter={});a.isNull(b)?e=c:(e.a.parameter[b]=c,e.appstorm.parameter=e.a.parameter,a.isNull(e[b])&&(e[b]=c));d.setData("data",e);d.done()}):function(c){a.isNull(c.getData("data"))&&c.setData("data",{});(new a.ajax(f,
function(d){if(a.isNull(b))c.setData("data",d);else{var e=c.getData("data");e[b]=d;c.setData("data",e)}c.done()},g)).send()}}function r(b,c){for(var d=new a.callback.synchronizer,e=b.include.css,f=b.include.js,h=b.include.html,l=b.include.translate,k=b.data,r=b.title,s=b.options,t=b.converter,v=b.hash,y=e.length,E=f.length;y--;)d.addCallback(n("css",e[y]));for(;E--;)d.addCallback(n("js",f[E]));if(!a.isNull(a.language)&&0<l.length)for(e=l.length;e--;)d.addCallback(n("json",l[e],function(b){for(var c in b)a.language.addTranslation(c,
b[c],!0)}));a.isString(h)&&(h=a.state.helper.parameter.extrapolate(h,a.page.event.hash.getHash(),v),d.addCallback(function(b){b.setData("html",h);a.page.template.get(h,{},b.done,g)}));if(a.isString(k)||a.isObject(k))if(a.isObject(s)||(s={type:"json"}),a.isString(s.type)||(s.type="json"),a.isString(k))d.addCallback(x(null,k,s,v));else for(var G in k)a.isObject(k[G])&&a.isString(k[G].url)?(a.isObject(k[G].options)||(k[G].options={type:"json"}),d.addCallback(x(G,k[G].url,k[G].options,v))):d.addCallback(x(G,
k[G],s,v));else d.addCallback(function(b){b.setData("data",{});b.done()});d.setSuccess(function(b){a.isNull(t)||t(b.data);a.isNull(r)||(r=a.state.helper.parameter.extrapolate(r,a.page.event.hash.getHash(),v),a.isNull(a.language)?document.title=r:document.title=a.language.getSingleTranslation(r));var d=b.data,e=b.html,d=a.isNull(d)?{}:d;a.isNull(e)?a.isFunction(c)&&c(b,null):a.page.template.get(e,d,function(d){a.isFunction(c)&&c(b,d)})});d.setFail(g);d.start()}function s(b,d){var f=new a.callback.chainer;
"unload"===e?f.addCallback(b.preUnload,b.unload,b.postUnload):f.addCallback(function(d){a.isFunction(b.preLoad)&&(-1==c||0<=c&&a.state.__currentGeneratedId()===c)?b.preLoad(d):d.done()},function(d){r(b,function(e,f){a.isFunction(b.load)&&(-1==c||0<=c&&a.state.__currentGeneratedId()===c)&&b.load(f);var g=d.getFullData()||{};if(a.isObject(e.data))for(var h in e.data)g[h]=e.data[h];d.setFullData(g);d.done()})},function(d){a.isFunction(b.postLoad)&&(-1==c||0<=c&&a.state.__currentGeneratedId()===c)?b.postLoad(d):
d.done()});f.setSuccess(d);f.setFail(g);f.start()}function y(b,c){for(var e=new a.callback.synchronizer,f=b.length;f--;)a.contains(d,b[f].id)&&function(b){e.addCallback(function(c){s(b,function(){c.done()})})}(b[f]);e.setSuccess(c);e.setFail(g);e.start()}var t=b.length;e="unload"===e?"unload":"load";d=d||[];var v=new a.callback.chainer;if("unload"===e)for(;t--;)v.addCallback(h(b[t]));else for(var l=0;l<t;)v.addCallback(h(b[l])),l++;v.setSuccess(f);v.setFail(g);v.start()};
a.state.helper.parameter={extract:function(e,b){var d=/\{\{(\s*\w+\s*:\s*[a-z0-9_\-\[\]\(\)\^.\|\+\*\?\\\/]+\s*)\}\}/gmi,c=/^\s+|\s+$/g,f=!a.isNull(b);f&&(d=b);for(var g=[],h;h=d.exec(e);){var n=null,n=f?["hash",h[1]]:h[1].split(":",2);g.push({original:h[0].replace(c,""),name:n[0].replace(c,""),regex:n[1].replace(c,""),start:h.index})}return g},replace:function(e,b,d){d=a.isNull(d)?"("+b.regex+")":d;return e.substr(0,b.start)+d+e.substr(b.start+b.original.length)},extrapolate:function(e,b,d,c){if(a.isString(e)&&
0<=e.indexOf("{{")&&0<=e.indexOf("}}")){for(var f=this.extract(e),g=this.extract(d),h=this.extract(e,/\{\{(\s*\w+\s*)\}\}/gmi),f=f.concat(h),h=g.length;h--;)d=this.replace(d,g[h]);if(h=RegExp("^"+d+"$","gi").exec(b)){b=0;for(d=g.length;b<d;++b)g[b].value=h[b+1];for(var h=0,n=f.length;h<n;++h)for(b=0;b<d;++b)g[b].name===f[h].regex&&"hash"===f[h].name&&(f[h].value=g[b].value)}g=f.length;for(c=!1===c?function(b,c,d){return d}:this.replace;g--;){b=f[g];"hash"!==b.name&&"hashtag"!==b.name||a.isNull(b.value)||
(e=this.replace(e,b,b.value));d=!1;if(!a.isNull(a.storage))switch(b.name){case "temporary":e=c(e,b,a.storage.temporary.getItem(b.regex));d=!0;break;case "memory":e=c(e,b,a.storage.memory.getItem(b.regex));d=!0;break;case "persistent":e=c(e,b,a.storage.persistent.getItem(b.regex));d=!0;break;case "cookie":e=c(e,b,a.storage.cookie.getItem(b.regex));d=!0;break;case "store":case "storage":d=a.storage.temporary.getItem(b.regex),e=a.isNull(d)?c(e,b,a.storage.persistent.getItem(b.regex)):c(e,b,d),d=!0}if(!d&&
(d=a.state.type.list(),a.isObject(d)))for(var k in d)k===b.name&&(h=d[k],e=a.isFunction(h)?c(e,b,h(b.regex)):c(e,b,h))}}return e}};a.storage={__printGetItem:function(e,b,d){"__test_support"!==b&&a.console.log("a.storage.type."+e+".getItem: get element (key: "+b+", value: "+d+")",3)},__printGetErrorItem:function(e,b){"__test_support"!==b&&a.console.log("a.storage.type."+e+".getItem: unable to find key ("+b+") in store",2)},__printSetItem:function(e,b,d){"__test_support"!==b&&a.console.log("a.storage.type."+e+".setItem: add element (key: "+b+", value: "+d+")",3)},__printRemoveItem:function(e,b){"__test_support"!==b&&a.console.log("a.storage.type."+
e+".removeItem: remove element (key: "+b+")",3)},type:{}};
a.storage.type.cookie=function(){var e=!1,b={support:!1,engine:"cookie",setItem:function(b,c,e){var g="";a.storage.__printSetItem("cookie",b,c);e&&(g=new Date,g.setTime(g.getTime()+864E5*e),g="; expires="+g.toGMTString());document.cookie=b+"="+escape(a.parser.json.stringify(c))+g+"; path=/"},getItem:function(b){if(0<document.cookie.length){var c=document.cookie.indexOf(b+"=");if(-1!=c){var c=c+b.length+1,e=document.cookie.indexOf(";",c);-1==e&&(e=document.cookie.length);c=a.parser.json.parse(unescape(document.cookie.substring(c,
e)));a.storage.__printGetItem("cookie",b,c);return c}}a.storage.__printGetErrorItem("cookie",b);return null},removeItem:function(b){a.storage.__printRemoveItem("cookie",b);this.setItem(b,"",-1);e&&a.message.dispatch("a.storage.remove",{key:b})}};b.setItem("__test_support","ok");"ok"===b.getItem("__test_support")&&(b.removeItem("__test_support"),b.support=!0);e=!0;return b}();a.storage.cookie=a.storage.type.cookie;
a.storage.type.localStorage=function(){var e=!1;"localStorage"in window&&null!==window.localStorage&&(window.localStorage.setItem("__test_support","o"),"o"===window.localStorage.getItem("__test_support")&&(window.localStorage.removeItem("__test_support"),e=!0));return{support:e,engine:"localStorage",getItem:function(b){if(e){var d=window.localStorage.getItem(b);if(a.isNull(d))return a.storage.__printGetErrorItem("localStorage",b),null;d=a.parser.json.parse(d);a.storage.__printGetItem("localStorage",
b,d);return d}return null},setItem:function(b,d){e&&(a.storage.__printSetItem("localStorage",b,d),window.localStorage.setItem(b,a.parser.json.stringify(d)),a.message.dispatch("a.storage.add",{key:b,value:d}))},removeItem:function(b){e&&(a.storage.__printRemoveItem("localStorage",b),window.localStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.globalStorage=function(){var e=!1,b=window.location.hostname;a.isNull(window.globalStorage)||(window.globalStorage[b].setItem("__test_support","ok"),"ok"==window.globalStorage[b].getItem("__test_support")&&(window.globalStorage[b].removeItem("__test_support"),e=!0));return{support:e,engine:"globalStorage",getItem:function(d){if(e){var c=window.globalStorage[b].getItem(d);if(a.isObject(c)&&!a.isNull(c.value))return c=a.parser.json.parse(c.value),a.storage.__printGetItem("globalStorage",
d,c),c;if(a.isNull(c))a.storage.__printGetErrorItem("globalStorage",d);else return c=a.parser.json.parse(c),a.storage.__printGetItem("globalStorage",d,c),c}return null},setItem:function(d,c){e&&(a.storage.__printSetItem("globalStorage",d,c),window.globalStorage[b].setItem(d,a.parser.json.stringify(c)),a.message.dispatch("a.storage.add",{key:d,value:c}))},removeItem:function(d){e&&(a.storage.__printRemoveItem("globalStorage",d),window.globalStorage[b].removeItem(d),a.message.dispatch("a.storage.remove",
{key:d}))}}}();
a.storage.type.memory=function(){var e={};return{support:!0,engine:"memory",getItem:function(b){var d=e[b];if(!a.isNull(d))return a.storage.__printGetItem("memory",b,d),a.console.log("a.storage.memory.getItem: found item (key: "+b+", value: "+d+")",3),d;a.storage.__printGetErrorItem("memory",b);return null},setItem:function(b,d){e[b]=d;a.storage.__printSetItem("memory",b,d);a.message.dispatch("a.storage.add",{key:b,value:d})},removeItem:function(b){a.storage.__printRemoveItem("memory",b);a.isNull(e[b])||
(delete e[b],a.message.dispatch("a.storage.remove",{key:b}))}}}();a.storage.memory=a.storage.type.memory;
a.storage.type.sessionStorage=function(){var e=!1;"sessionStorage"in window&&!a.isNull(window.sessionStorage)&&(window.sessionStorage.setItem("__test_support","o"),"o"===window.sessionStorage.getItem("__test_support")&&(window.sessionStorage.removeItem("__test_support"),e=!0));return{support:e,engine:"sessionStorage",getItem:function(b){if(e){var d=window.sessionStorage.getItem(b);if(a.isNull(d))return a.storage.__printGetErrorItem("sessionStorage",b),null;d=a.parser.json.parse(d);a.storage.__printGetItem("sessionStorage",
b,d);return d}return null},setItem:function(b,d){e&&(a.storage.__printSetItem("sessionStorage",b,d),window.sessionStorage.setItem(b,a.parser.json.stringify(d)),a.message.dispatch("a.storage.add",{key:b,value:d}))},removeItem:function(b){e&&(a.storage.__printRemoveItem("sessionStorage",b),window.sessionStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.userData=function(){var e=!1;if(document.all)try{document.write('<input type="hidden" id="a_storage" style="display:none;behavior:url(\'#default#userData\')" />');var b=document.getElementById("a_storage");b.load("aUserDataStorage");b.setAttribute("__test_support","ok");b.save("aUserDataStorage");"ok"===b.getAttribute("__test_support")&&(b.removeAttribute("__test_support"),b.save("aUserDataStorage"),e=!0)}catch(d){e=!1}return{support:e,engine:"userData",getItem:function(c){if(e){var d=
a.parser.json.parse(b.getAttribute(c));if(a.isNull(d))return a.storage.__printGetErrorItem("userData",c),null;a.storage.__printGetItem("userData",c,d);return d}return null},setItem:function(c,d){e&&(a.storage.__printSetItem("userData",c,d),b.setAttribute(c,a.parser.json.stringify(d)),b.save("aUserDataStorage"),a.message.dispatch("a.storage.add",{key:c,value:d}))},removeItem:function(c){e&&(a.storage.__printRemoveItem("userData",c),b.removeAttribute(c),b.save("aUserDataStorage"),a.message.dispatch("a.storage.remove",
{key:c}))}}}();
a.storage.type.flash=function(){function e(e){if(!1===b&&!1===d){var g=document.createElement("div");g.id="flashstoragecontent";document.body.appendChild(g);var h={id:c,rootId:g.id,flashvars:{},params:{wmode:"transparent",menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always"}};a.loader.flash(a.url+"vendor/storage/flash/localStorage.swf",function(c){d=!0;c=document.getElementById(h.id);!0===c.testData()&&(b=!0,c.setDatabase("a_flashStorage"));!0===b&&a.isFunction(e)&&e(b)},
h)}else!0===b&&a.isFunction(e)&&e(b)}var b=!1,d=!1,c="flashstorage";return{support:function(){return b},ready:function(){return d},engine:"flash",start:function(b){e(b)},getItem:function(d){this.start();if(!0===b){var e=document.getElementById(c).getData(d);if(a.isNull(e))return a.storage.__printGetErrorItem("flash",d),null;a.storage.__printGetItem("flash",d,e);return e}return null},setItem:function(d,e){this.start();!0===b&&(a.storage.__printSetItem("flash",d,e),document.getElementById(c).setData(d,
e))},removeItem:function(d){this.start();if(!0===b)return a.storage.__printRemoveItem("flash",d),document.getElementById(c).removeData(d)}}}();
a.storage.type.silverlight=function(){function e(e){if(!1===b&&!1===d){var g=document.createElement("div");g.id="__silverlightstorage";document.body.appendChild(g);var h={id:c,rootId:g.id,params:[{name:"minRuntimeVersion",value:"2.0.31005.0"},{name:"autoUpgrade",value:"true"}]};a.loader.silverlight(a.url+"vendor/storage/silverlight/silverlightStorage.xap",function(c){d=!0;!0===document.getElementById(h.id).Content.store.testData()&&(b=!0);!0===b&&a.isFunction(e)&&e(b)},h)}else!0===b&&a.isFunction(e)&&
e(b)}var b=!1,d=!1,c="silverlightstorage";return{support:function(){return b},ready:function(){return d},engine:"silverlight",start:function(b){e(b)},getItem:function(d){this.start();if(!0===b){var e=document.getElementById(c).Content.store.loadData(d);if(a.isNull(e)||"false"===e)return a.storage.__printGetErrorItem("silverlight",d),null;e=a.parser.json.parse(e);a.storage.__printGetItem("silverlight",d,e);return e}return null},setItem:function(d,e){this.start();!0===b&&(a.storage.__printSetItem("silverlight",
d,e),document.getElementById(c).Content.store.saveData(d,a.parser.json.stringify(e)))},removeItem:function(d){this.start();!0===b&&(a.storage.__printRemoveItem("silverlight",d),document.getElementById(c).Content.store.removeData(d))}}}();
a.storage.type.javafx=function(){function e(c){!1===b&&!1===d?a.loader.javafx(a.url+"vendor/storage/javafx/JavaFXStorage.jar",function(){d=!0;!0===document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.testData()&&(b=!0,el.setDatabase("a_javafxStorage"));!0===b&&a.isFunction(c)&&c(b)},{code:"javafxstorage.Main",id:"javafxstorage"}):!0===b&&a.isFunction(c)&&c(b)}var b=!1,d=!1;return{support:function(){return b},ready:function(){return d},engine:"javafx",start:function(b){e(b)},
getItem:function(c){this.start();if(!0===b){var d=document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.loadData(c);if(a.isNull(d)||"false"===d)return a.storage.__printGetErrorItem("javafx",c),null;d=a.parser.json.parse(d);a.storage.__printGetItem("javafx",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("javafx",c,d),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.saveData(c,a.parser.json.stringify(d)))},
removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("javafx",c),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.removeData(c))}}}();a.storage.temporary=function(){for(var e=["sessionStorage","cookie","memory"],b=0,d=e.length;b<d;++b){var c=e[b];if(a.storage.type[c].support)return a.console.log("a.storage.temporary: choosing storage "+a.storage.type[c].engine,3),a.message.dispatch("a.storage.temporary.change",{engine:c}),a.storage.type[c]}return null}();
a.storage.external=function(){function e(b,d){a.storage.external.ready=b.ready;a.storage.external.support=b.support;a.storage.external.engine=b.engine;a.storage.external.getItem=b.getItem;a.storage.external.setItem=b.setItem;a.storage.external.removeItem=b.removeItem;a.isFunction(d)&&d()}return{start:function(b){var d=a.storage.type.silverlight,c=a.storage.type.flash,f=a.storage.type.javafx;d.start(function(g){g?(a.console.log("a.storage.external: choosing storage silverlight",3),e(d,b)):c.start(function(d){d?
(a.console.log("a.storage.external: choosing storage flash",3),e(c,b)):f.start(function(c){c?(a.console.log("a.storage.external: choosing storage javafx",3),e(f,b)):a.console.warn("a.storage.external: choosing storage NONE AVAILABLE",3)})})})}}}();
a.storage.persistent=function(){for(var e=["localStorage","globalStorage","userData","cookie"],b=0,d=e.length;b<d;++b){var c=e[b];if(a.storage.type[c].support)return a.console.log("a.storage.persistent: choosing storage "+a.storage.type[c].engine,3),a.message.dispatch("a.storage.persistent.change",{engine:c}),a.storage.type[c]}return null}();
null==a.storage.persistent&&(a.storage.persistent={},a.storage.persistent.support=!1,a.storage.persistent.engine=function(){return"none"},a.storage.persistent.getItem=function(){return null},a.storage.persistent.setItem=function(){},a.storage.persistent.removeItem=function(){});a.storage.support=a.storage.persistent.support;a.storage.engine=a.storage.persistent.engine;a.storage.getItem=a.storage.persistent.getItem;a.storage.setItem=a.storage.persistent.setItem;a.storage.removeItem=a.storage.persistent.removeItem;
