/*

 Lo-Dash 2.4.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 Build: `lodash modern -o ./dist/lodash.js`
*/
(function(){function b(b,c,e){e=(e||0)-1;for(var d=b?b.length:0;++e<d;)if(b[e]===c)return e;return-1}function c(c,e){var d=typeof e;if(c=c.l,"boolean"==d||null==e)return c[e]?0:-1;"number"!=d&&"string"!=d&&(d="object");var k="number"==d?e:v+e;return c=(c=c[d])&&c[k],"object"==d?c&&-1<b(c,e)?0:-1:c?0:-1}function d(b){var c=this.l,e=typeof b;if("boolean"==e||null==b)c[b]=!0;else{"number"!=e&&"string"!=e&&(e="object");var d="number"==e?b:v+b,c=c[e]||(c[e]={});"object"==e?(c[d]||(c[d]=[])).push(b):c[d]=
!0}}function f(b){return b.charCodeAt(0)}function h(b,c){for(var e=b.m,d=c.m,k=-1,g=e.length;++k<g;){var f=e[k],l=d[k];if(f!==l){if(f>l||"undefined"==typeof f)return 1;if(f<l||"undefined"==typeof l)return-1}}return b.n-c.n}function m(b){var c=-1,e=b.length,k=b[0],f=b[e/2|0],l=b[e-1];if(k&&"object"==typeof k&&f&&"object"==typeof f&&l&&"object"==typeof l)return!1;k=g();k["false"]=k["null"]=k["true"]=k.undefined=!1;f=g();f.k=b;f.l=k;for(f.push=d;++c<e;)f.push(b[c]);return f}function l(b){return"\\"+
Ra[b]}function q(){return x.pop()||[]}function g(){return r.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function e(b){b.length=0;x.length<u&&x.push(b)}function k(b){var c=b.l;c&&k(c);b.k=b.l=b.m=b.object=b.number=b.string=b.o=null;r.length<u&&r.push(b)}function t(b,c,e){c||(c=0);"undefined"==typeof e&&(e=b?b.length:0);var d=-1;e=e-c||0;for(var k=Array(0>e?0:e);++d<e;)k[d]=b[c+d];return k}function C(d){function r(p,
b,c){if(!p||!I[typeof p])return p;b=b&&"undefined"==typeof c?b:P(b,c,3);for(var e=-1,d=I[typeof p]&&K(p),k=d?d.length:0;++e<k&&(c=d[e],!1!==b(p[c],c,p)););return p}function u(p,b,c){var e;if(!p||!I[typeof p])return p;b=b&&"undefined"==typeof c?b:P(b,c,3);for(e in p)if(!1===b(p[e],e,p))break;return p}function x(p,b,c){var e,d=p,k=d;if(!d)return k;for(var g=arguments,f=0,l="number"==typeof c?2:g.length;++f<l;)if((d=g[f])&&I[typeof d])for(var t=-1,r=I[typeof d]&&K(d),v=r?r.length:0;++t<v;)e=r[t],"undefined"==
typeof k[e]&&(k[e]=d[e]);return k}function T(p,b,c){var e,d=p,k=d;if(!d)return k;var g=arguments,f=0,l="number"==typeof c?2:g.length;if(3<l&&"function"==typeof g[l-2])var t=P(g[--l-1],g[l--],2);else 2<l&&"function"==typeof g[l-1]&&(t=g[--l]);for(;++f<l;)if((d=g[f])&&I[typeof d])for(var r=-1,v=I[typeof d]&&K(d),h=v?v.length:0;++r<h;)e=v[r],k[e]=t?t(k[e],d[e]):d[e];return k}function na(p){var b,c=[];if(!p||!I[typeof p])return c;for(b in p)L.call(p,b)&&c.push(b);return c}function n(p){return p&&"object"==
typeof p&&!J(p)&&L.call(p,"__wrapped__")?p:new ea(p)}function ea(p,b){this.__chain__=!!b;this.__wrapped__=p}function oa(p){function b(){if(e){var p=t(e);pa.apply(p,arguments)}if(this instanceof b){var k=qa(c.prototype),p=c.apply(k,p||arguments);return M(p)?p:k}return c.apply(d,p||arguments)}var c=p[0],e=p[2],d=p[4];return Sa(b,p),b}function Ta(p,b,c,d,k){if(c){var g=c(p);if("undefined"!=typeof g)return g}if(!M(p))return p;var f=N.call(p);if(!U[f])return p;var l=W[f];switch(f){case ra:case sa:return new l(+p);
case ta:case ha:return new l(p);case ua:return g=l(p.source,F.exec(p)),g.lastIndex=p.lastIndex,g}if(f=J(p),b){var v=!d;d||(d=q());k||(k=q());for(var h=d.length;h--;)if(d[h]==p)return k[h];g=f?l(p.length):{}}else g=f?t(p):T({},p);return f&&(L.call(p,"index")&&(g.index=p.index),L.call(p,"input")&&(g.input=p.input)),b?(d.push(p),k.push(g),(f?O:r)(p,function(p,e){g[e]=Ta(p,b,c,d,k)}),v&&(e(d),e(k)),g):g}function qa(p){return M(p)?Ia(p):{}}function P(p,b,c){if("function"!=typeof p)return Ua;if("undefined"==
typeof b||!("prototype"in p))return p;var e=p.__bindData__;if("undefined"==typeof e&&(va.funcNames&&(e=!p.name),e=e||!va.funcDecomp,!e)){var d=Nb.call(p);va.funcNames||(e=!E.test(d));e||(e=jb.test(d),Sa(p,e))}if(!1===e||!0!==e&&1&e[1])return p;switch(c){case 1:return function(c){return p.call(b,c)};case 2:return function(c,e){return p.call(b,c,e)};case 3:return function(c,e,d){return p.call(b,c,e,d)};case 4:return function(c,e,d,k){return p.call(b,c,e,d,k)}}return kb(p,b)}function lb(p){function b(){var p=
l?g:this;if(d){var m=t(d);pa.apply(m,arguments)}return(k||v)&&(m||(m=t(arguments)),k&&pa.apply(m,k),v&&m.length<f)?(e|=16,lb([c,h?e:-4&e,m,null,g,f])):(m||(m=arguments),r&&(c=p[q]),this instanceof b?(p=qa(c.prototype),m=c.apply(p,m),M(m)?m:p):c.apply(p,m))}var c=p[0],e=p[1],d=p[2],k=p[3],g=p[4],f=p[5],l=1&e,r=2&e,v=4&e,h=8&e,q=c;return Sa(b,p),b}function wa(p,e){var d=-1,g=Ja(),f=p?p.length:0,l=f>=B&&g===b,t=[];if(l){var r=m(e);r?(g=c,e=r):l=!1}for(;++d<f;)r=p[d],0>g(e,r)&&t.push(r);return l&&k(e),
t}function Y(p,b,c,e){e=(e||0)-1;for(var d=p?p.length:0,k=[];++e<d;){var g=p[e];if(g&&"object"==typeof g&&"number"==typeof g.length&&(J(g)||Ka(g))){b||(g=Y(g,b,c));var f=-1,l=g.length,r=k.length;for(k.length+=l;++f<l;)k[r++]=g[f]}else c||k.push(g)}return k}function ia(p,b,c,d,k,g){if(c){var f=c(p,b);if("undefined"!=typeof f)return!!f}if(p===b)return 0!==p||1/p==1/b;if(p===p&&!(p&&I[typeof p]||b&&I[typeof b]))return!1;if(null==p||null==b)return p===b;var l=N.call(p),r=N.call(b);if(l==xa&&(l=Z),r==
xa&&(r=Z),l!=r)return!1;switch(l){case ra:case sa:return+p==+b;case ta:return p!=+p?b!=+b:0==p?1/p==1/b:p==+b;case ua:case ha:return p==$(b)}if(r=l==ya,!r){var t=L.call(p,"__wrapped__"),v=L.call(b,"__wrapped__");if(t||v)return ia(t?p.__wrapped__:p,v?b.__wrapped__:b,c,d,k,g);if(l!=Z||(l=p.constructor,t=b.constructor,l!=t&&!(H(l)&&l instanceof l&&H(t)&&t instanceof t)&&"constructor"in p&&"constructor"in b))return!1}l=!k;k||(k=q());g||(g=q());for(t=k.length;t--;)if(k[t]==p)return g[t]==b;var h=0,f=!0;
if(k.push(p),g.push(b),r){if(t=p.length,h=b.length,(f=h==t)||d)for(;h--;)if(r=t,v=b[h],d)for(;r--&&!(f=ia(p[r],v,c,d,k,g)););else if(!(f=ia(p[h],v,c,d,k,g)))break}else u(b,function(b,e,Ga){return L.call(Ga,e)?(h++,f=L.call(p,e)&&ia(p[e],b,c,d,k,g)):void 0}),f&&!d&&u(p,function(p,b,c){return L.call(c,b)?f=-1<--h:void 0});return k.pop(),g.pop(),l&&(e(k),e(g)),f}function mb(p,b,c,e,d){(J(b)?O:r)(b,function(b,k){var Ga,g,f=b,l=p[k];if(b&&((g=J(b))||Va(b))){for(f=e.length;f--;)if(Ga=e[f]==b){l=d[f];break}if(!Ga){var t;
c&&(f=c(l,b),t="undefined"!=typeof f)&&(l=f);t||(l=g?J(l)?l:[]:Va(l)?l:{});e.push(b);d.push(l);t||mb(l,b,c,e,d)}}else c&&(f=c(l,b),"undefined"==typeof f&&(f=b)),"undefined"!=typeof f&&(l=f);p[k]=l})}function Wa(p,b){return p+Ob(nb()*(b-p+1))}function Xa(p,d,g){var f=-1,l=Ja(),t=p?p.length:0,r=[],v=!d&&t>=B&&l===b,h=g||v?q():r;for(v&&(h=m(h),l=c);++f<t;){var s=p[f],u=g?g(s,f,p):s;(d?!f||h[h.length-1]!==u:0>l(h,u))&&((g||v)&&h.push(u),r.push(s))}return v?(e(h.k),k(h)):g&&e(h),r}function Ya(p){return function(b,
c,e){var d={};c=n.createCallback(c,e,3);e=-1;var k=b?b.length:0;if("number"==typeof k)for(;++e<k;){var g=b[e];p(d,g,c(g,e,b),b)}else r(b,function(b,e,k){p(d,b,c(b,e,k),k)});return d}}function V(p,b,c,e,d,k){var g=1&b,f=4&b,l=16&b,r=32&b;if(!(2&b||H(p)))throw new X;l&&!c.length&&(b&=-17,l=c=!1);r&&!e.length&&(b&=-33,r=e=!1);var h=p&&p.__bindData__;return h&&!0!==h?(h=t(h),h[2]&&(h[2]=t(h[2])),h[3]&&(h[3]=t(h[3])),!g||1&h[1]||(h[4]=d),!g&&1&h[1]&&(b|=8),!f||4&h[1]||(h[5]=k),l&&pa.apply(h[2]||(h[2]=
[]),c),r&&Pb.apply(h[3]||(h[3]=[]),e),h[1]|=b,V.apply(null,h)):(1==b||17===b?oa:lb)([p,b,c,e,d,k])}function Ra(b){return Za[b]}function Ja(){var p=(p=n.indexOf)===ob?b:p;return p}function aa(b){return"function"==typeof b&&Qb.test(b)}function pb(b){var c,e;return b&&N.call(b)==Z&&(c=b.constructor,!H(c)||c instanceof c)?(u(b,function(b,p){e=p}),"undefined"==typeof e||L.call(b,e)):!1}function ib(b){return qb[b]}function Ka(b){return b&&"object"==typeof b&&"number"==typeof b.length&&N.call(b)==xa||!1}
function rb(b,c,e){var d=K(b),k=d.length;for(c=P(c,e,3);k--&&(e=d[k],!1!==c(b[e],e,b)););return b}function za(b){var c=[];return u(b,function(b,p){H(b)&&c.push(p)}),c.sort()}function sb(b){for(var c=-1,e=K(b),d=e.length,k={};++c<d;){var g=e[c];k[b[g]]=g}return k}function H(b){return"function"==typeof b}function M(b){return!(!b||!I[typeof b])}function tb(b){return"number"==typeof b||b&&"object"==typeof b&&N.call(b)==ta||!1}function Aa(b){return"string"==typeof b||b&&"object"==typeof b&&N.call(b)==
ha||!1}function La(b){for(var c=-1,e=K(b),d=e.length,k=Q(d);++c<d;)k[c]=b[e[c]];return k}function ub(b,c,e){var d=-1,k=Ja(),g=b?b.length:0,f=!1;return e=(0>e?R(0,g+e):e)||0,J(b)?f=-1<k(b,c,e):"number"==typeof g?f=-1<(Aa(b)?b.indexOf(c,e):k(b,c,e)):r(b,function(b){return++d<e?void 0:!(f=b===c)}),f}function vb(b,c,e){var d=!0;c=n.createCallback(c,e,3);e=-1;var k=b?b.length:0;if("number"==typeof k)for(;++e<k&&(d=!!c(b[e],e,b)););else r(b,function(b,p,e){return d=!!c(b,p,e)});return d}function Ma(b,c,
e){var d=[];c=n.createCallback(c,e,3);e=-1;var k=b?b.length:0;if("number"==typeof k)for(;++e<k;){var g=b[e];c(g,e,b)&&d.push(g)}else r(b,function(b,p,e){c(b,p,e)&&d.push(b)});return d}function $a(b,c,e){c=n.createCallback(c,e,3);e=-1;var d=b?b.length:0;if("number"!=typeof d){var k;return r(b,function(b,p,e){return c(b,p,e)?(k=b,!1):void 0}),k}for(;++e<d;){var g=b[e];if(c(g,e,b))return g}}function O(b,c,e){var d=-1,k=b?b.length:0;if(c=c&&"undefined"==typeof e?c:P(c,e,3),"number"==typeof k)for(;++d<
k&&!1!==c(b[d],d,b););else r(b,c);return b}function Na(b,c,e){var d=b?b.length:0;if(c=c&&"undefined"==typeof e?c:P(c,e,3),"number"==typeof d)for(;d--&&!1!==c(b[d],d,b););else{var k=K(b),d=k.length;r(b,function(b,p,e){return p=k?k[--d]:--d,c(e[p],p,e)})}return b}function Ba(b,c,e){var d=-1,k=b?b.length:0;if(c=n.createCallback(c,e,3),"number"==typeof k)for(var g=Q(k);++d<k;)g[d]=c(b[d],d,b);else g=[],r(b,function(b,p,e){g[++d]=c(b,p,e)});return g}function wb(b,c,e){var d=-1/0,k=d;if("function"!=typeof c&&
e&&e[c]===b&&(c=null),null==c&&J(b)){e=-1;for(var g=b.length;++e<g;){var l=b[e];l>k&&(k=l)}}else c=null==c&&Aa(b)?f:n.createCallback(c,e,3),O(b,function(b,e,p){e=c(b,e,p);e>d&&(d=e,k=b)});return k}function ab(b,c,e,d){if(!b)return e;var k=3>arguments.length;c=n.createCallback(c,d,4);var g=-1,f=b.length;if("number"==typeof f)for(k&&(e=b[++g]);++g<f;)e=c(e,b[g],g,b);else r(b,function(b,p,d){e=k?(k=!1,b):c(e,b,p,d)});return e}function xb(b,c,e,d){var k=3>arguments.length;return c=n.createCallback(c,
d,4),Na(b,function(b,p,d){e=k?(k=!1,b):c(e,b,p,d)}),e}function yb(b){var c=-1,e=b?b.length:0,d=Q("number"==typeof e?e:0);return O(b,function(b){var e=Wa(0,++c);d[c]=d[e];d[e]=b}),d}function zb(b,c,e){var d;c=n.createCallback(c,e,3);e=-1;var k=b?b.length:0;if("number"==typeof k)for(;++e<k&&!(d=c(b[e],e,b)););else r(b,function(b,e,p){return!(d=c(b,e,p))});return!!d}function bb(b,c,e){var d=0,k=b?b.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=n.createCallback(c,e,3);++g<k&&c(b[g],g,b);)d++}else if(d=
c,null==d||e)return b?b[0]:w;return t(b,0,Ca(R(0,d),k))}function ob(c,e,d){if("number"==typeof d){var k=c?c.length:0;d=0>d?R(0,k+d):d||0}else if(d)return d=Ab(c,e),c[d]===e?d:-1;return b(c,e,d)}function cb(b,c,e){if("number"!=typeof c&&null!=c){var d=0,k=-1,g=b?b.length:0;for(c=n.createCallback(c,e,3);++k<g&&c(b[k],k,b);)d++}else d=null==c||e?1:R(0,c);return t(b,d)}function Ab(b,c,e,d){var k=0,g=b?b.length:k;e=e?n.createCallback(e,d,1):Ua;for(c=e(c);k<g;)d=k+g>>>1,e(b[d])<c?k=d+1:g=d;return k}function Bb(b,
c,e,d){return"boolean"!=typeof c&&null!=c&&(d=e,e="function"!=typeof c&&d&&d[c]===b?null:c,c=!1),null!=e&&(e=n.createCallback(e,d,3)),Xa(b,c,e)}function Cb(){for(var b=1<arguments.length?arguments:arguments[0],c=-1,e=b?wb(db(b,"length")):0,d=Q(0>e?0:e);++c<e;)d[c]=db(b,c);return d}function Db(b,c){var e=-1,d=b?b.length:0,k={};for(c||!d||J(b[0])||(c=[]);++e<d;){var g=b[e];c?k[g]=c[e]:g&&(k[g[0]]=g[1])}return k}function kb(b,c){return 2<arguments.length?V(b,17,t(arguments,2),null,c):V(b,1,null,null,
c)}function Eb(b,c,e){function d(){r&&Oa(r);f=r=v=w;(s||q!==c)&&(m=fa(),l=b.apply(t,g),r||f||(g=t=null))}function k(){var e=c-(fa()-h);0<e?r=Da(k,e):(f&&Oa(f),e=v,f=r=v=w,e&&(m=fa(),l=b.apply(t,g),r||f||(g=t=null)))}var g,f,l,h,t,r,v,m=0,q=!1,s=!0;if(!H(b))throw new X;if(c=R(0,c)||0,!0===e)var B=!0,s=!1;else M(e)&&(B=e.leading,q="maxWait"in e&&(R(c,e.maxWait)||0),s="trailing"in e?e.trailing:s);return function(){if(g=arguments,h=fa(),t=this,v=s&&(r||!B),!1===q)var e=B&&!r;else{f||B||(m=h);var u=q-
(h-m),Ha=0>=u;Ha?(f&&(f=Oa(f)),m=h,l=b.apply(t,g)):f||(f=Da(d,u))}return Ha&&r?r=Oa(r):r||c===q||(r=Da(k,c)),e&&(Ha=!0,l=b.apply(t,g)),!Ha||r||f||(g=t=null),l}}function Ua(b){return b}function eb(b,c,e){var d=!0,k=c&&za(c);c&&(e||k.length)||(null==e&&(e=c),g=ea,c=b,b=n,k=za(c));!1===e?d=!1:M(e)&&"chain"in e&&(d=e.chain);var g=b,f=H(g);O(k,function(e){var k=b[e]=c[e];f&&(g.prototype[e]=function(){var c=this.__chain__,e=this.__wrapped__,f=[e];if(pa.apply(f,arguments),f=k.apply(b,f),d||c){if(e===f&&
M(f))return this;f=new g(f);f.__chain__=c}return f})})}function Fb(){}function Gb(b){return function(c){return c[b]}}function Hb(){return this.__wrapped__}d=d?ba.defaults(ja.Object(),d,ba.pick(ja,Rb)):ja;var Q=d.Array,Sb=d.Boolean,fb=d.Date,Pa=d.Function,Ea=d.Math,Tb=d.Number,ka=d.Object,Fa=d.RegExp,$=d.String,X=d.TypeError,la=[],Ib=ka.prototype,Ub=d._,N=Ib.toString,Qb=Fa("^"+$(N).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Vb=Ea.ceil,Oa=d.clearTimeout,Ob=Ea.floor,
Nb=Pa.prototype.toString,ma=aa(ma=ka.getPrototypeOf)&&ma,L=Ib.hasOwnProperty,pa=la.push,Da=d.setTimeout,Jb=la.splice,Pb=la.unshift,Kb=function(){try{var b={},c=aa(c=ka.defineProperty)&&c,e=c(b,b,b)&&c}catch(d){}return e}(),Ia=aa(Ia=ka.create)&&Ia,gb=aa(gb=Q.isArray)&&gb,Wb=d.isFinite,Xb=d.isNaN,Qa=aa(Qa=ka.keys)&&Qa,R=Ea.max,Ca=Ea.min,hb=d.parseInt,nb=Ea.random,W={};W[ya]=Q;W[ra]=Sb;W[sa]=fb;W[Lb]=Pa;W[Z]=ka;W[ta]=Tb;W[ua]=Fa;W[ha]=$;ea.prototype=n.prototype;var va=n.support={};va.funcDecomp=!aa(d.a)&&
jb.test(C);va.funcNames="string"==typeof Pa.name;n.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ca,variable:"",imports:{_:n}};Ia||(qa=function(){function b(){}return function(c){if(M(c)){b.prototype=c;var e=new b;b.prototype=null}return e||d.Object()}}());var Sa=Kb?function(b,c){Mb.value=c;Kb(b,"__bindData__",Mb)}:Fb,J=gb||function(b){return b&&"object"==typeof b&&"number"==typeof b.length&&N.call(b)==ya||!1},K=Qa?function(b){return M(b)?Qa(b):[]}:na,Za={"&":"&amp;",
"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qb=sb(Za),Yb=Fa("("+K(qb).join("|")+")","g"),Zb=Fa("["+K(Za).join("")+"]","g"),Va=ma?function(b){if(!b||N.call(b)!=Z)return!1;var c=b.valueOf,e=aa(c)&&(e=ma(c))&&ma(e);return e?b==e||ma(b)==e:pb(b)}:pb,$b=Ya(function(b,c,e){L.call(b,e)?b[e]++:b[e]=1}),ac=Ya(function(b,c,e){(L.call(b,e)?b[e]:b[e]=[]).push(c)}),bc=Ya(function(b,c,e){b[e]=c}),db=Ba,fa=aa(fa=fb.now)&&fa||function(){return(new fb).getTime()},cc=8==hb(s+"08")?hb:function(b,c){return hb(Aa(b)?
b.replace(da,""):b,c||0)};return n.after=function(b,c){if(!H(c))throw new X;return function(){return 1>--b?c.apply(this,arguments):void 0}},n.assign=T,n.at=function(b){for(var c=arguments,e=-1,d=Y(c,!0,!1,1),c=c[2]&&c[2][c[1]]===b?1:d.length,k=Q(c);++e<c;)k[e]=b[d[e]];return k},n.bind=kb,n.bindAll=function(b){for(var c=1<arguments.length?Y(arguments,!0,!1,1):za(b),e=-1,d=c.length;++e<d;){var k=c[e];b[k]=V(b[k],1,null,null,b)}return b},n.bindKey=function(b,c){return 2<arguments.length?V(c,19,t(arguments,
2),null,b):V(c,3,null,null,b)},n.chain=function(b){return b=new ea(b),b.__chain__=!0,b},n.compact=function(b){for(var c=-1,e=b?b.length:0,d=[];++c<e;){var k=b[c];k&&d.push(k)}return d},n.compose=function(){for(var b=arguments,c=b.length;c--;)if(!H(b[c]))throw new X;return function(){for(var c=arguments,e=b.length;e--;)c=[b[e].apply(this,c)];return c[0]}},n.constant=function(b){return function(){return b}},n.countBy=$b,n.create=function(b,c){var e=qa(b);return c?T(e,c):e},n.createCallback=function(b,
c,e){var d=typeof b;if(null==b||"function"==d)return P(b,c,e);if("object"!=d)return Gb(b);var k=K(b),g=k[0],f=b[g];return 1!=k.length||f!==f||M(f)?function(c){for(var e=k.length,d=!1;e--&&(d=ia(c[k[e]],b[k[e]],null,!0)););return d}:function(b){return b=b[g],f===b&&(0!==f||1/f==1/b)}},n.curry=function(b,c){return c="number"==typeof c?c:+c||b.length,V(b,4,null,null,null,c)},n.debounce=Eb,n.defaults=x,n.defer=function(b){if(!H(b))throw new X;var c=t(arguments,1);return Da(function(){b.apply(w,c)},1)},
n.delay=function(b,c){if(!H(b))throw new X;var e=t(arguments,2);return Da(function(){b.apply(w,e)},c)},n.difference=function(b){return wa(b,Y(arguments,!0,!0,1))},n.filter=Ma,n.flatten=function(b,c,e,d){return"boolean"!=typeof c&&null!=c&&(d=e,e="function"!=typeof c&&d&&d[c]===b?null:c,c=!1),null!=e&&(b=Ba(b,e,d)),Y(b,c)},n.forEach=O,n.forEachRight=Na,n.forIn=u,n.forInRight=function(b,c,e){var d=[];u(b,function(b,c){d.push(c,b)});var k=d.length;for(c=P(c,e,3);k--&&!1!==c(d[k--],d[k],b););return b},
n.forOwn=r,n.forOwnRight=rb,n.functions=za,n.groupBy=ac,n.indexBy=bc,n.initial=function(b,c,e){var d=0,k=b?b.length:0;if("number"!=typeof c&&null!=c){var g=k;for(c=n.createCallback(c,e,3);g--&&c(b[g],g,b);)d++}else d=null==c||e?1:c||d;return t(b,0,Ca(R(0,k-d),k))},n.intersection=function(){for(var d=[],g=-1,f=arguments.length,l=q(),r=Ja(),h=r===b,t=q();++g<f;){var v=arguments[g];(J(v)||Ka(v))&&(d.push(v),l.push(h&&v.length>=B&&m(g?d[g]:t)))}var h=d[0],s=-1,u=h?h.length:0,w=[];a:for(;++s<u;){var n=
l[0],v=h[s];if(0>(n?c(n,v):r(t,v))){g=f;for((n||t).push(v);--g;)if(n=l[g],0>(n?c(n,v):r(d[g],v)))continue a;w.push(v)}}for(;f--;)(n=l[f])&&k(n);return e(l),e(t),w},n.invert=sb,n.invoke=function(b,c){var e=t(arguments,2),d=-1,k="function"==typeof c,g=b?b.length:0,f=Q("number"==typeof g?g:0);return O(b,function(b){f[++d]=(k?c:b[c]).apply(b,e)}),f},n.keys=K,n.map=Ba,n.mapValues=function(b,c,e){var d={};return c=n.createCallback(c,e,3),r(b,function(b,e,k){d[e]=c(b,e,k)}),d},n.max=wb,n.memoize=function(b,
c){function e(){var d=e.cache,k=c?c.apply(this,arguments):v+arguments[0];return L.call(d,k)?d[k]:d[k]=b.apply(this,arguments)}if(!H(b))throw new X;return e.cache={},e},n.merge=function(b){var c=arguments,d=2;if(!M(b))return b;if("number"!=typeof c[2]&&(d=c.length),3<d&&"function"==typeof c[d-2])var k=P(c[--d-1],c[d--],2);else 2<d&&"function"==typeof c[d-1]&&(k=c[--d]);for(var c=t(arguments,1,d),g=-1,f=q(),l=q();++g<d;)mb(b,c[g],k,f,l);return e(f),e(l),b},n.min=function(b,c,e){var d=1/0,k=d;if("function"!=
typeof c&&e&&e[c]===b&&(c=null),null==c&&J(b)){e=-1;for(var g=b.length;++e<g;){var l=b[e];l<k&&(k=l)}}else c=null==c&&Aa(b)?f:n.createCallback(c,e,3),O(b,function(b,e,g){e=c(b,e,g);e<d&&(d=e,k=b)});return k},n.omit=function(b,c,e){var d={};if("function"!=typeof c){var k=[];u(b,function(b,c){k.push(c)});for(var k=wa(k,Y(arguments,!0,!1,1)),g=-1,f=k.length;++g<f;){var l=k[g];d[l]=b[l]}}else c=n.createCallback(c,e,3),u(b,function(b,e,k){c(b,e,k)||(d[e]=b)});return d},n.once=function(b){var c,e;if(!H(b))throw new X;
return function(){return c?e:(c=!0,e=b.apply(this,arguments),b=null,e)}},n.pairs=function(b){for(var c=-1,e=K(b),d=e.length,k=Q(d);++c<d;){var g=e[c];k[c]=[g,b[g]]}return k},n.partial=function(b){return V(b,16,t(arguments,1))},n.partialRight=function(b){return V(b,32,null,t(arguments,1))},n.pick=function(b,c,e){var d={};if("function"!=typeof c)for(var k=-1,g=Y(arguments,!0,!1,1),f=M(b)?g.length:0;++k<f;){var l=g[k];l in b&&(d[l]=b[l])}else c=n.createCallback(c,e,3),u(b,function(b,e,k){c(b,e,k)&&(d[e]=
b)});return d},n.pluck=db,n.property=Gb,n.pull=function(b){for(var c=arguments,e=0,d=c.length,k=b?b.length:0;++e<d;)for(var g=-1,f=c[e];++g<k;)b[g]===f&&(Jb.call(b,g--,1),k--);return b},n.range=function(b,c,e){b=+b||0;e="number"==typeof e?e:+e||1;null==c&&(c=b,b=0);var d=-1;c=R(0,Vb((c-b)/(e||1)));for(var k=Q(c);++d<c;)k[d]=b,b+=e;return k},n.reject=function(b,c,e){return c=n.createCallback(c,e,3),Ma(b,function(b,e,d){return!c(b,e,d)})},n.remove=function(b,c,e){var d=-1,k=b?b.length:0,g=[];for(c=
n.createCallback(c,e,3);++d<k;)e=b[d],c(e,d,b)&&(g.push(e),Jb.call(b,d--,1),k--);return g},n.rest=cb,n.shuffle=yb,n.sortBy=function(b,c,d){var f=-1,l=J(c),r=b?b.length:0,t=Q("number"==typeof r?r:0);l||(c=n.createCallback(c,d,3));O(b,function(b,e,d){var k=t[++f]=g();l?k.m=Ba(c,function(c){return b[c]}):(k.m=q())[0]=c(b,e,d);k.n=f;k.o=b});r=t.length;for(t.sort(h);r--;)b=t[r],t[r]=b.o,l||e(b.m),k(b);return t},n.tap=function(b,c){return c(b),b},n.throttle=function(b,c,e){var d=!0,k=!0;if(!H(b))throw new X;
return!1===e?d=!1:M(e)&&(d="leading"in e?e.leading:d,k="trailing"in e?e.trailing:k),S.leading=d,S.maxWait=c,S.trailing=k,Eb(b,c,S)},n.times=function(b,c,e){b=-1<(b=+b)?b:0;var d=-1,k=Q(b);for(c=P(c,e,1);++d<b;)k[d]=c(d);return k},n.toArray=function(b){return b&&"number"==typeof b.length?t(b):La(b)},n.transform=function(b,c,e,d){var k=J(b);if(null==e)if(k)e=[];else{var g=b&&b.constructor;e=qa(g&&g.prototype)}return c&&(c=n.createCallback(c,d,4),(k?O:r)(b,function(b,d,k){return c(e,b,d,k)})),e},n.union=
function(){return Xa(Y(arguments,!0,!0))},n.uniq=Bb,n.values=La,n.where=Ma,n.without=function(b){return wa(b,t(arguments,1))},n.wrap=function(b,c){return V(c,16,[b])},n.xor=function(){for(var b=-1,c=arguments.length;++b<c;){var e=arguments[b];if(J(e)||Ka(e))var d=d?Xa(wa(d,e).concat(wa(e,d))):e}return d||[]},n.zip=Cb,n.zipObject=Db,n.collect=Ba,n.drop=cb,n.each=O,n.eachRight=Na,n.extend=T,n.methods=za,n.object=Db,n.select=Ma,n.tail=cb,n.unique=Bb,n.unzip=Cb,eb(n),n.clone=function(b,c,e,d){return"boolean"!=
typeof c&&null!=c&&(d=e,e=c,c=!1),Ta(b,c,"function"==typeof e&&P(e,d,1))},n.cloneDeep=function(b,c,e){return Ta(b,!0,"function"==typeof c&&P(c,e,1))},n.contains=ub,n.escape=function(b){return null==b?"":$(b).replace(Zb,Ra)},n.every=vb,n.find=$a,n.findIndex=function(b,c,e){var d=-1,k=b?b.length:0;for(c=n.createCallback(c,e,3);++d<k;)if(c(b[d],d,b))return d;return-1},n.findKey=function(b,c,e){var d;return c=n.createCallback(c,e,3),r(b,function(b,e,k){return c(b,e,k)?(d=e,!1):void 0}),d},n.findLast=
function(b,c,e){var d;return c=n.createCallback(c,e,3),Na(b,function(b,e,k){return c(b,e,k)?(d=b,!1):void 0}),d},n.findLastIndex=function(b,c,e){var d=b?b.length:0;for(c=n.createCallback(c,e,3);d--;)if(c(b[d],d,b))return d;return-1},n.findLastKey=function(b,c,e){var d;return c=n.createCallback(c,e,3),rb(b,function(b,e,k){return c(b,e,k)?(d=e,!1):void 0}),d},n.has=function(b,c){return b?L.call(b,c):!1},n.identity=Ua,n.indexOf=ob,n.isArguments=Ka,n.isArray=J,n.isBoolean=function(b){return!0===b||!1===
b||b&&"object"==typeof b&&N.call(b)==ra||!1},n.isDate=function(b){return b&&"object"==typeof b&&N.call(b)==sa||!1},n.isElement=function(b){return b&&1===b.nodeType||!1},n.isEmpty=function(b){var c=!0;if(!b)return c;var e=N.call(b),d=b.length;return e==ya||e==ha||e==xa||e==Z&&"number"==typeof d&&H(b.splice)?!d:(r(b,function(){return c=!1}),c)},n.isEqual=function(b,c,e,d){return ia(b,c,"function"==typeof e&&P(e,d,2))},n.isFinite=function(b){return Wb(b)&&!Xb(parseFloat(b))},n.isFunction=H,n.isNaN=function(b){return tb(b)&&
b!=+b},n.isNull=function(b){return null===b},n.isNumber=tb,n.isObject=M,n.isPlainObject=Va,n.isRegExp=function(b){return b&&"object"==typeof b&&N.call(b)==ua||!1},n.isString=Aa,n.isUndefined=function(b){return"undefined"==typeof b},n.lastIndexOf=function(b,c,e){var d=b?b.length:0;for("number"==typeof e&&(d=(0>e?R(0,d+e):Ca(e,d-1))+1);d--;)if(b[d]===c)return d;return-1},n.mixin=eb,n.noConflict=function(){return d._=Ub,this},n.noop=Fb,n.now=fa,n.parseInt=cc,n.random=function(b,c,e){var d=null==c;return null==
e&&("boolean"==typeof b&&d?(e=b,b=1):d||"boolean"!=typeof c||(e=c,d=!0)),null==b&&d&&(c=1),b=+b||0,d?(c=b,b=0):c=+c||0,e||b%1||c%1?(e=nb(),Ca(b+e*(c-b+parseFloat("1e-"+((e+"").length-1))),c)):Wa(b,c)},n.reduce=ab,n.reduceRight=xb,n.result=function(b,c){if(b){var e=b[c];return H(e)?b[c]():e}},n.runInContext=C,n.size=function(b){var c=b?b.length:0;return"number"==typeof c?c:K(b).length},n.some=zb,n.sortedIndex=Ab,n.template=function(b,c,e){var d=n.templateSettings;b=$(b||"");e=x({},e,d);var k,g=x({},
e.imports,d.imports),d=K(g),g=La(g),f=0,r=e.interpolate||ga,t="__p+='",r=Fa((e.escape||ga).source+"|"+r.source+"|"+(r===ca?G:ga).source+"|"+(e.evaluate||ga).source+"|$","g");b.replace(r,function(c,e,d,g,r,h){return d||(d=g),t+=b.slice(f,h).replace(dc,l),e&&(t+="'+__e("+e+")+'"),r&&(k=!0,t+="';"+r+";\n__p+='"),d&&(t+="'+((__t=("+d+"))==null?'':__t)+'"),f=h+c.length,c});t+="';";(r=e=e.variable)||(e="obj",t="with("+e+"){"+t+"}");t=(k?t.replace(D,""):t).replace(z,"$1").replace(A,"$1;");t="function("+
e+"){"+(r?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(k?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+t+"return __p}";try{var h=Pa(d,"return "+t).apply(w,g)}catch(v){throw v.source=t,v;}return c?h(c):(h.source=t,h)},n.unescape=function(b){return null==b?"":$(b).replace(Yb,ib)},n.uniqueId=function(b){var c=++y;return $(null==b?"":b)+c},n.all=vb,n.any=zb,n.detect=$a,n.findWhere=$a,n.foldl=ab,n.foldr=xb,n.include=ub,n.inject=ab,eb(function(){var b={};return r(n,
function(c,e){n.prototype[e]||(b[e]=c)}),b}(),!1),n.first=bb,n.last=function(b,c,e){var d=0,k=b?b.length:0;if("number"!=typeof c&&null!=c){var g=k;for(c=n.createCallback(c,e,3);g--&&c(b[g],g,b);)d++}else if(d=c,null==d||e)return b?b[k-1]:w;return t(b,R(0,k-d))},n.sample=function(b,c,e){return b&&"number"!=typeof b.length&&(b=La(b)),null==c||e?b?b[Wa(0,b.length-1)]:w:(b=yb(b),b.length=Ca(R(0,c),b.length),b)},n.take=bb,n.head=bb,r(n,function(b,c){var e="sample"!==c;n.prototype[c]||(n.prototype[c]=function(c,
d){var k=this.__chain__,g=b(this.__wrapped__,c,d);return k||null!=c&&(!d||e&&"function"==typeof c)?new ea(g,k):g})}),n.VERSION="2.4.1",n.prototype.chain=function(){return this.__chain__=!0,this},n.prototype.toString=function(){return $(this.__wrapped__)},n.prototype.value=Hb,n.prototype.valueOf=Hb,O(["join","pop","shift"],function(b){var c=la[b];n.prototype[b]=function(){var b=this.__chain__,e=c.apply(this.__wrapped__,arguments);return b?new ea(e,b):e}}),O(["push","reverse","sort","unshift"],function(b){var c=
la[b];n.prototype[b]=function(){return c.apply(this.__wrapped__,arguments),this}}),O(["concat","slice","splice"],function(b){var c=la[b];n.prototype[b]=function(){return new ea(c.apply(this.__wrapped__,arguments),this.__chain__)}}),n}var w,x=[],r=[],y=0,v=+new Date+"",B=75,u=40,s=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",D=/\b__p\+='';/g,z=/\b(__p\+=)''\+/g,A=/(__e\(.*?\)|\b__t\))\+'';/g,G=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
F=/\w*$/,E=/^\s*function[ \n\r\t]+\w/,ca=/<%=([\s\S]+?)%>/g,da=RegExp("^["+s+"]*0+(?=.$)"),ga=/($^)/,jb=/\bthis\b/,dc=/['\n\r\t\u2028\u2029\\]/g,Rb="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),xa="[object Arguments]",ya="[object Array]",ra="[object Boolean]",sa="[object Date]",Lb="[object Function]",ta="[object Number]",Z="[object Object]",ua="[object RegExp]",ha="[object String]",U={};U[Lb]=!1;U[xa]=U[ya]=
U[ra]=U[sa]=U[ta]=U[Z]=U[ua]=U[ha]=!0;var S={leading:!1,maxWait:0,trailing:!1},Mb={configurable:!1,enumerable:!1,value:null,writable:!1},I={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Ra={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},ja=I[typeof window]&&window||this,na=I[typeof exports]&&exports&&!exports.nodeType&&exports,oa=I[typeof module]&&module&&!module.nodeType&&module,ib=oa&&oa.exports===na&&na,T=I[typeof global]&&global;!T||T.global!==
T&&T.window!==T||(ja=T);var ba=C();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ja._=ba,define(function(){return ba})):na&&oa?ib?(oa.exports=ba)._=ba:na._=ba:ja._=ba}).call(this);var Handlebars=function(){var b=function(){function b(c){this.string=c}return b.prototype.toString=function(){return""+this.string},b}(),c=function(b){function c(b){return e[b]||"&amp;"}var d={},e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=/[&<>"'`]/g,f=/[&<>"'`]/;d.extend=function(b,c){for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(b[e]=c[e])};var h=Object.prototype.toString;d.toString=h;var m=function(b){return"function"==typeof b};m(/x/)&&(m=function(b){return"function"==
typeof b&&"[object Function]"===h.call(b)});d.isFunction=m;var x=Array.isArray||function(b){return b&&"object"==typeof b?"[object Array]"===h.call(b):!1};return d.isArray=x,d.escapeExpression=function(e){return e instanceof b?e.toString():e||0===e?(e=""+e,f.test(e)?e.replace(k,c):e):""},d.isEmpty=function(b){return b||0===b?x(b)&&0===b.length?!0:!1:!0},d}(b),d=function(){function b(d,e){var k;e&&e.firstLine&&(k=e.firstLine,d+=" - "+k+":"+e.firstColumn);for(var f=Error.prototype.constructor.call(this,
d),l=0;l<c.length;l++)this[c[l]]=f[c[l]];k&&(this.lineNumber=k,this.column=e.firstColumn)}var c="description fileName lineNumber message name number stack".split(" ");return b.prototype=Error(),b}(),f=function(b,c){function d(b,c){this.helpers=b||{};this.partials=c||{};e(this)}function e(b){b.registerHelper("helperMissing",function(b){if(2!==arguments.length)throw new m("Missing helper: '"+b+"'");});b.registerHelper("blockHelperMissing",function(c,e){var d=e.inverse||function(){},k=e.fn;return r(c)&&
(c=c.call(this)),!0===c?k(this):!1===c||null==c?d(this):x(c)?0<c.length?b.helpers.each(c,e):d(this):k(c)});b.registerHelper("each",function(b,c){var e,d=c.fn,k=c.inverse,g=0,f="";if(r(b)&&(b=b.call(this)),c.data&&(e=B(c.data)),b&&"object"==typeof b)if(x(b))for(var l=b.length;l>g;g++)e&&(e.index=g,e.first=0===g,e.last=g===b.length-1),f+=d(b[g],{data:e});else for(l in b)b.hasOwnProperty(l)&&(e&&(e.key=l,e.index=g,e.first=0===g),f+=d(b[l],{data:e}),g++);return 0===g&&(f=k(this)),f});b.registerHelper("if",
function(b,c){return r(b)&&(b=b.call(this)),!c.hash.includeZero&&!b||h.isEmpty(b)?c.inverse(this):c.fn(this)});b.registerHelper("unless",function(c,e){return b.helpers["if"].call(this,c,{fn:e.inverse,inverse:e.fn,hash:e.hash})});b.registerHelper("with",function(b,c){return r(b)&&(b=b.call(this)),h.isEmpty(b)?void 0:c.fn(b)});b.registerHelper("log",function(c,e){var d=e.data&&null!=e.data.level?parseInt(e.data.level,10):1;b.log(d,c)})}function k(b,c){v.log(b,c)}var f={},h=b,m=c;f.VERSION="1.3.0";f.COMPILER_REVISION=
4;f.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};var x=h.isArray,r=h.isFunction,y=h.toString;f.HandlebarsEnvironment=d;d.prototype={constructor:d,logger:v,log:k,registerHelper:function(b,c,e){if("[object Object]"===y.call(b)){if(e||c)throw new m("Arg not supported with multiple helpers");h.extend(this.helpers,b)}else e&&(c.not=e),this.helpers[b]=c},registerPartial:function(b,c){"[object Object]"===y.call(b)?h.extend(this.partials,b):this.partials[b]=c}};var v=
{methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,c){if(v.level<=b){var e=v.methodMap[b];"undefined"!=typeof console&&console[e]&&console[e].call(console,c)}}};f.logger=v;f.log=k;var B=function(b){var c={};return h.extend(c,b),c};return f.createFrame=B,f}(c,d),h=function(b,c,d){function e(b,c,e){var d=function(b,d){return d=d||{},c(b,d.data||e)};return d.program=b,d.depth=0,d}var k={},f=d.COMPILER_REVISION,h=d.REVISION_CHANGES;return k.checkRevision=
function(b){var e=b&&b[0]||1;if(e!==f){if(f>e)throw new c("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+h[f]+") or downgrade your runtime to an older version ("+h[e]+").");throw new c("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+b[1]+").");}},k.template=function(d,k){if(!k)throw new c("No environment passed to template");
var g={escapeExpression:b.escapeExpression,invokePartial:function(b,e,d,g,f,l){var h=k.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(k.compile)return h={helpers:g,partials:f,data:l},f[e]=k.compile(b,{data:void 0!==l},k),f[e](d,h);throw new c("The partial "+e+" could not be compiled when running in runtime-only mode");},programs:[],program:function(b,c,d){var k=this.programs[b];return d?k=e(b,c,d):k||(k=this.programs[b]=e(b,c)),k},merge:function(c,e){var d=c||e;return c&&e&&c!==e&&
(d={},b.extend(d,e),b.extend(d,c)),d},programWithDepth:k.VM.programWithDepth,noop:k.VM.noop,compilerInfo:null};return function(b,c){c=c||{};var e,f,l=c.partial?c:k;c.partial||(e=c.helpers,f=c.partials);e=d.call(g,l,b,e,f,c.data);return c.partial||k.VM.checkRevision(g.compilerInfo),e}},k.programWithDepth=function(b,c,e){var d=Array.prototype.slice.call(arguments,3),k=function(b,k){return k=k||{},c.apply(this,[b,k.data||e].concat(d))};return k.program=b,k.depth=d.length,k},k.program=e,k.invokePartial=
function(b,e,d,k,g,f){k={partial:!0,helpers:k,partials:g,data:f};if(void 0===b)throw new c("The partial "+e+" could not be found");return b instanceof Function?b(d,k):void 0},k.noop=function(){return""},k}(c,d,f),b=function(b,c,d,e,k){var f=function(){var f=new b.HandlebarsEnvironment;return e.extend(f,b),f.SafeString=c,f.Exception=d,f.Utils=e,f.VM=k,f.template=function(b){return k.template(b,f)},f},h=f();return h.create=f,h}(f,b,d,c,h),c=function(b){function c(b){b=b||{};this.firstLine=b.first_line;
this.firstColumn=b.first_column;this.lastColumn=b.last_column;this.lastLine=b.last_line}var d={ProgramNode:function(b,k,f,l){var h,m;3===arguments.length?(l=f,f=null):2===arguments.length&&(l=k,k=null);c.call(this,l);this.type="program";this.statements=b;this.strip={};f?(m=f[0],m?(h={first_line:m.firstLine,last_line:m.lastLine,last_column:m.lastColumn,first_column:m.firstColumn},this.inverse=new d.ProgramNode(f,k,h)):this.inverse=new d.ProgramNode(f,k),this.strip.right=k.left):k&&(this.strip.left=
k.right)},MustacheNode:function(b,k,f,l,h){(c.call(this,h),this.type="mustache",this.strip=l,null!=f&&f.charAt)?(f=f.charAt(3)||f.charAt(2),this.escaped="{"!==f&&"&"!==f):this.escaped=!!f;this.sexpr=b instanceof d.SexprNode?b:new d.SexprNode(b,k);this.sexpr.isRoot=!0;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(b,d,g){c.call(this,g);this.type="sexpr";this.hash=d;g=this.id=
b[0];b=this.params=b.slice(1);this.isHelper=(this.eligibleHelper=g.isSimple)&&(b.length||d)},PartialNode:function(b,d,g,f){c.call(this,f);this.type="partial";this.partialName=b;this.context=d;this.strip=g},BlockNode:function(e,d,g,f,h){if(c.call(this,h),e.sexpr.id.original!==f.path.original)throw new b(e.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block";this.mustache=e;this.program=d;this.inverse=g;this.strip={left:e.strip.left,right:f.strip.right};(d||g).strip.left=e.strip.right;
(g||d).strip.right=f.strip.left;g&&!d&&(this.isInverse=!0)},ContentNode:function(b,d){c.call(this,d);this.type="content";this.string=b},HashNode:function(b,d){c.call(this,d);this.type="hash";this.pairs=b},IdNode:function(e,d){c.call(this,d);this.type="ID";for(var g="",f=[],h=0,m=0,r=e.length;r>m;m++){var y=e[m].part;if(g+=(e[m].separator||"")+y,".."===y||"."===y||"this"===y){if(0<f.length)throw new b("Invalid path: "+g,this);".."===y?h++:this.isScoped=!0}else f.push(y)}this.original=g;this.parts=
f;this.string=f.join(".");this.depth=h;this.isSimple=1===e.length&&!this.isScoped&&0===h;this.stringModeValue=this.string},PartialNameNode:function(b,d){c.call(this,d);this.type="PARTIAL_NAME";this.name=b.original},DataNode:function(b,d){c.call(this,d);this.type="DATA";this.id=b},StringNode:function(b,d){c.call(this,d);this.type="STRING";this.original=this.string=this.stringModeValue=b},IntegerNode:function(b,d){c.call(this,d);this.type="INTEGER";this.original=this.integer=b;this.stringModeValue=
Number(b)},BooleanNode:function(b,d){c.call(this,d);this.type="BOOLEAN";this.bool=b;this.stringModeValue="true"===b},CommentNode:function(b,d){c.call(this,d);this.type="comment";this.comment=b}};return d}(d),h=function(b,c){var d={};return d.parser=b,d.parse=function(e){return e.constructor===c.ProgramNode?e:(b.yy=c,b.parse(e))},d}(function(){return function(){function b(c,e){return{left:"~"===c.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function c(){this.yy={}}var d={trace:function(){},
yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,
ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,
3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(c,e,d,g,f,h){c=h.length-1;switch(f){case 1:return new g.ProgramNode(h[c-1],this._$);case 2:return new g.ProgramNode([],this._$);case 3:this.$=new g.ProgramNode([],h[c-1],h[c],this._$);break;case 4:this.$=new g.ProgramNode(h[c-2],h[c-1],h[c],this._$);break;case 5:this.$=new g.ProgramNode(h[c-
1],h[c],[],this._$);break;case 6:this.$=new g.ProgramNode(h[c],this._$);break;case 7:this.$=new g.ProgramNode([],this._$);break;case 8:this.$=new g.ProgramNode([],this._$);break;case 9:this.$=[h[c]];break;case 10:h[c-1].push(h[c]);this.$=h[c-1];break;case 11:this.$=new g.BlockNode(h[c-2],h[c-1].inverse,h[c-1],h[c],this._$);break;case 12:this.$=new g.BlockNode(h[c-2],h[c-1],h[c-1].inverse,h[c],this._$);break;case 13:this.$=h[c];break;case 14:this.$=h[c];break;case 15:this.$=new g.ContentNode(h[c],
this._$);break;case 16:this.$=new g.CommentNode(h[c],this._$);break;case 17:this.$=new g.MustacheNode(h[c-1],null,h[c-2],b(h[c-2],h[c]),this._$);break;case 18:this.$=new g.MustacheNode(h[c-1],null,h[c-2],b(h[c-2],h[c]),this._$);break;case 19:this.$={path:h[c-1],strip:b(h[c-2],h[c])};break;case 20:this.$=new g.MustacheNode(h[c-1],null,h[c-2],b(h[c-2],h[c]),this._$);break;case 21:this.$=new g.MustacheNode(h[c-1],null,h[c-2],b(h[c-2],h[c]),this._$);break;case 22:this.$=new g.PartialNode(h[c-2],h[c-1],
b(h[c-3],h[c]),this._$);break;case 23:this.$=b(h[c-1],h[c]);break;case 24:this.$=new g.SexprNode([h[c-2]].concat(h[c-1]),h[c],this._$);break;case 25:this.$=new g.SexprNode([h[c]],null,this._$);break;case 26:this.$=h[c];break;case 27:this.$=new g.StringNode(h[c],this._$);break;case 28:this.$=new g.IntegerNode(h[c],this._$);break;case 29:this.$=new g.BooleanNode(h[c],this._$);break;case 30:this.$=h[c];break;case 31:h[c-1].isHelper=!0;this.$=h[c-1];break;case 32:this.$=new g.HashNode(h[c],this._$);break;
case 33:this.$=[h[c-2],h[c]];break;case 34:this.$=new g.PartialNameNode(h[c],this._$);break;case 35:this.$=new g.PartialNameNode(new g.StringNode(h[c],this._$),this._$);break;case 36:this.$=new g.PartialNameNode(new g.IntegerNode(h[c],this._$));break;case 37:this.$=new g.DataNode(h[c],this._$);break;case 38:this.$=new g.IdNode(h[c],this._$);break;case 39:h[c-2].push({part:h[c],separator:h[c-1]});this.$=h[c-2];break;case 40:this.$=[{part:h[c]}];break;case 43:this.$=[];break;case 44:h[c-1].push(h[c]);
break;case 47:this.$=[h[c]];break;case 48:h[c-1].push(h[c])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},
{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,
40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],
19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,
46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],
20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,
17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],
36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,
27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,
72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(b){throw Error(b);},parse:function(b){var c=[0],e=[null],d=[],g=this.table,f="",h=0,l=0,m=0;this.lexer.setInput(b);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;
this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});b=this.lexer.yylloc;d.push(b);var q=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var s,D,z,A,G,F,E,ca,da={};;){z=c[c.length-1];if(this.defaultActions[z])A=this.defaultActions[z];else{if(null===s||"undefined"==typeof s)A=void 0,s=(A=this.lexer.lex()||1,"number"!=typeof A&&(A=this.symbols_[A]||A),A);A=g[z]&&g[z][s]}if("undefined"==typeof A||
!A.length||!A[0]){var ga="";if(!m){ca=[];for(F in g[z])this.terminals_[F]&&2<F&&ca.push("'"+this.terminals_[F]+"'");ga=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+ca.join(", ")+", got '"+(this.terminals_[s]||s)+"'":"Parse error on line "+(h+1)+": Unexpected "+(1==s?"end of input":"'"+(this.terminals_[s]||s)+"'");this.parseError(ga,{text:this.lexer.match,token:this.terminals_[s]||s,line:this.lexer.yylineno,loc:b,expected:ca})}}if(A[0]instanceof
Array&&1<A.length)throw Error("Parse Error: multiple actions possible at state: "+z+", token: "+s);switch(A[0]){case 1:c.push(s);e.push(this.lexer.yytext);d.push(this.lexer.yylloc);c.push(A[1]);s=null;D?(s=D,D=null):(l=this.lexer.yyleng,f=this.lexer.yytext,h=this.lexer.yylineno,b=this.lexer.yylloc,0<m&&m--);break;case 2:if(E=this.productions_[A[1]][1],da.$=e[e.length-E],da._$={first_line:d[d.length-(E||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(E||1)].first_column,last_column:d[d.length-
1].last_column},q&&(da._$.range=[d[d.length-(E||1)].range[0],d[d.length-1].range[1]]),G=this.performAction.call(da,f,l,h,this.yy,A[1],e,d),"undefined"!=typeof G)return G;E&&(c=c.slice(0,-2*E),e=e.slice(0,-1*E),d=d.slice(0,-1*E));c.push(this.productions_[A[1]][0]);e.push(da.$);d.push(da._$);z=g[c[c.length-2]][c[c.length-1]];c.push(z);break;case 3:return!0}}return!0}},e=function(){var b={EOF:1,parseError:function(b,c){if(!this.yy.parser)throw Error(b);this.yy.parser.parseError(b,c)},setInput:function(b){return this._input=
b,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var b=this._input[0];this.yytext+=b;this.yyleng++;this.offset++;this.match+=b;this.matched+=b;return b.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&
this.yylloc.range[1]++,this._input=this._input.slice(1),b},unput:function(b){var c=b.length,e=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-c-1);this.offset-=c;b=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);e.length-1&&(this.yylineno-=e.length-1);var d=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+
1,first_column:this.yylloc.first_column,last_column:e?(e.length===b.length?this.yylloc.first_column:0)+b[b.length-e.length].length-e[0].length:this.yylloc.first_column-c},this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-c]),this},more:function(){return this._more=!0,this},less:function(b){this.unput(this.match.slice(b))},pastInput:function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(20<b.length?"...":"")+b.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var b=
this.match;return 20>b.length&&(b+=this._input.substr(0,20-b.length)),(b.substr(0,20)+(20<b.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var b=this.pastInput(),c=Array(b.length+1).join("-");return b+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,c,e,d,g;this._more||(this.yytext="",this.match="");for(var k=this._currentRules(),f=0;f<k.length&&(e=this._input.match(this.rules[k[f]]),!e||c&&!(e[0].length>c[0].length)||(c=
e,d=f,this.options.flex));f++);return c?(g=c[0].match(/(?:\r\n?|\n).*/g),g&&(this.yylineno+=g.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:g?g[g.length-1].length-g[g.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+c[0].length},this.yytext+=c[0],this.match+=c[0],this.matches=c,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=
this._input.slice(c[0].length),this.matched+=c[0],b=this.performAction.call(this,this.yy,this,k[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),b?b:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return"undefined"!=typeof b?b:this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){return this.conditionStack.pop()},
_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(b){this.begin(b)}};return b.options={},b.performAction=function(b,c,e,d){function g(b,e){return c.yytext=c.yytext.substr(b,c.yyleng-e)}switch(e){case 0:if("\\\\"===c.yytext.slice(-2)?(g(0,1),this.begin("mu")):"\\"===c.yytext.slice(-1)?(g(0,1),this.begin("emu")):this.begin("mu"),c.yytext)return 14;
break;case 1:return 14;case 2:return this.popState(),14;case 3:return g(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState();this.begin("com");break;case 14:return g(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return c.yytext=
g(1,2).replace(/\\"/g,'"'),32;case 24:return c.yytext=g(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return c.yytext=g(1,2),40;case 31:return"INVALID";case 32:return 5}},b.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,
/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],b.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,
29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},b}();return d.lexer=e,c.prototype=d,d.Parser=c,new c}()}(),c),m=function(b){function c(){}var d={};return d.Compiler=c,c.prototype={compiler:c,disassemble:function(){for(var b,c,d,g=this.opcodes,f=[],h=0,l=g.length;l>h;h++)if(b=g[h],"DECLARE"===b.opcode)f.push("DECLARE "+b.name+"="+b.value);else{c=[];for(var m=0;m<b.args.length;m++)d=b.args[m],"string"==typeof d&&(d='"'+d.replace("\n",
"\\n")+'"'),c.push(d);f.push(b.opcode+" "+c.join(" "))}return f.join("\n")},equals:function(b){var c=this.opcodes.length;if(b.opcodes.length!==c)return!1;for(var d=0;c>d;d++){var g=this.opcodes[d],f=b.opcodes[d];if(g.opcode!==f.opcode||g.args.length!==f.args.length)return!1;for(var h=0;h<g.args.length;h++)if(g.args[h]!==f.args[h])return!1}if(c=this.children.length,b.children.length!==c)return!1;for(d=0;c>d;d++)if(!this.children[d].equals(b.children[d]))return!1;return!0},guid:0,compile:function(b,
c){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=c;var d=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},d)for(var g in d)this.options.knownHelpers[g]=d[g];return this.accept(b)},accept:function(b){var c,d=b.strip||{};return d.left&&this.opcode("strip"),c=this[b.type](b),d.right&&this.opcode("strip"),c},program:function(b){b=b.statements;for(var c=0,d=b.length;d>c;c++)this.accept(b[c]);
return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(b,c){return b-c}),this},compileProgram:function(b){var c=(new this.compiler).compile(b,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial;this.children[d]=c;for(var g=0,f=c.depths.list.length;f>g;g++)b=c.depths.list[g],2>b||this.addDepth(b-1);return d},block:function(b){var c=b.mustache,d=b.program;b=b.inverse;d&&(d=this.compileProgram(d));b&&(b=this.compileProgram(b));var c=c.sexpr,g=this.classifySexpr(c);
"helper"===g?this.helperSexpr(c,d,b):"simple"===g?(this.simpleSexpr(c),this.opcode("pushProgram",d),this.opcode("pushProgram",b),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(c,d,b),this.opcode("pushProgram",d),this.opcode("pushProgram",b),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(b){var c,d=b.pairs;this.opcode("pushHash");for(var g=0,f=d.length;f>g;g++)b=d[g],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),
this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(b){var c=b.partialName;this.usePartial=!0;b.context?this.ID(b.context):this.opcode("push","depth0");this.opcode("invokePartial",c.name);this.opcode("append")},content:function(b){this.opcode("appendContent",b.string)},mustache:function(b){this.sexpr(b.sexpr);b.escaped&&!this.options.noEscape?
this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(b,c,d){b=b.id;var g=b.parts[0],f=null!=c||null!=d;this.opcode("getContext",b.depth);this.opcode("pushProgram",c);this.opcode("pushProgram",d);this.opcode("invokeAmbiguous",g,f)},simpleSexpr:function(b){b=b.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext"));this.opcode("resolvePossibleLambda")},helperSexpr:function(c,d,g){d=this.setupFullMustacheParams(c,
d,g);g=c.id.parts[0];if(this.options.knownHelpers[g])this.opcode("invokeKnownHelper",d.length,g);else{if(this.options.knownHelpersOnly)throw new b("You specified knownHelpersOnly, but used the unknown helper "+g,c);this.opcode("invokeHelper",d.length,g,c.isRoot)}},sexpr:function(b){var c=this.classifySexpr(b);"simple"===c?this.simpleSexpr(b):"helper"===c?this.helperSexpr(b):this.ambiguousSexpr(b)},ID:function(b){this.addDepth(b.depth);this.opcode("getContext",b.depth);b.parts[0]?this.opcode("lookupOnContext",
b.parts[0]):this.opcode("pushContext");for(var c=1,d=b.parts.length;d>c;c++)this.opcode("lookup",b.parts[c])},DATA:function(c){if(this.options.data=!0,c.id.isScoped||c.id.depth)throw new b("Scoped data references are not supported: "+c.original,c);this.opcode("lookupData");c=c.id.parts;for(var d=0,g=c.length;g>d;d++)this.opcode("lookup",c[d])},STRING:function(b){this.opcode("pushString",b.string)},INTEGER:function(b){this.opcode("pushLiteral",b.integer)},BOOLEAN:function(b){this.opcode("pushLiteral",
b.bool)},comment:function(){},opcode:function(b){this.opcodes.push({opcode:b,args:[].slice.call(arguments,1)})},declare:function(b,c){this.opcodes.push({opcode:"DECLARE",name:b,value:c})},addDepth:function(b){0!==b&&(this.depths[b]||(this.depths[b]=!0,this.depths.list.push(b)))},classifySexpr:function(b){var c=b.isHelper,d=b.eligibleHelper,g=this.options;d&&!c&&(g.knownHelpers[b.id.parts[0]]?c=!0:g.knownHelpersOnly&&(d=!1));return c?"helper":d?"ambiguous":"simple"},pushParams:function(b){for(var c,
d=b.length;d--;)c=b[d],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this[c.type](c)},setupFullMustacheParams:function(b,c,d){var g=b.params;return this.pushParams(g),this.opcode("pushProgram",c),this.opcode("pushProgram",d),b.hash?this.hash(b.hash):this.opcode("emptyHash"),g}},d.precompile=function(c,d,g){if(null==c||"string"!=typeof c&&c.constructor!==g.AST.ProgramNode)throw new b("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+
c);d=d||{};"data"in d||(d.data=!0);c=g.parse(c);c=(new g.Compiler).compile(c,d);return(new g.JavaScriptCompiler).compile(c,d)},d.compile=function(c,d,g){if(null==c||"string"!=typeof c&&c.constructor!==g.AST.ProgramNode)throw new b("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+c);d=d||{};"data"in d||(d.data=!0);var f;return function(b,h){if(!f){var l=g.parse(c),l=(new g.Compiler).compile(l,d),l=(new g.JavaScriptCompiler).compile(l,d,void 0,!0);f=g.template(l)}return f.call(this,
b,h)}},d}(d),d=function(b,c){function d(b){this.value=b}function e(){}var f=b.COMPILER_REVISION,h=b.REVISION_CHANGES,m=b.log;e.prototype={nameLookup:function(b,c){var d,g;return 0===b.indexOf("depth")&&(d=!0),g=/^[0-9]+$/.test(c)?b+"["+c+"]":e.isValidJavaScriptVariableName(c)?b+"."+c:b+"['"+c+"']",d?"("+b+" && "+g+")":g},compilerInfo:function(){return"this.compilerInfo = ["+f+",'"+h[f]+"'];\n"},appendToBuffer:function(b){return this.environment.isSimple?"return "+b+";":{appendToBuffer:!0,content:b,
toString:function(){return"buffer += "+b+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(b,d,e,g){this.environment=b;this.options=d||{};m("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!e;this.context=e||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(b,
d);d=b.opcodes;this.i=0;for(e=d.length;this.i<e;this.i++)b=d[this.i],"DECLARE"===b.opcode?this[b.name]=b.value:this[b.opcode].apply(this,b.args),b.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c("Compile completed with content left on stack");return this.createFunctionContext(g)},preamble:function(){var b=[];if(this.isChild)b.push("");else{var c=this.namespace,d="helpers = this.merge(helpers, "+c+".helpers);";
this.environment.usePartial&&(d=d+" partials = this.merge(partials, "+c+".partials);");this.options.data&&(d+=" data = data || {};");b.push(d)}this.environment.isSimple?b.push(""):b.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=b},createFunctionContext:function(b){var c=this.stackVars.concat(this.registers.list);if(0<c.length&&(this.source[1]=this.source[1]+", "+c.join(", ")),!this.isChild)for(var d in this.context.aliases)this.context.aliases.hasOwnProperty(d)&&(this.source[1]=
this.source[1]+", "+d+"="+this.context.aliases[d]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.pushSource("return buffer;");c=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];d=0;for(var e=this.environment.depths.list.length;e>d;d++)c.push("depth"+this.environment.depths.list[d]);d=this.mergeSource();if(this.isChild||(d=this.compilerInfo()+
d),b)return c.push(d),Function.apply(this,c);b="function "+(this.name||"")+"("+c.join(",")+") {\n  "+d+"}";return m("debug",b+"\n\n"),b},mergeSource:function(){for(var b,c="",d=0,e=this.source.length;e>d;d++){var g=this.source[d];g.appendToBuffer?b=b?b+"\n    + "+g.content:g.content:(b&&(c+="buffer += "+b+";\n  ",b=void 0),c+=g+"\n  ")}return c},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var b=["depth0"];this.setupParams(0,b);this.replaceStack(function(c){return b.splice(1,
0,c),"blockHelperMissing.call("+b.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var b=["depth0"];this.setupParams(0,b);var c=this.topStack();b.splice(1,0,c);this.pushSource("if (!"+this.lastHelper+") { "+c+" = blockHelperMissing.call("+b.join(", ")+"); }")},appendContent:function(b){this.pendingContent&&(b=this.pendingContent+b);this.stripNext&&(b=b.replace(/^\s+/,""));this.pendingContent=b},strip:function(){this.pendingContent&&
(this.pendingContent=this.pendingContent.replace(/\s+$/,""));this.stripNext="strip"},append:function(){this.flushInline();var b=this.popStack();this.pushSource("if("+b+" || "+b+" === 0) { "+this.appendToBuffer(b)+" }");this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(b){this.lastContext!==
b&&(this.lastContext=b)},lookupOnContext:function(b){this.push(this.nameLookup("depth"+this.lastContext,b,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(b){return"typeof "+b+" === functionType ? "+b+".apply(depth0) : "+b})},lookup:function(b){this.replaceStack(function(c){return c+" == null || "+c+" === false ? "+c+" : "+this.nameLookup(c,b,"context")})},
lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(b,c){this.pushStackLiteral("depth"+this.lastContext);this.pushString(c);"sexpr"!==c&&("string"==typeof b?this.pushString(b):this.pushStackLiteral(b))},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[]}},popHash:function(){var b=this.hash;this.hash=this.hashes.pop();
this.options.stringParams&&(this.push("{"+b.contexts.join(",")+"}"),this.push("{"+b.types.join(",")+"}"));this.push("{\n    "+b.values.join(",\n    ")+"\n  }")},pushString:function(b){this.pushStackLiteral(this.quotedString(b))},push:function(b){return this.inlineStack.push(b),b},pushLiteral:function(b){this.pushStackLiteral(b)},pushProgram:function(b){null!=b?this.pushStackLiteral(this.programExpression(b)):this.pushStackLiteral(null)},invokeHelper:function(b,c,d){this.context.aliases.helperMissing=
"helpers.helperMissing";this.useRegister("helper");b=this.lastHelper=this.setupHelper(b,c,!0);c=this.nameLookup("depth"+this.lastContext,c,"context");c="helper = "+b.name+" || "+c;b.paramsInit&&(c+=","+b.paramsInit);this.push("("+c+",helper ? helper.call("+b.callParams+") : helperMissing.call("+b.helperMissingParams+"))");d||this.flushInline()},invokeKnownHelper:function(b,c){var d=this.setupHelper(b,c);this.push(d.name+".call("+d.callParams+")")},invokeAmbiguous:function(b,c){this.context.aliases.functionType=
'"function"';this.useRegister("helper");this.emptyHash();var d=this.setupHelper(0,b,c),e=this.lastHelper=this.nameLookup("helpers",b,"helper"),g=this.nameLookup("depth"+this.lastContext,b,"context"),f=this.nextStack();d.paramsInit&&this.pushSource(d.paramsInit);this.pushSource("if (helper = "+e+") { "+f+" = helper.call("+d.callParams+"); }");this.pushSource("else { helper = "+g+"; "+f+" = typeof helper === functionType ? helper.call("+d.callParams+") : helper; }")},invokePartial:function(b){b=[this.nameLookup("partials",
b,"partial"),"'"+b+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(b){var c,d,e=this.popStack();this.options.stringParams&&(d=this.popStack(),c=this.popStack());var g=this.hash;c&&g.contexts.push("'"+b+"': "+c);d&&g.types.push("'"+b+"': "+d);g.values.push("'"+b+"': ("+e+")")},compiler:e,compileChildren:function(b,c){for(var d,e,g=b.children,f=0,h=g.length;h>f;f++){d=
g[f];e=new this.compiler;var k=this.matchExistingProgram(d);null==k?(this.context.programs.push(""),k=this.context.programs.length,d.index=k,d.name="program"+k,this.context.programs[k]=e.compile(d,c,this.context),this.context.environments[k]=d):(d.index=k,d.name="program"+k)}},matchExistingProgram:function(b){for(var c=0,d=this.context.environments.length;d>c;c++){var e=this.context.environments[c];if(e&&e.equals(b))return c}},programExpression:function(b){if(this.context.aliases.self="this",null==
b)return"self.noop";var c;c=this.environment.children[b];b=c.depths.list;for(var d=[c.index,c.name,"data"],e=0,g=b.length;g>e;e++)c=b[e],1===c?d.push("depth0"):d.push("depth"+(c-1));return(0===b.length?"self.program(":"self.programWithDepth(")+d.join(", ")+")"},register:function(b,c){this.useRegister(b);this.pushSource(b+" = "+c+";")},useRegister:function(b){this.registers[b]||(this.registers[b]=!0,this.registers.list.push(b))},pushStackLiteral:function(b){return this.push(new d(b))},pushSource:function(b){this.pendingContent&&
(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0);b&&this.source.push(b)},pushStack:function(b){this.flushInline();var c=this.incrStack();return b&&this.pushSource(c+" = "+b+";"),this.compileStack.push(c),c},replaceStack:function(b){var c,e,f,h="",k=this.isInline();k?(c=this.popStack(!0),c instanceof d?(c=c.value,f=!0):(h=(e=!this.stackSlot)?this.incrStack():this.topStackName(),h="("+this.push(h)+" = "+c+"),",c=this.topStack())):c=this.topStack();
b=b.call(this,c);return k?(f||this.popStack(),e&&this.stackSlot--,this.push("("+h+b+")")):(/^stack/.test(c)||(c=this.nextStack()),this.pushSource(c+" = ("+h+b+");")),c},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var b=this.inlineStack;if(b.length){this.inlineStack=[];for(var c=
0,e=b.length;e>c;c++){var f=b[c];f instanceof d?this.compileStack.push(f):this.pushStack(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(b){var e=this.isInline(),f=(e?this.inlineStack:this.compileStack).pop();if(!b&&f instanceof d)return f.value;if(!e){if(!this.stackSlot)throw new c("Invalid stack pop");this.stackSlot--}return f},topStack:function(b){var c=this.isInline()?this.inlineStack:this.compileStack,c=c[c.length-1];return!b&&c instanceof d?c.value:c},quotedString:function(b){return'"'+
b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(b,c,d){var e=[];b=this.setupParams(b,e,d);var g=this.nameLookup("helpers",c,"helper");return{params:e,paramsInit:b,name:g,callParams:["depth0"].concat(e).join(", "),helperMissingParams:d&&["depth0",this.quotedString(c)].concat(e).join(", ")}},setupOptions:function(b,c){var d,e,g=[],f=[],h=[];g.push("hash:"+this.popStack());this.options.stringParams&&
(g.push("hashTypes:"+this.popStack()),g.push("hashContexts:"+this.popStack()));d=this.popStack();((e=this.popStack())||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),g.push("inverse:"+d),g.push("fn:"+e));for(e=0;b>e;e++)d=this.popStack(),c.push(d),this.options.stringParams&&(h.push(this.popStack()),f.push(this.popStack()));return this.options.stringParams&&(g.push("contexts:["+f.join(",")+"]"),g.push("types:["+h.join(",")+"]")),this.options.data&&
g.push("data:data"),g},setupParams:function(b,c,d){b="{"+this.setupOptions(b,c).join(",")+"}";return d?(this.useRegister("options"),c.push("options"),"options="+b):(c.push(b),"")}};for(var w="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),
x=e.RESERVED_WORDS={},r=0,y=w.length;y>r;r++)x[w[r]]=!0;return e.isValidJavaScriptVariableName=function(b){return!e.RESERVED_WORDS[b]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(b)?!0:!1},e}(f,d);return function(b,c,d,e,f){var h,m=d.parser,w=d.parse,x=e.Compiler,r=e.compile,y=e.precompile,v=b.create;b=function(){var b=v();return b.compile=function(c,d){return r(c,d,b)},b.precompile=function(c,d){return y(c,d,b)},b.AST=c,b.Compiler=x,b.JavaScriptCompiler=f,b.Parser=m,b.parse=w,b};return h=b(),h.create=b,h}(b,
c,h,m,d)}();(function(b,c,d){function f(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent("on"+c,d)}function h(b){if("keypress"==b.type){var c=String.fromCharCode(b.which);b.shiftKey||(c=c.toLowerCase());return c}return x[b.which]?x[b.which]:r[b.which]?r[b.which]:String.fromCharCode(b.which).toLowerCase()}function m(b){b=b||{};var c=!1,d;for(d in D)b[d]?c=!0:D[d]=0;c||(F=!1)}function l(b,c,d,e,g,f){var h,l,m=[],r=d.type;if(!u[b])return[];"keyup"==r&&k(b)&&(c=[b]);for(h=0;h<u[b].length;++h)if(l=
u[b][h],!(!e&&l.seq&&D[l.seq]!=l.level||r!=l.action||("keypress"!=r||d.metaKey||d.ctrlKey)&&c.sort().join(",")!==l.modifiers.sort().join(","))){var q=e&&l.seq==e&&l.level==f;(!e&&l.combo==g||q)&&u[b].splice(h,1);m.push(l)}return m}function q(b){var c=[];b.shiftKey&&c.push("shift");b.altKey&&c.push("alt");b.ctrlKey&&c.push("ctrl");b.metaKey&&c.push("meta");return c}function g(b,c,d){E.stopCallback(c,c.target||c.srcElement,d)||!1!==b(c,d)||(c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation(),
c.returnValue=!1,c.cancelBubble=!0)}function e(b){"number"!==typeof b.which&&(b.which=b.keyCode);var c=h(b);c&&("keyup"==b.type&&A===c?A=!1:E.handleKey(c,q(b),b))}function k(b){return"shift"==b||"ctrl"==b||"alt"==b||"meta"==b}function t(b,c,d,e){function f(c){return function(){F=c;++D[b];clearTimeout(z);z=setTimeout(m,1E3)}}function k(c){g(d,c,b);"keyup"!==e&&(A=h(c));setTimeout(m,10)}for(var l=D[b]=0;l<c.length;++l){var r=l+1===c.length?k:f(e||C(c[l+1]).action);w(c[l],r,e,b,l)}}function C(b,c){var d,
e,g,f=[];d="+"===b?["+"]:b.split("+");for(g=0;g<d.length;++g)e=d[g],v[e]&&(e=v[e]),c&&"keypress"!=c&&y[e]&&(e=y[e],f.push("shift")),k(e)&&f.push(e);d=e;g=c;if(!g){if(!B){B={};for(var h in x)95<h&&112>h||x.hasOwnProperty(h)&&(B[x[h]]=h)}g=B[d]?"keydown":"keypress"}"keypress"==g&&f.length&&(g="keydown");return{key:e,modifiers:f,action:g}}function w(b,c,d,e,g){s[b+":"+d]=c;b=b.replace(/\s+/g," ");var f=b.split(" ");1<f.length?t(b,f,c,d):(d=C(b,d),u[d.key]=u[d.key]||[],l(d.key,d.modifiers,{type:d.action},
e,b,g),u[d.key][e?"unshift":"push"]({callback:c,modifiers:d.modifiers,action:d.action,seq:e,level:g,combo:b}))}var x={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1",
"@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},v={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},B,u={},s={},D={},z,A=!1,G=!1,F=!1;for(d=1;20>d;++d)x[111+d]="f"+d;for(d=0;9>=d;++d)x[d+96]=d;f(c,"keypress",e);f(c,"keydown",e);f(c,"keyup",e);var E={bind:function(b,c,d){b=b instanceof Array?b:[b];for(var e=0;e<b.length;++e)w(b[e],c,d);return this},
unbind:function(b,c){return E.bind(b,function(){},c)},trigger:function(b,c){if(s[b+":"+c])s[b+":"+c]({},b);return this},reset:function(){u={};s={};return this},stopCallback:function(b,c){return-1<(" "+c.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==c.tagName||"SELECT"==c.tagName||"TEXTAREA"==c.tagName||c.isContentEditable},handleKey:function(b,c,d){var e=l(b,c,d),f;c={};var h=0,r=!1;for(f=0;f<e.length;++f)e[f].seq&&(h=Math.max(h,e[f].level));for(f=0;f<e.length;++f)e[f].seq?e[f].level==h&&(r=!0,
c[e[f].seq]=1,g(e[f].callback,d,e[f].combo)):r||g(e[f].callback,d,e[f].combo);e="keypress"==d.type&&G;d.type!=F||k(b)||e||m(c);G=r&&"keydown"==d.type}};b.Mousetrap=E;"function"===typeof define&&define.amd&&define(E)})(window,document);window.appstorm=window.a=_.noConflict();a.__defaultAjaxOptions={};a.url="";a.scope=function(b,c){return function(){return b.apply(c,arguments)}};a.getStackTrace=function(){return Error().stack};a.isNone=function(b){return a.isNull(b)||a.isUndefined(b)};
a.deepClone=function(b){if(a.isObject(b)&&!a.isFunction(b)){if(a.isArray(b))for(var c=b.length,d=Array(c),f=0;f<c;++f)d[f]=a.deepClone(b[f]);else for(c in d={},a.isFunction(b.constructor)&&(d=new b.constructor),a.isObject(b.prototype)&&(d.prototype=b.prototype),b)d[c]=a.deepClone(b[c]);return d}return b};a.setDefaultAjaxOptions=function(b){a.isObject(b)&&(a.mem.set("app.ajax.default",b),this.__defaultAjaxOptions=b)};a.getDefaultAjaxOptions=function(){return this.__defaultAjaxOptions};
(function(){var b=document.getElementById("a-core");b&&"undefined"!==typeof b.src&&(a.url=b.src.replace(/\/[^/]*$/,"/"))})();a.mem=function(){function b(b){if(!a.isString(b))return null;for(b=b.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ");0<=b.indexOf("..");)b=b.replace(/(\.\.)/g,".");"."==b.charAt(0)&&(b=b.substring(1));"."==b.charAt(b.length-1)&&(b=b.substr(0,b.length-1));return b}var c={},d=function(b){this.prefix=b};d.prototype={get:function(d){a:{d=this.prefix+"."+d;if(d=b(d))if(d=c[d],!a.isUndefined(d))break a;d=null}return d},set:function(d,f){var l=this.prefix+"."+d;(l=b(l))&&(c[l]=f)},remove:function(d){d=
this.prefix+"."+d;d=b(d);delete c[d]},clear:function(){if(this.prefix){var b=this.prefix,d;for(d in c)0===d.indexOf(b)&&delete c[d]}}};var f=new d("");f.getInstance=function(b){return new d(b)};return f}();a.isString(a.url)&&0<a.url.length&&a.mem.set("app.url",a.url);a.environment=a.mem.getInstance("app.environment");a.environment.set("verbose",2);a.environment.set("console","log");a.console=function(){function b(b,f,h,m){a.isArray(c[b])||(b="log");c[b].push(f);if(!a.isNone(window.console)&&a.isFunction(window.console.log)&&!1!==m)switch(a.environment.get("console")){case "error":if("error"!==b)break;case "warning":case "warn":if("warn"!==b&&"error"!==b)break;case "info":if("log"===b)break;default:m=!0;var l=!1;if(a.isString(f)&&0<=f.indexOf(":"))for(var q=f.substr(0,f.indexOf(":")).split("."),g=q.length;g--;){var e="verbose-"+q.join("."),e=a.environment.get(e);if(!a.isNone(e)){l=
!0;m=e<h?!1:!0;break}q.pop()}l||(a.isNone(a.environment.get("verbose"))||a.isNone(h))||parseInt(a.environment.get("verbose"),10)<h&&(m=!1);if(m)window.console[b](f)}for(;2E3<c[b].length;)c[b].shift()}var c={log:[],warn:[],info:[],error:[]};return{log:function(c,f,h){b("log",c,f,h)},warn:function(c,f,h){b("warn",c,f,h)},info:function(c,f,h){b("info",c,f,h)},error:function(c,f,h){b("error",c,f,h)},trace:function(b){return a.isString(b)&&b in c?c[b]:c},clear:function(){c={log:[],warn:[],info:[],error:[]}}}}();a.eventEmitter=function(b){this.eventList={};this.eventBaseName=b};
a.eventEmitter.prototype={clearEventType:function(){for(var b in this.eventList)(!this.eventList[b]||1>this.eventList[b].length)&&delete this.eventList[b]},bind:function(b,c,d,f){b&&a.isString(b)?a.isFunction(c)?(!0!==f&&(f=!1),a.isUndefined(this.eventList[b])&&(this.eventList[b]=[]),this.eventList[b].push({fct:c,scope:d||null,once:f}),this.dispatch(this.eventBaseName+".add",{type:b,fct:c})):a.console.warn(this.eventBaseName+".bind: unable to bind function, this is not a function",1):a.console.warn(this.eventBaseName+
(".bind: the type cannot be bind (type: "+b+")"),1)},bindOnce:function(b,c,d){this.bind(b,c,d,!0)},unbind:function(b,c){if(b&&a.isString(b)){var d=this.eventList[b];if(!a.isNone(d)){var f=d.length;if(a.isFunction(c))for(;f--;)d[f].fct===c&&d.splice(f,1);this.dispatch(this.eventBaseName+".unbind",{type:b,fct:c});this.clearEventType(b)}}else a.console.warn(this.eventBaseName+(".unbind: the type cannot be bind (type: "+b+")"),1)},unbindAll:function(b){a.isNone(this.eventList[b])||(this.eventList[b]=
[],this.clearEventType(b))},clear:function(){var b=this.eventBaseName+".clear",c;for(c in this.eventList)c!==b&&delete this.eventList[c];this.dispatch(b,{})},dispatch:function(b,c){var d=this.eventList[b];if(!a.isNone(d))for(var f=0,h=d.length;f<h;++f)(function(b,d){setTimeout(function(){b.call(d,c)},0)})(d[f].fct,d[f].scope)}};a.message=new a.eventEmitter("a.message");a.hash=new function(){function b(){var b=window.location.hash;return b?b.substring(1):null}function c(c){var q=b();if(d!=q){if(!0!==c){m.set("current",q);for(f.push({hash:q,time:(new Date).getTime()});500<f.length;)f.shift();c={value:q,old:d};h.dispatch("a.hash",c);a.message.dispatch("a.hash",c)}d=q;m.set("previous",d)}}var d=null,f=[],h=this,m=a.mem.getInstance("app.hash");m.set("history",f);c(!0);!a.isNone(window.onhashchange)&&(void 0===document.documentMode||7<document.documentMode)?window.onhashchange=
c:a.timer.add(c,null,50);this.getHash=function(){return b()};this.getPreviousHash=function(){return d};this.setPreviousHash=function(b){d=b;m.set("previous",d)};this.trace=function(){return f}};a.hash=a.extend(a.hash,new a.eventEmitter("a.hash"));a.isNone(JSON)&&(a.isNone(JSON.parser)||a.isNone(JSON.stringify))&&function(){function b(b){var e,k,l,m="json"==b;if(m||"json-stringify"==b||"json-parse"==b){if("json-stringify"==b||m){if(e="function"==typeof g.stringify&&z){(l=function(){return 1}).toJSON=l;try{e="0"===g.stringify(0)&&"0"===g.stringify(new Number)&&'""'==g.stringify(new String)&&g.stringify(h)===c&&g.stringify(c)===c&&g.stringify()===c&&"1"===g.stringify(l)&&"[1]"==g.stringify([l])&&"[null]"==g.stringify([c])&&"null"==g.stringify(f)&&
"[null,null,null]"==g.stringify([c,h,f])&&'{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==g.stringify({A:[l,d,!1,f,"\x00\b\n\f\r\t"]})&&"1"===g.stringify(f,l)&&"[\n 1,\n 2\n]"==g.stringify([1,2],f,1)&&'"-271821-04-20T00:00:00.000Z"'==g.stringify(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==g.stringify(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==g.stringify(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==g.stringify(new Date(-1))}catch(r){e=!1}}if(!m)return e}if("json-parse"==
b||m){if("function"==typeof g.parse)try{if(0===g.parse("0")&&!g.parse(!1)&&(l=g.parse('{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'),k=5==l.a.length&&1==l.a[0])){try{k=!g.parse('"\t"')}catch(q){}if(k)try{k=1!=g.parse("01")}catch(t){}}}catch(v){k=!1}if(!m)return k}return e&&k}}var c=void 0,d=!0,f=null,h={}.toString,m,l,q="function"===typeof define&&define.c,g=!q&&"object"==typeof exports&&exports;g||q?"object"==typeof JSON&&JSON?q?g=JSON:(g.stringify=JSON.stringify,g.parse=JSON.parse):q&&(g=
this.JSON={}):g=this.JSON||(this.JSON={});var e,k,t,C,w,x,r,y,v,B,u,s,D,z=new Date(-0xc782b5b800cec),A,G,F;try{z=-109252==z.getUTCFullYear()&&0===z.getUTCMonth()&&1==z.getUTCDate()&&10==z.getUTCHours()&&37==z.getUTCMinutes()&&6==z.getUTCSeconds()&&708==z.getUTCMilliseconds()}catch(E){}b("json")||(z||(A=Math.floor,G=[0,31,59,90,120,151,181,212,243,273,304,334],F=function(b,c){return G[c]+365*(b-1970)+A((b-1969+(c=+(1<c)))/4)-A((b-1901+c)/100)+A((b-1601+c)/400)}),(m={}.hasOwnProperty)||(m=function(b){var c=
{},d;(c.__proto__=f,c.__proto__={toString:1},c).toString!=h?m=function(b){var c=this.__proto__;b=b in(this.__proto__=f,this);this.__proto__=c;return b}:(d=c.constructor,m=function(b){var c=(this.constructor||d).prototype;return b in this&&!(b in c&&this[b]===c[b])});c=f;return m.call(this,b)}),l=function(b,c){var d=0,e,g,k;(e=function(){this.valueOf=0}).prototype.valueOf=0;g=new e;for(k in g)m.call(g,k)&&d++;e=g=f;d?d=2==d?function(b,c){var d={},e="[object Function]"==h.call(b),g;for(g in b)e&&"prototype"==
g||m.call(d,g)||(d[g]=1)&&m.call(b,g)&&c(g)}:function(b,c){var d="[object Function]"==h.call(b),e,g;for(e in b)d&&"prototype"==e||!m.call(b,e)||(g="constructor"===e)||c(e);(g||m.call(b,e="constructor"))&&c(e)}:(g="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),d=function(b,c){var d="[object Function]"==h.call(b),e;for(e in b)d&&"prototype"==e||!m.call(b,e)||c(e);for(d=g.length;e=g[--d];m.call(b,e)&&c(e));});d(b,c)},b("json-stringify")||(e=
{"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},k=function(b,c){return("000000"+(c||0)).slice(-b)},t=function(b){for(var c='"',d=0,g;g=b.charAt(d);d++)c+=-1<'\\"\b\f\n\r\t'.indexOf(g)?e[g]:e[g]=" ">g?"\\u00"+k(2,g.charCodeAt(0).toString(16)):g;return c+'"'},C=function(b,e,g,r,q,v,y){var s=e[b],u,w,B,x,D,z,G,E,S;if("object"==typeof s&&s)if(u=h.call(s),"[object Date]"!=u||m.call(s,"toJSON"))"function"==typeof s.toJSON&&("[object Number]"!=u&&"[object String]"!=u&&"[object Array]"!=
u||m.call(s,"toJSON"))&&(s=s.toJSON(b));else if(s>-1/0&&s<1/0){if(F){B=A(s/864E5);for(u=A(B/365.2425)+1970-1;F(u+1,0)<=B;u++);for(w=A((B-F(u,0))/30.42);F(u,w+1)<=B;w++);B=1+B-F(u,w);x=(s%864E5+864E5)%864E5;D=A(x/36E5)%24;z=A(x/6E4)%60;G=A(x/1E3)%60;x%=1E3}else u=s.getUTCFullYear(),w=s.getUTCMonth(),B=s.getUTCDate(),D=s.getUTCHours(),z=s.getUTCMinutes(),G=s.getUTCSeconds(),x=s.getUTCMilliseconds();s=(0>=u||1E4<=u?(0>u?"-":"+")+k(6,0>u?-u:u):k(4,u))+"-"+k(2,w+1)+"-"+k(2,B)+"T"+k(2,D)+":"+k(2,z)+":"+
k(2,G)+"."+k(3,x)+"Z"}else s=f;g&&(s=g.call(e,b,s));if(s===f)return"null";u=h.call(s);if("[object Boolean]"==u)return""+s;if("[object Number]"==u)return s>-1/0&&s<1/0?""+s:"null";if("[object String]"==u)return t(s);if("object"==typeof s){for(b=y.length;b--;)if(y[b]===s)throw TypeError();y.push(s);E=[];e=v;v+=q;if("[object Array]"==u){w=0;for(b=s.length;w<b;S||(S=d),w++)u=C(w,s,g,r,q,v,y),E.push(u===c?"null":u);b=S?q?"[\n"+v+E.join(",\n"+v)+"\n"+e+"]":"["+E.join(",")+"]":"[]"}else l(r||s,function(b){var e=
C(b,s,g,r,q,v,y);e!==c&&E.push(t(b)+":"+(q?" ":"")+e);S||(S=d)}),b=S?q?"{\n"+v+E.join(",\n"+v)+"\n"+e+"}":"{"+E.join(",")+"}":"{}";y.pop();return b}},g.stringify=function(b,c,d){var e,g,f,k,l,m;if("function"==typeof c||"object"==typeof c&&c)if("[object Function]"==h.call(c))g=c;else if("[object Array]"==h.call(c))for(f={},k=0,l=c.length;k<l;m=c[k++],("[object String]"==h.call(m)||"[object Number]"==h.call(m))&&(f[m]=1));if(d)if("[object Number]"==h.call(d)){if(0<(d-=d%1))for(e="",10<d&&(d=10);e.length<
d;e+=" ");}else"[object String]"==h.call(d)&&(e=10>=d.length?d:d.slice(0,10));return C("",(m={},m[""]=b,m),g,f,e,"",[])}),b("json-parse")||(w=String.fromCharCode,x={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"},r=function(){s=D=f;throw SyntaxError();},y=function(){for(var b=D,c=b.length,e,g,h,k,l;s<c;)if(e=b.charAt(s),-1<"\t\r\n ".indexOf(e))s++;else{if(-1<"{}[]:,".indexOf(e))return s++,e;if('"'==e){g="@";for(s++;s<c;)if(e=b.charAt(s)," ">e)r();else if("\\"==e)if(e=b.charAt(++s),-1<
'\\"/btnfr'.indexOf(e))g+=x[e],s++;else if("u"==e){h=++s;for(k=s+4;s<k;s++)e=b.charAt(s),"0"<=e&&"9">=e||"a"<=e&&"f">=e||"A"<=e&&"F">=e||r();g+=w("0x"+b.slice(h,s))}else r();else{if('"'==e)break;g+=e;s++}if('"'==b.charAt(s))return s++,g}else{h=s;"-"==e&&(l=d,e=b.charAt(++s));if("0"<=e&&"9">=e){for("0"==e&&(e=b.charAt(s+1),"0"<=e&&"9">=e)&&r();s<c&&(e=b.charAt(s),"0"<=e&&"9">=e);s++);if("."==b.charAt(s)){for(k=++s;k<c&&(e=b.charAt(k),"0"<=e&&"9">=e);k++);k==s&&r();s=k}e=b.charAt(s);if("e"==e||"E"==
e){e=b.charAt(++s);"+"!=e&&"-"!=e||s++;for(k=s;k<c&&(e=b.charAt(k),"0"<=e&&"9">=e);k++);k==s&&r();s=k}return+b.slice(h,s)}l&&r();if("true"==b.slice(s,s+4))return s+=4,d;if("false"==b.slice(s,s+5))return s+=5,!1;if("null"==b.slice(s,s+4))return s+=4,f}r()}return"$"},v=function(b){var c,e;"$"==b&&r();if("string"==typeof b){if("@"==b.charAt(0))return b.slice(1);if("["==b){for(c=[];;e||(e=d)){b=y();if("]"==b)break;e&&(","==b?(b=y(),"]"==b&&r()):r());","==b&&r();c.push(v(b))}return c}if("{"==b){for(c=
{};;e||(e=d)){b=y();if("}"==b)break;e&&(","==b?(b=y(),"}"==b&&r()):r());","!=b&&"string"==typeof b&&"@"==b.charAt(0)&&":"==y()||r();c[b.slice(1)]=v(y())}return c}r()}return b},u=function(b,d,e){e=B(b,d,e);e===c?delete b[d]:b[d]=e},B=function(b,c,d){var e=b[c],g;if("object"==typeof e&&e)if("[object Array]"==h.call(e))for(g=e.length;g--;)u(e,g,d);else l(e,function(b){u(e,b,d)});return d.call(b,c,e)},g.parse=function(b,c){var d,e;s=0;D=b;d=v(y());"$"!=y()&&r();s=D=f;return c&&"[object Function]"==h.call(c)?
B((e={},e[""]=d,e),"",c):d}));q&&define(function(){return g})}();
a.parser={json:{stringify:function(b){try{return JSON.stringify(b)}catch(c){return a.console.error("a.parser.json.stringify: unable to stringify (value: "+b+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),""}},parse:function(b){try{return JSON.parse(b)}catch(c){return a.console.error("a.parser.json.parse: unable to parse (value: "+b+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null}}},xml:{stringify:function(b){if(!a.isNone(b)&&!a.isNone(b.xml))return b.xml;
if(!a.isNone(window.XMLSerializer))try{return(new window.XMLSerializer).serializeToString(b)}catch(c){a.console.error("a.parser.xml.stringify: unable to stringify (value: "+b+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1)}a.console.error("a.parser.xml.stringify: unable to find any parser available",1);return""},parse:function(b){if(!a.isNone(window.ActiveXObject)){for(var c=null,d=0;4>d;++d)try{c=new ActiveXObject(("MSXML2.DOMDocument."+(6-d)+".0")[d])}catch(f){}c.async=!1;
c.loadXML(b);return 0!=c.parseError.errorCode?(a.console.error("a.parser.xml.parse: unable to parse (value: "+b+", reason"+c.parseError.reason+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null):c}if(!a.isNone(window.DOMParser))return(new DOMParser).parseFromString(b,"text/xml");a.console.error("a.parser.xml.parse: unable to find any parser available",1);return null}}};a.timer=function(){var b={};setInterval(function(){a.message.dispatch("a.timer.tick");for(var c in b){var d=b[c];d.current+=50;d.current>=d.timeout&&(d.current=0,a.isFunction(d.fct)&&d.fct.call(d.scope||this))}},50);return{add:function(c,d,f){var h=a.uniqueId();if(!a.isNumber(f)||0>=f)f=1E3,a.console.warn("The timeout has not been setted properly into timer, timeout has been setted to 1000ms",1);b[h]={fct:c,scope:d,timeout:f,current:0};return h},once:function(b,d,f){var h=this.add(function(){a.isFunction(b)&&
b.call(this);a.timer.remove(h)},d,f);return h},get:function(c){c=b[c];return a.isNone(c)?null:c},remove:function(c){return delete b[c]},clear:function(){b={}}}}();a.dom={query:function(b,c){c=c||document;return!c.querySelectorAll&&window.jQuery?this.el(jQuery(b)):this.el(c.querySelectorAll(b))},el:function(b){if(b instanceof a.dom.children)return b;if(a.isString(b))return b=String.prototype.trim?b.trim():b.replace(/^\s+|\s+$/g,""),/^[a-zA-Z0-9 _-]+$/i.test(b)?this.id(b):this.query(b);if(window.jQuery&&b instanceof jQuery){for(var c=[],d=b.size();d--;)c.push(b.get(d));b=c}return a.isArray(b)?new this.children(b):new this.children([b])},id:function(b){return this.attr("id",
b,document)},cls:function(b,c){return this.attr("class",b,c)},tag:function(b,c){c=a.isObject(c)?c:document;var d=a.isString(b)?b.replace(/ /g,"").split(","):b,f=[],h=d.length;if(1<h){for(;h--;)for(var m=this.tag(d[h],c).getElements(),l=m.length;l--;)a.contains(f,m[l])||f.push(m[l]);return new a.dom.children(f)}f=c.querySelectorAll?c.querySelectorAll(b):c.getElementsByTagName(b);return new a.dom.children(f)},attr:function(b,c,d){function f(b,c){for(var d=c.length;d--;)a.contains(b,c[d])||b.push(c[d])}
if(a.isNone(d)){a.isNone(c)&&(c=document);if(a.isObject(c)&&!a.isArray(c))return this.attr(b,null,c);d=document}if(b&&(a.isArray(b)||0<=b.indexOf(","))){var h=a.isString(b)?b.replace(/ /g,"").split(","):b,m=h.length;if(1<m){for(var l=[];m--;){var q=this.attr(h[m],c,d),q=q.getElements();f(l,q)}return new a.dom.children(l)}}if(c&&(a.isArray(c)||0<c.indexOf(","))&&(h=a.isString(c)?c.replace(/ /g,"").split(","):c,m=h.length,1<m)){for(l=[];m--;)q=this.attr(b,h[m],d),q=q.getElements(),f(l,q);return new a.dom.children(l)}h=
a.isString(c);l=[];b=b.replace(/ /g,"");h&&(c=c.replace(/ /g,""));if("class"==b)l=d.getElementsByClassName(c);else if("id"==b)l=[d.getElementById(c)],a.isNull(l[0])&&l.pop();else if(d.querySelectorAll)l=d.querySelectorAll(h?"["+b+'="'+c+'"]':"["+b+"]");else for(d=d.getElementsByTagName("*"),m=d.length;m--;){var q=d[m],g=q.getAttribute(b);g&&(h&&g==c||!h)&&(a.contains(l,q)||l.push(q))}return new a.dom.children(l)}};
a.dom.event=new function(){function b(b,c,d){b.addEventListener(c,d,!1)}function c(b,c,d){b.removeEventListener(c,d,!1)}function d(b,c,d){b.attachEvent("on"+c,d)}function f(b,c,d){b.detachEvent("on"+c,d)}function h(b,c,d){b["on"+c]=d}function m(b,c,d){b["on"+c]=null}a.isFunction(window.addEventListener)?(this.bind=b,this.unbind=c):a.isFunction(document.attachEvent)?(this.bind=d,this.unbind=f):(this.bind=h,this.unbind=m)};
a.dom.children=function(b){this.elementList=b=a.isUndefined(b.length)?[b]:b;this.length=b.length};
a.dom.children.prototype={_perform:function(){var b=[],c=this.elementList,d=Array.prototype.slice.call(arguments),f=d[0],d=d.slice(1),h=d.length,m=c.length;for(d.push(null);m--;){d[h]=c[m];for(var l=f.apply(a.dom,d).getElements(),q=l.length;q--;)a.contains(b,l[q])||b.push(l[q])}this.elementList=b;this.length=b.length;return this},get:function(b){return this.elementList[b]||null},getElements:function(){return this.elementList},id:function(b){return this._perform(a.dom.id,b)},cls:function(b){return this._perform(a.dom.cls,
b)},css:function(b,c){b=b||"";if(0<=b.indexOf("-")){for(var d=b.split("-"),f=1,h=d.length;f<h;++f){var m=d[f];d[f]=m.charAt(0).toUpperCase()+m.slice(1)}b=d.join("")}if(a.isUndefined(c)){d=[];h=this.elementList;for(f=h.length;f--;)m=h[f].style[b],a.isNone(m)||d.push(m);return 1>=d.length?d[0]||"":d}this.each(function(){this.style[b]=c})},addClass:function(b){var c=RegExp("(\\s|^)"+b+"(\\s|$)");this.each(function(){this.classList?this.classList.add(b):this.className.match(c)||(this.className+=" "+b)});
return this},hasClass:function(b){b=RegExp("(\\s|^)"+b+"(\\s|$)");for(var c=this.elementList,d=c.length;d--;)if(!c[d].className.match(b))return!1;return!0},removeClass:function(b){this.each(function(c){this.classList?this.classList.remove(b):(c=RegExp("(\\s|^)"+b+"(\\s|$)"),this.className.match(c)&&this.className.replace(c,""))},this);return this},toggleClass:function(b){this.each(function(c){this.classList?this.classList.toggle(b):(c=RegExp("(\\s|^)"+b+"(\\s|$)"),this.className.match(c)?this.className.replace(c,
""):this.className+=" "+b)},this);return this},bind:function(b,c){var d=a.isString(b)?b.split(" "):b;for(i=d.length;i--;)d[i]&&""!=d[i]&&this.each(function(b){a.dom.event.bind(this,b,c)},d[i].toLowerCase());return this},unbind:function(b,c){var d=a.isString(b)?b.split(" "):b;for(i=d.length;i--;)d[i]&&""!=d[i]&&this.each(function(b){a.dom.event.unbind(this,b,c)},d[i].toLowerCase());return this},tag:function(b){return this._perform(a.dom.tag,b)},attr:function(b,c){return this._perform(a.dom.attr,b,
c)},attribute:function(b,c){var d=a.isString(b)?b.replace(/ /g,"").split(","):b;if(a.isUndefined(c)){for(var f=[],h=this.elementList,m=h.length;m--;)for(var l=0,q=d.length;l<q;++l)try{var g=h[m].getAttribute(d[l]);a.isNone(g)||a.contains(f,g)||f.push(g)}catch(e){}return 2>f.length?f.join(""):f}this.each(function(){for(var b=0,e=d.length;b<e;++b)try{this.setAttribute(d[b],c)}catch(g){}});return this},data:function(b,c){return this.attribute("data-"+b,c)},appstorm:function(b,c){return this.attribute("data-"+
b+",a-"+b+","+b,c)},parent:function(){for(var b=this.elementList,c=[],d=b.length;d--;){var f=b[d].parentNode;a.contains(c,f)||c.push(f)}this.elementList=c;this.length=c.length;return this},children:function(b){var c=this.elementList,d=[],f=c.length;for(b=b||[1];f--;)d.push(a.toArray(c[f].childNodes));c=a.uniq(a.flatten(d));for(d=c.length;d--;)a.contains(b,c[d].nodeType)||c.splice(d,1);this.elementList=c;this.length=c.length;return this},all:function(){for(var b=this.elementList,c=[],d=b.length;d--;)c.push(a.toArray(b[d].getElementsByTagName("*")));
b=a.uniq(a.flatten(c));for(c=b.length;c--;)3==b[c].nodeType&&b.splice(c,1);this.elementList=b;this.length=b.length;return this},insertBefore:function(b){var c=a.dom.el(b).getElements();this.each(function(){for(var b=0,f=c.length;b<f;++b)this.parentNode.insertBefore(c[b],this)});return this},insertAfter:function(b){var c=a.dom.el(b).getElements();this.each(function(){for(var b=0,f=c.length;b<f;++b)this.parentNode.insertBefore(c[b],this.nextSibling)});return this},empty:function(){this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)});
return this},remove:function(b){var c=a.dom.el(b).getElements();this.each(function(){try{for(var b=0,f=c.length;b<f;++b)this.removeChild(c[b])}catch(h){}});return this},append:function(b){var c=a.dom.el(b).getElements();this.each(function(){for(var b=0,f=c.length;b<f;++b)this.appendChild(c[b])});return this},replace:function(b){this.empty();return this.append(b)},each:function(){for(var b=this.elementList,c=Array.prototype.slice.call(arguments),d=c[0],c=c.slice(1),d=a.isFunction(d)?d:function(){},
f=0,h=b.length;f<h;++f)d.apply(b[f],c);return this}};a.ajax=function(b,c,d){var f=a.getDefaultAjaxOptions();this.params={url:"",method:"GET",type:"raw",async:!0,cache:!1,data:{},header:{}};for(var h in this.params)"data"!==h&&"header"!==h&&(h in f&&typeof f[h]===typeof this.params[h]&&(this.params[h]=f[h]),h in b&&typeof b[h]===typeof this.params[h]&&(this.params[h]=b[h]));if(a.isObject(f.data))for(var m in f.data)this.params.data[m]=f.data[m];if(a.isObject(f.header))for(var l in f.header)this.params.header[l]=f.header[l];if(a.isString(b.data))this.params.data=
b.data;else if(a.isObject(b.data))for(var q in b.data)this.params.data[q]=b.data[q];if(a.isObject(b.header))for(var g in b.header)this.params.header[g]=b.header[g];this.success=a.isFunction(c)?c:function(){};this.error=a.isFunction(d)?d:function(){};this.request=null;if(a.isNone(window.XMLHttpRequest))for(b=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],c=0,d=b.length;c<d;++c)try{this.request=new ActiveXObject(b[c])}catch(e){}else this.request=new XMLHttpRequest};
a.ajax.prototype.parseResult=function(b,c){if(204===c.status)return"";var d=b.type.toLowerCase();return"json"==d?a.parser.json.parse(c.responseText):"xml"==d?c.responseXML:c.responseText};a.ajax.prototype.abort=function(){try{this.request.abort()}catch(b){}};
a.ajax.prototype.send=function(){var b=this.params.method.toUpperCase();if(!1===this.params.cache){var c=a.uniqueId("rnd_");try{this.params.data.cachedisable=c}catch(d){}}c="";if(a.isString(this.params.data))c=this.params.data;else{for(var f in this.params.data)c+=encodeURIComponent(f)+"="+encodeURIComponent(this.params.data[f])+"&";c=c.slice(0,-1)}var h=this.params.url;f=this.params.async;"GET"==b&&c&&(h+="?"+c);if(!0===f){var m={success:this.success,params:this.params,error:this.error,request:this.request,
parseResult:this.parseResult};this.request.onreadystatechange=function(){var b=m.request.status;if(4===m.request.readyState){var c=200<=b&&400>b;c?m.success(m.parseResult(m.params,m.request),b):m.error(h,b);a.message.dispatch("a.ajax",{success:c,status:b,url:m.params.url,method:m.method,params:m.params})}}}this.request.open(b,h,f);var l=["Content-Type","Content-type","content-type"],q=!1,g;for(g in this.params.header)this.request.setRequestHeader(g,this.params.header[g]),!q&&a.contains(l,g)&&(q=!0);
q||"POST"!==b||this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.request.send(c);return!1===f?this.parseResult(this.params,this.request):"No return in async mode"};a.loader=function(){function b(b,c){if(a.isNone(b))return!1;for(var d=0,e=f.length;d<e;++d)if(f[d]===b)return a.isFunction(c)&&c(),!0;return!1}function c(b,c,d,e,k,m){for(var C in c)b.setAttribute(C,c[C]);!a.isNone(k)&&k.id&&b.setAttribute("id",k.id);var w=!1,x=function(c){w||(w=!0,a.isFunction(d)&&d(b),(a.isNone(k)||!1!==k.cache)&&f.push(e))};b.addEventListener?b.addEventListener("load",x,!1):b.readyState?b.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||x()}:
b.onload=x;if("text/css"===c.type){var r=document.styleSheets.length;h++;var y=a.timer.add(function(){document.styleSheets.length>r+h-1&&(h--,a.timer.remove(y),x())},null,50)}document.getElementsByTagName("head")[0].appendChild(b)}function d(b,c,d,e){var h={url:b,method:"GET",type:"raw",async:!0,cache:!0,data:{},header:{}};a.console.log("a.loader: load resource (url: "+b+")",3);a.isNone(d)||(a.contains(m,d.method)&&(h.method=d.method),a.isNone(d.type)||"json"!=d.type&&"xml"!=d.type||(h.type=d.type),
a.isObject(d.data)&&(h.data=d.data),a.isObject(d.header)&&(h.header=d.header),a.isBoolean(d.cache)&&(h.cache=d.cache));e=a.isFunction(e)?e:function(){};(new a.ajax(h,function(e,h){a.isFunction(c)&&c(e,h);(a.isNone(d)||!1!==d.cache)&&f.push(b)},e)).send()}var f=[],h=0,m="GET POST PUT DELETE HEAD OPTIONS".split(" ");return{js:function(c,d,g,e){b(c,d)||this.jsonp(c,d,g,e)},jsonp:function(b,d,g,e){var f=a.isObject(g)&&g.type?g.type:"text/javascript";a.console.log("a.loader: load resource (url: "+b+")",
3);c(document.createElement("script"),{type:f,src:b},d,b,g,e)},json:function(b,c,g,e){a.isObject(g)||(g={});g.type="json";a.isObject(g.header)||(g.header={});g.header.accept="application/json, text/javascript";d(b,c,g,e)},xml:function(b,c,g,e){a.isObject(g)||(g={});g.type="xml";a.isObject(g.header)||(g.header={});g.header.accept="application/xml, text/xml";d(b,c,g,e)},css:function(d,f,g,e){b(d,f)||(a.console.log("a.loader: load resource (url: "+d+")",3),c(document.createElement("link"),{rel:"stylesheet",
type:"text/css",href:d},f,d,g,e))},html:function(c,f,g,e){b(c,f)||(a.isObject(g)||(g={}),g.type="raw",!0===a.environment.get("debug")&&(g.cache=!1),a.isObject(g.header)||(g.header={}),g.header.accept="text/html",d(c,f,g,e))},javafx:function(c,d,g,e){if(a.isNone(g)||a.isNone(g.code)||a.isNone(g.id))e="a.loader.javafx: the system need args.code ",e+="and args.name setted to be able to load any ",e+="javafx resource... This uri will not be ",e+="loaded: "+c,a.console.warn(e,3);else if(!b(c,d)){this.js("http://dl.javafx.com/"+
(g.version?g.version:"1.3")+"/dtfx.js",function(){javafx({archive:c,width:g.width||1,height:g.height||1,code:g.code,name:g.id})});var f=null,h=2E3,f=a.timer.add(function(){0<h--&&!a.isNone(document.getElementById(g.id).Packages)?(a.timer.remove(f),a.isFunction(d)&&d()):0>=h&&a.isFunction(e)&&e(c,408)},null,200)}},flash:function(c,d,g,e){a.isNone(g)||a.isNone(g.rootId)||a.isNone(g.id)?(e="a.loader.flash: the system need args ",e+="parameters: rootId, id, setted to be able ",e+="to load any flash resource... This uri ",
e+="will not be loaded: "+c,a.console.warn(e,3)):b(c,d)||this.js(a.url+"vendor/storage/flash/swfobject.js",function(){swfobject.embedSWF(c,g.rootId,"100%","100%","10.0.0",a.url+"vendor/storage/flash/expressInstall.swf",g.flashvars,g.params,{id:g.id},function(b){!1===b.success&&a.isFunction(e)?e(c,408):!0===b.success&&a.isFunction(d)&&setTimeout(d,500)})})},silverlight:function(c,d,g,e){if(a.isNone(g)||a.isNone(g.rootId)||a.isNone(g.id))e="a.loader.silverlight: the system need args ",e+="parameters: rootId, id, setted to be able ",
e+="to load any silverlight resource... This uri ",e+="will not be loaded: "+c,a.console.warn(e,3);else if(!b(c,d)){a.console.log("a.loader: load resource (url: "+c+")",3);var f=document.createElement("object");f.id=g.id;f.data="data:application/x-silverlight-2,";f.type="application/x-silverlight-2";a.isArray(g.params)||(g.params=[]);g.params.push({name:"source",value:c});for(var h=0,m=g.params.length;h<m;++h){var w=document.createElement("param");w.name=g.params[h].name;w.value=g.params[h].value;
f.appendChild(w)}document.getElementById(g.rootId).appendChild(f);var x=null,r=2E3,x=a.timer.add(function(){0<r--&&!a.isNone(document.getElementById(g.id).Content)?(a.timer.remove(x),d()):0>=r&&a.isFunction(e)&&e(c,408)},null,200)}},trace:function(){return f}}}();a.route=new function(){function b(b){return"leave"==b||"leaving"==b?"leave":"enter"}function c(b,c){var m=(d.get(c+".hash")||{})[b]||[],l=m.length;for(found=!1;l--;)found=!0,function(b){setTimeout(function(){m[b].call(null)},0)}(l);found||(l=d.get(c+".otherwise"))&&l.call(null)}var d=a.mem.getInstance("app.route");this.bind=function(c,h,m){m=b(m)+".hash";var l=d.get(m)||{};l[c]||(l[c]=[]);l[c].push(h);d.set(m,l);return this};this.unbind=function(c,h,m){m=b(m)+".hash";var l=d.get(m)||{};l[c]&&(l[c]=
a.without(l[c],h),1>l[c].length&&delete l[c],d.set(m,l));return this};this.otherwise=function(c,h){h=b(h)+".otherwise";a.isNone(c)?d.remove(h):d.set(h,c);return this};this.go=function(b){b&&(window.location.href="#"+b)};a.hash.bind("a.hash",function(b){c(b.value,"enter");c(b.old,"leave")})};a.parameter={_fct:{},extract:function(b,c){var d=/\{\{(\s*[a-zA-Z0-9-\--_]+\s*:\s*[a-z0-9_\-\[\]\(\)\^.\|\+\*\?\\\/]+\s*)\}\}/gmi,f=/^\s+|\s+$/g,h=!a.isNone(c);h&&(d=c);for(var m=[],l;l=d.exec(b);){var q=null,q=h?["hash",l[1]]:l[1].split(":",2);m.push({original:l[0].replace(f,""),name:q[0].replace(f,""),regex:q[1].replace(f,""),start:l.index})}return m},replace:function(b,c,d){a.isNone(d)&&(d="("+c.regex+")");return b.substr(0,c.start)+d+b.substr(c.start+c.original.length)},convert:function(b,c){for(var d=
this.extract(b,c),f=d.length;f--;)b=this.replace(b,d[f]);return b},extrapolate:function(b,c,d,f){!1!==f&&(f=!0);if(a.isString(b)&&b&&0<=b.indexOf("{{")&&0<=b.indexOf("}}")){for(var h=this.extract(b),m=this.extract(d),l=this.extract(b,/\{\{(\s*\w+\s*)\}\}/gmi),h=h.concat(l),l=m.length;l--;)d=this.replace(d,m[l]);if(l=RegExp("^"+d+"$","gi").exec(c)){c=0;for(d=m.length;c<d;++c)m[c].value=l[c+1];for(var l=0,q=h.length;l<q;++l)for(c=0;c<d;++c)m[c].name===h[l].regex&&"hash"===h[l].name&&(h[l].value=m[c].value)}for(var m=
h.length,g=!1===f?function(b,c,d){return d}:this.replace;m--;){var e=h[m];f=!1;"hash"!==e.name&&"hashtag"!==e.name||a.isNone(e.value)||(f=!0,b=this.replace(b,e,e.value));f||a.each(this._fct,function(c,d){d==e.name&&(b=g(b,e,c(e.regex)))})}}return b},addParameterType:function(b,c){b&&(a.isString(b)&&a.isFunction(c))&&(this._fct[b]=c)},removeParameterType:function(b){delete this._fct[b]}};a.acl=a.extend(new function(){var b=a.mem.getInstance("app.acl");this.setCurrentRole=function(c){b.set("current",c);this.dispatch("change",c)};this.getCurrentRole=function(){return b.get("current")||""};this.setRoleList=function(c){a.isArray(c)&&b.set("list",c)};this.getRoleList=function(){return b.get("list")};this.isAllowed=function(b,d){d=d||this.getCurrentRole();for(var f=-1,h=-1,m=this.getRoleList()||[],l=m.length;l--&&(m[l]==b&&(h=l),m[l]==d&&(f=l),-1==h||-1==f););return f>=h};this.isRefused=
function(b,d){return!this.isAllowed(b,d)}},new a.eventEmitter("a.acl"));a.keyboard=function(b){function c(){f.clear();b.reset()}function d(b){return function(c){for(var d=f.get(b)||[],g=d.length;g--;){var e=d[g].fct,h=d[g].scope;setTimeout(function(){e.call(h,c)},0)}}}var f=a.mem.getInstance("app.accelerator");if(a.isNone(b)){a.console.error("a.keyboard: error, Mousetrap is undefined!",1);var h=function(){};return{bind:h,unbind:h,reset:h,clear:h}}return{bind:function(c,h,q){if(c&&a.isFunction(h)){var g=f.get(c)||[];g.push({fct:h,scope:q||b});f.set(c,g);1==g.length&&(h=
d(c),b.bind(c,h))}},unbind:function(c,d){if(a.isFunction(d)){var h=f.get(c);if(h){for(var g=h.length;g--;)h[g].fct===d&&h.splice(g,1);0==h.length&&(f.remove(c),b.unbind(c))}}},reset:c,clear:c}}(window.Mousetrap);a.callback={};a.callback.synchronizer=function(b,c,d){return a.extend(new a.callback.synchronizerInstance(b,c,d),new a.eventEmitter("a.callback.synchronizer"))};a.callback.synchronizerInstance=function(b,c,d){this.callbacks=b||[];this.successFunction=c;this.errorFunction=d;this.data={};this.scope=this.resultScope=null;this.parrallelCount=0;this.running=!1};
a.callback.synchronizerInstance.prototype={addCallback:function(){var b=a.toArray(arguments);this.callbacks=this.callbacks.concat(b);if(this.isRunning()){var c=this.scope||this,d=this.getResultObject();a.each(b,function(b){b.call(c,d)})}},removeCallback:function(b){this.callbacks=a.without(this.callbacks,b)},setScope:function(b){!a.isNone(b)&&a.isObject(b)&&(this.scope=b)},getData:function(b){return this.data[b]||null},setData:function(b,c){a.isNone(c)?delete this.data[b]:this.data[b]=c},getResultObject:function(){return{next:a.scope(this.next,
this),done:a.scope(this.next,this),success:a.scope(this.next,this),fail:a.scope(this.stop,this),error:a.scope(this.stop,this),stop:a.scope(this.stop,this),setData:a.scope(this.setData,this),getData:a.scope(this.getData,this)}},next:function(){this.parrallelCount--;0==this.parrallelCount&&this.running&&(this.running=!1,a.isFunction(this.successFunction)&&this.successFunction.call(this.resultScope||this.scope||this,this.getResultObject()))},stop:function(){this.parrallelCount=0;var b=this.running;this.running=
!1;var c=this.resultScope||this.scope||this,d=a.toArray(arguments);b&&a.isFunction(this.errorFunction)&&(d.push(this.getResultObject()),this.errorFunction.apply(c,d))},start:function(){this.parrallelCount=this.callbacks.length;this.running=!0;if(0>=this.parrallelCount)this.parrallelCount=1,this.next();else{var b=this.scope||this,c=a.toArray(arguments);c.push(this.getResultObject());a.each(this.callbacks,function(d){d.apply(b,c)})}},isRunning:function(){return this.running}};
a.callback.synchronizerInstance.prototype.success=a.callback.synchronizerInstance.prototype.next;a.callback.synchronizerInstance.prototype.done=a.callback.synchronizerInstance.prototype.next;a.callback.synchronizerInstance.prototype.fail=a.callback.synchronizerInstance.prototype.stop;a.callback.synchronizerInstance.prototype.error=a.callback.synchronizerInstance.prototype.stop;a.callback.chainer=function(b,c,d){return a.extend(new a.callback.chainerInstance(b,c,d),new a.eventEmitter("a.callback.chainer"))};
a.callback.chainerInstance=function(b,c,d){this.callbacks=b||[];this.queue=[];this.successFunction=c;this.errorFunction=d;this.data={};this.scope=this.resultScope=null};
a.callback.chainerInstance.prototype={addCallback:function(){var b=a.toArray(arguments);this.callbacks=this.callbacks.concat(b);this.isRunning()&&(this.queue=this.queue.concat(b))},removeCallback:function(b){this.callbacks=a.without(this.callbacks,b);this.queue=a.without(this.without,b)},setScope:function(b){!a.isNone(b)&&a.isObject(b)&&(this.scope=b)},getData:function(b){return this.data[b]||null},setData:function(b,c){a.isNone(c)?delete this.data[b]:this.data[b]=c},getResultObject:function(){return{next:a.scope(this.next,
this),done:a.scope(this.next,this),success:a.scope(this.next,this),fail:a.scope(this.stop,this),error:a.scope(this.stop,this),stop:a.scope(this.stop,this),setData:a.scope(this.setData,this),getData:a.scope(this.getData,this)}},next:function(){var b=a.toArray(arguments),c=this.scope||this;b.push(this.getResultObject());if(this.queue.length){var d=this.queue.shift();a.isFunction(d)&&d.apply(c,b)}else a.isFunction(this.successFunction)&&(c=this.resultScope||c,this.successFunction.apply(c,b))},stop:function(){this.queue=
[];var b=this.scope||this,c=a.toArray(arguments);a.isFunction(this.errorFunction)&&(c.push(this.getResultObject()),this.errorFunction.apply(b,c))},start:function(){this.queue.length||(this.queue=a.deepClone(this.callbacks),this.next())},isRunning:function(){return this.queue.length?!0:!1}};a.callback.chainerInstance.prototype.success=a.callback.chainerInstance.prototype.next;a.callback.chainerInstance.prototype.done=a.callback.chainerInstance.prototype.next;
a.callback.chainerInstance.prototype.fail=a.callback.chainerInstance.prototype.stop;a.callback.chainerInstance.prototype.error=a.callback.chainerInstance.prototype.stop;a.storage={debugGet:function(b,c,d){"_support_t"!==c&&a.console.log("a.storage.type."+b+".get: get element (key: "+c+", value: "+d+")",3)},printError:function(b,c){"_support_t"!==c&&a.console.log("a.storage.type."+b+".get: unable to find key ("+c+") in store",2)},debugSet:function(b,c,d){"_support_t"!==c&&a.console.log("a.storage.type."+b+".set: add element (key: "+c+", value: "+d+")",3)},debugRemove:function(b,c){"_support_t"!==c&&a.console.log("a.storage.type."+b+".remove: remove element (key: "+
c+")",3)},type:{}};
a.storage.type.cookie=new function(){this.support=!1;this.engine="cookie";this.set=function(b,c,d){var f="";a.storage.debugSet("cookie",b,c);d&&(f=new Date,f.setTime(f.getTime()+864E5*d),f="; expires="+f.toGMTString());b=b+"="+escape(a.parser.json.stringify(c));document.cookie=b+(f+"; path=/")};this.get=function(b){if(0<document.cookie.length){var c=document.cookie.indexOf(b+"=");if(-1!=c){var c=c+b.length+1,d=document.cookie.indexOf(";",c);-1==d&&(d=document.cookie.length);c=a.parser.json.parse(unescape(document.cookie.substring(c,d)));
a.storage.debugGet("cookie",b,c);return c}}a.storage.printError("cookie",b);return null};this.remove=function(b){a.storage.debugRemove("cookie",b);this.set(b,"",-1)};this.set("_support_t","o");"o"==this.get("_support_t")&&(this.remove("_support_t"),this.support=!0)};a.storage.cookie=a.storage.type.cookie;
a.storage.type.localStorage=new function(){var b=!1;"localStorage"in window&&null!=window.localStorage&&(window.localStorage.setItem("_support_t","o"),"o"==window.localStorage.getItem("_support_t")&&(window.localStorage.removeItem("_support_t"),b=!0));this.support=b;this.engine="localStorage";this.get=function(c){if(b){var d=window.localStorage.getItem(c);if(a.isNone(d))return a.storage.printError(this.engine,c),null;d=a.parser.json.parse(d);a.storage.debugGet(this.engine,c,d);return d}return null};
this.set=function(c,d){b&&(a.storage.debugSet(this.engine,c,d),window.localStorage.setItem(c,a.parser.json.stringify(d)))};this.remove=function(c){b&&(a.storage.debugRemove(this.engine,c),window.localStorage.removeItem(c))}};
a.storage.type.globalStorage=new function(){var b=!1,c=window.location.hostname;a.isNone(window.globalStorage)||(window.globalStorage[c].setItem("_support_t","o"),"o"==window.globalStorage[c].getItem("_support_t")&&(window.globalStorage[c].removeItem("_support_t"),b=!0));this.support=b;this.engine="globalStorage";this.get=function(d){if(b){var f=window.globalStorage[c].getItem(d);if(a.isObject(f)&&!a.isNone(f.value))return f=a.parser.json.parse(f.value),a.storage.debugGet(this.engine,d,f),f;if(a.isNone(f))a.storage.printError(this.engine,
d);else return f=a.parser.json.parse(f),a.storage.debugGet(this.engine,d,f),f}return null};this.set=function(d,f){b&&(a.storage.debugSet(this.engine,d,f),window.globalStorage[c].setItem(d,a.parser.json.stringify(f)))};this.remove=function(d){b&&(a.storage.debugRemove(this.engine,d),window.globalStorage[c].removeItem(d))}};a.storage.type.memory=new function(){var b=a.mem.getInstance("app.storage");this.support=!0;this.engine="memory";this.get=b.get;this.set=b.set;this.remove=b.remove};
a.storage.memory=a.storage.type.memory;
a.storage.type.sessionStorage=new function(){var b=!1;"sessionStorage"in window&&!a.isNone(window.sessionStorage)&&(window.sessionStorage.setItem("_support_t","o"),"o"==window.sessionStorage.getItem("_support_t")&&(window.sessionStorage.removeItem("_support_t"),b=!0));this.support=b;this.engine="sessionStorage";this.get=function(c){if(b){var d=window.sessionStorage.getItem(c);if(a.isNone(d))return a.storage.printError(this.engine,c),null;d=a.parser.json.parse(d);a.storage.debugGet(this.engine,c,d);
return d}return null};this.set=function(c,d){b&&(a.storage.debugSet(this.engine,c,d),window.sessionStorage.setItem(c,a.parser.json.stringify(d)))};this.remove=function(c){b&&(a.storage.debugRemove(this.engine,c),window.sessionStorage.removeItem(c))}};
a.storage.type.userData=new function(){var b=!1;if(document.all)try{document.write('<input type="hidden" id="a_storage" style="display:none;behavior:url(\'#default#userData\')" />');var c=document.getElementById("a_storage");c.load("aUserDataStorage");c.setAttribute("_support_t","o");c.save("aUserDataStorage");"o"==c.getAttribute("_support_t")&&(c.removeAttribute("_support_t"),c.save("aUserDataStorage"),b=!0)}catch(d){b=!1}this.support=b;this.engine="userData";this.get=function(d){if(b){var h=a.parser.json.parse(c.getAttribute(d));
if(a.isNone(h))return a.storage.printError(this.engine,d),null;a.storage.debugGet(this.engine,d,h);return h}return null};this.set=function(d,h){b&&(a.storage.debugSet(this.engine,d,h),c.setAttribute(d,a.parser.json.stringify(h)),c.save("aUserDataStorage"))};this.remove=function(d){b&&(a.storage.debugRemove(this.engine,d),c.removeAttribute(d),c.save("aUserDataStorage"))}};
a.storage.type.flash=new function(){function b(b){if(!1==c&&!1==d){var m=document.createElement("div");m.id="flashstoragecontent";document.body.appendChild(m);var l={id:f,rootId:m.id,flashvars:{},params:{wmode:"transparent",menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always"}};a.loader.flash(a.url+"vendor/storage/flash/localStorage.swf",function(f){d=!0;f=document.getElementById(l.id);!0==f.testData()&&(c=!0,f.setDatabase("a_flashStorage"));!0==c&&a.isFunction(b)&&b(c)},
l)}else!0==c&&a.isFunction(b)&&b(c)}var c=!1,d=!1,f="flashstorage";this.support=function(){return c};this.ready=function(){return d};this.engine="flash";this.start=function(c){b(c)};this.get=function(b){this.start();if(!0==c){var d=document.getElementById(f).getData(b);if(a.isNone(d))return a.storage.printError(this.engine,b),null;a.storage.debugGet(this.engine,b,d);return d}return null};this.set=function(b,d){this.start();!0==c&&(a.storage.debugSet(this.engine,b,d),document.getElementById(f).setData(b,
d))};this.remove=function(b){this.start();if(!0==c)return a.storage.debugRemove(this.engine,b),document.getElementById(f).removeData(b)}};
a.storage.type.silverlight=new function(){function b(b){if(!1==c&&!1==d){var m=document.createElement("div");m.id="_silverlightstorage";document.body.appendChild(m);var l={id:f,rootId:m.id,params:[{name:"minRuntimeVersion",value:"2.0.31005.0"},{name:"autoUpgrade",value:"true"}]};a.loader.silverlight(a.url+"vendor/storage/silverlight/silverlightStorage.xap",function(f){d=!0;!0==document.getElementById(l.id).Content.store.testData()&&(c=!0);!0==c&&a.isFunction(b)&&b(c)},l)}else!0==c&&a.isFunction(b)&&
b(c)}var c=!1,d=!1,f="silverlightstorage";this.support=function(){return c};this.ready=function(){return d};this.engine="silverlight";this.start=function(c){b(c)};this.get=function(b){this.start();if(!0==c){var d=document.getElementById(f).Content.store.loadData(b);if(a.isNone(d)||"false"===d)return a.storage.printError(this.engine,b),null;d=a.parser.json.parse(d);a.storage.debugGet(this.engine,b,d);return d}return null};this.set=function(b,d){this.start();!0==c&&(a.storage.debugSet(this.engine,b,
d),document.getElementById(f).Content.store.saveData(b,a.parser.json.stringify(d)))};this.remove=function(b){this.start();!0==c&&(a.storage.debugRemove(this.engine,b),document.getElementById(f).Content.store.removeData(b))}};
a.storage.type.javafx=new function(){function b(b){!1==c&&!1==d?a.loader.javafx(a.url+"vendor/storage/javafx/JavaFXStorage.jar",function(){d=!0;!0==document.getElementById(f).Packages.javafxstorage.localStorage.testData()&&(c=!0,el.setDatabase("a_javafxStorage"));!0==c&&a.isFunction(b)&&b(c)},{code:"javafxstorage.Main",id:f}):!0==c&&a.isFunction(b)&&b(c)}var c=!1,d=!1,f="javafxstorage";this.support=function(){return c};this.ready=function(){return d};this.engine="javafx";this.start=function(c){b(c)};
this.get=function(b){this.start();if(!0==c){var d=document.getElementById(f).Packages.javafxstorage.localStorage.loadData(b);if(a.isNone(d)||"false"===d)return a.storage.printError(this.engine,b),null;d=a.parser.json.parse(d);a.storage.debugGet(this.engine,b,d);return d}return null};this.set=function(b,d){this.start();!0==c&&(a.storage.debugSet(this.engine,b,d),document.getElementById(f).Packages.javafxstorage.localStorage.saveData(b,a.parser.json.stringify(d)))};this.remove=function(b){this.start();
!0==c&&(a.storage.debugRemove(this.engine,b),document.getElementById(f).Packages.javafxstorage.localStorage.removeData(b))}};a.storage.temporary=function(){for(var b=["sessionStorage","cookie","memory"],c=0,d=b.length;c<d;++c){var f=b[c];if(a.storage.type[f].support)return a.console.log("a.storage.temporary: choosing storage "+a.storage.type[f].engine,3),a.message.dispatch("a.storage.temporary.change",{engine:f}),a.storage.type[f]}return null}();
a.storage.external=function(){function b(b,d){a.storage.external.ready=b.ready;a.storage.external.support=b.support;a.storage.external.engine=b.engine;a.storage.external.get=b.get;a.storage.external.set=b.set;a.storage.external.remove=b.remove;a.isFunction(d)&&d()}return{start:function(c){var d=a.storage.type.silverlight,f=a.storage.type.flash,h=a.storage.type.javafx;d.start(function(m){m?(a.console.log("a.storage.external: choosing storage silverlight",3),b(d,c)):f.start(function(d){d?(a.console.log("a.storage.external: choosing storage flash",
3),b(f,c)):h.start(function(d){d?(a.console.log("a.storage.external: choosing storage javafx",3),b(h,c)):a.console.warn("a.storage.external: choosing storage NONE AVAILABLE",3)})})})}}}();a.storage.persistent=function(){for(var b=["localStorage","globalStorage","userData","cookie"],c=0,d=b.length;c<d;++c){var f=b[c];if(a.storage.type[f].support)return a.console.log("a.storage.persistent: choosing storage "+a.storage.type[f].engine,3),a.message.dispatch("a.storage.persistent.change",{engine:f}),a.storage.type[f]}return null}();
null==a.storage.persistent&&(a.storage.persistent={},a.storage.persistent.support=!1,a.storage.persistent.engine=function(){return"none"},a.storage.persistent.get=function(){return null},a.storage.persistent.set=function(){},a.storage.persistent.remove=function(){});a.storage.support=a.storage.persistent.support;a.storage.engine=a.storage.persistent.engine;a.storage.get=a.storage.persistent.get;a.storage.set=a.storage.persistent.set;a.storage.remove=a.storage.persistent.remove;
(function(){function b(b){var d=a.storage.temporary.get(b);a.isNone(d)&&(d=a.storage.persistent.get(b));return d}a.parameter.addParameterType("temporary",a.storage.temporary.get);a.parameter.addParameterType("memory",a.storage.memory.get);a.parameter.addParameterType("persistent",a.storage.persistent.get);a.parameter.addParameterType("cookie",a.storage.cookie.get);a.parameter.addParameterType("storage",b);a.parameter.addParameterType("store",b)})();a.language=function(){function b(b,c){if(a.isNone(q[b]))return null;var d=q[b][c];if(a.isNone(d))a.console.info("a.language.__getRawTranslate: unable to find hash in dictionnary (value: "+c+", language: "+b+")",3);else return d;return null}function c(b){b=""+b;0>b.indexOf("{{")&&(b="{{"+b+"}}");b=b.replace("{{","\\{\\{");return b=b.replace("}}","\\}\\}")}function d(d,e){var g=b(m,d);if(!a.isNone(g)){var f=g;if(a.isArray(e))for(var h=0,k=e.length;h<k;++h)var l=c(h+1),l=RegExp(l,"gi"),f=f.replace(l,
e[h]);else for(h in e)l=c(h),l=RegExp(l,"gi"),f=f.replace(l,e[h]);if(0<=f.indexOf("{{")&&0<=f.indexOf("}}"))for(g=g.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],h=0,k=g.length;h<k;++h){var l=c(g[h]),q=g[h].replace("{{","").replace("}}",""),q=a.isNone(t[q])?null:t[q];a.isNone(q)||(l=RegExp(l,"gi"),f=f.replace(l,q))}return f=f.replace(/\{\{[a-z\-_0-9]+\}\}/gi,"")}return d}function f(b,c){a.isString(c)||(c=e);try{return b.getAttribute(c)}catch(d){return null}}function h(c){a.isNone(c)&&(c=document);var h=[];
a.isNone(f(c))||h.push(c);var l=[];c.querySelectorAll?(l=c.querySelectorAll("*["+e+"]"),0===l.length&&(l=c.querySelectorAll("*"))):l=c.getElementsByTagName("*");c=0;for(var q=l.length;c<q;++c)a.isNone(f(l[c]))||h.push(l[c]);l=0;for(c=h.length;l<c;++l){var u=h[l],q=f(u);if(!a.isNone(q)){var s=b(m,q),w={};a.isNone(s)&&(s=q);for(var s=s.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],x=0,C=s.length;x<C;++x){var G=s[x].replace("{{","").replace("}}",""),F=f(u,e+"-"+G);a.isNone(F)?(F="undefined"===t[G]?null:t[G],a.isNone(F)||
(w[G]=F)):w[G]=F}s=d(q,w);q=f(u,k);if(!a.isNone(q))try{u[q]=s}catch(E){}else if(u)if("INPUT"!==u.nodeName||"submit"!==u.type&&"reset"!==u.type)if("INPUT"===u.nodeName)try{u.placeholder=s}catch(ca){}else if("FIELDSET"===u.nodeName)u.title=s;else if(!a.isNone(u.text)&&document.all)u.text=s;else if(a.isNone(u.childNodes))u.innerHTML=s;else if(q=u.childNodes.length,w=document.createTextNode(s),"leave"===g){for(s=!1;q--;)x=u.childNodes[q],3===x.nodeType&&(s||(u.insertBefore(w,x),s=!0),u.removeChild(x));
s||u.appendChild(w)}else{for(;q--;)u.removeChild(u.firstChild);u.appendChild(w)}else u.value=s}}}var m="en",l=["en","fr","de","sp"],q={},g="leave",e="data-tr",k="data-tr-attr",t={},C=!a.isNone(a.storage)&&!0===a.storage.persistent.support;if(C){var w=a.storage.persistent.get("a_language_store_language"),x=a.storage.persistent.get("a_language_store_allowed");a.isString(w)&&(m=w,h(document));a.isArray(x)&&(l=x)}return{setBehavior:function(b){g="erase"===b?"erase":"leave"},getBehavior:function(){return g},
getCurrent:function(){return m},setCurrent:function(b,c){!a.isString(b)||0>=b.length?a.console.error("a.language.setCurrent: setting a non-string lang, or empty string, as default language: "+b,1):(a.isNone(c)&&(c=!0),a.contains(l,b)||a.console.warn("a.language.setCurrent: unable to find language in available language list (value: "+b+", available: "+l.join(";")+")",2),m=b,a.isNone(q[m])&&(q[m]={}),a.console.log("a.language.setCurrent: set current language to "+m+", request update ? "+c,3),a.message.dispatch("a.language.change",
{value:m}),C&&a.storage.persistent.set("a_language_store_language",m),this.translate(document,c))},getAllowed:function(){return l},setAllowed:function(b){a.isString(b)&&(b=[b]);if(a.isArray(b)){l=b;var c=0;for(b=b.length;c<b;++c)a.isNone(q[c])&&(q[c]={});C&&(a.console.log("a.language.setAllowed: set allowed language to "+l,3),a.storage.persistent.set("a_language_store_allowed",l))}else a.console.error("a.language.setAllowed: the allowed language must be an Array (value: "+b+")",1)},getSingleTranslation:function(b,
c){return d(b,c)},addSingleTranslation:function(b,c,d,e){a.isNone(q[b])&&(a.console.warn("a.language.addSingleTranslation: be carefull, the language you submit does not seems to exist in dict (value: "+b+", dict: "+l.join(";")+")",1),q[b]={});q[b][c]=d;this.translate(document,e)},addTranslation:function(b,c,d){a.isNone(q[b])&&(q[b]={});for(var e in c)q[b][e]=c[e];this.translate(document,d)},getTranslation:function(b){return a.isString(b)?q[b]:q},translate:function(b,c){!1!==c&&h(b)},addVariable:function(b,
c){a.console.log("a.language.addVariable: add global variable (key: "+b+", value: "+c+")",3);t[b]=c},getVariable:function(b){return"undefined"===t[b]?null:t[b]},removeVariable:function(b){a.console.log("a.language.removeVariable: remove global variable (key: "+b+")",3);delete t[b]},clear:function(){q={}}}}();a.form=function(){function b(b){b=a.dom.el(b);var c=b.attribute("name");if(a.isNone(c)||""===c)if(c=b.attribute("id"),a.isNone(c)||""===c)c=b.attribute("class");return c}function c(b){b=b.tag(["input","textarea","select"]).getElements();for(var c=b.length;c--;){var d=b[c];!d.type||"submit"!=d.type&&"reset"!=d.type&&"image"!=d.type||b.splice(c,1)}return b}function d(b,c,d,e){var f="";a.isNone(d)||""===d||(f=b["data-error-"+d]||null);if(a.isNone(f)||""===f)f=b["data-error"]||null;if(a.isNone(f)||""===
f){var h;h="A data-error tag has not been setted for "+(c+" with value "+e+"n can't ")+"proceed error message";a.console.warn(h,3)}a.isNone(a.language)||(f=a.language.getSingleTranslation(f,{name:d,value:e}));return{el:b,id:c,error:f}}var f="text search url tel email password".split(" "),h="number range date datetime datetime-local month time week".split(" "),m=f.concat(h,["number","checkbox","radio","file"]);h.concat(f,["color","checkbox","file","hidden","radio"]);return{skipNoValidate:!1,get:function(d){d=
a.dom.el(d);d=c(d);for(var f={},g=d.length;g--;){var e=d[g],h=b(e),m;m=e;var C=m.type||"",w=m.tagName.toLowerCase();m="input"===w||"textarea"===w?"checkbox"===C?m.checked:m.value:"select"===w?m.options[m.selectedIndex]?m.options[m.selectedIndex].value:null:void 0;!a.isNone(h)&&h&&(C=!1,a.isNone(e)||"radio"!==e.type?C=!0:e.checked&&(C=!0),C&&(f[h]=""===m?null:m))}a.console.log("a.form.get: found element list:",3);a.console.log(f,3);return f},validate:function(l){l=a.dom.el(l);if(!1===this.skipNoValidate&&
!a.isNone(l.get(0).novalidate))return[];l=c(l);for(var q=[],g="number range text search url email password color checkbox hidden radio".split(" "),e=RegExp("^[a-z]{2,}:\\/\\/([a-z0-9\\/\\.\\-_~+;:&=]{2,})$","gi"),k=RegExp("^.{2,}@.*\\.[a-z0-9]{2,}$","gi"),t=RegExp("^#([a-f]{3}|[a-f]{6})$","gi"),C=l.length;C--;){var w=l[C],x=w.tagName.toLowerCase();if("select"!=x&&a.isNone(w.novalidate)){var r=w.type,y=b(w),v=w.value,B=w.required,u=w.pattern,s=w.min,D=w.max,z=w.step,s=a.isNone(s)||""==s?null:parseFloat(s),
D=a.isNone(D)||""==D?null:parseFloat(D),z=a.isNone(z)||""==z?null:parseFloat(z);"input"!=x||a.contains(g,r)||a.isNone(r)?"number"!=r&&"range"!=r||a.isNumber(v)?"url"!=r||e.test(v)?"email"!=r||k.test(v)?"color"!=r||t.test(v)?null!==B&&a.contains(m,r)&&(""===v||a.isNone(v))?q.push(d(w,y,"required",v)):null===u||"textarea"!==x&&!a.contains(f,r)&&!a.isNone(r)||RegExp(u).test(v)?null===s&&null==D&&null==z||!a.contains(h,r)||(x=parseFloat(v),null!==s&&x<s?q.push(d(w,y,"min",v)):null!==D&&x>D?q.push(d(w,
y,"max",v)):null!==z&&0!==x%z&&q.push(d(w,y,"step",v))):q.push(d(w,y,"pattern",v)):q.push(d(w,y,null,v)):q.push(d(w,y,null,v)):q.push(d(w,y,null,v)):q.push(d(w,y,null,v)):(w="Type "+r+" for input "+y,w+=" not recognized or not supported",a.console.warn(w,3))}}a.console.log("a.form.validate: found error list:",3);a.console.log(q,3);return q},validateAndGet:function(b){b={errorList:this.validate(b),error:!1,contentList:this.get(b)};0<b.errorList.length&&(b.error=!0);return b}}}();a.state=new function(){function b(b,c,d,f,h){var l=a.callback.synchronizer(null,d,f);a.each(c,function(c){l.addCallback(function(){var d=this.next,e=this.error,f=a.pluck(a.state.chain.get(b),"fct"),d=a.callback.chainer(f,d,e);d.scope=c;d.resultScope=l;d.start()})});l.resultScope=h;l.start()}function c(b){for(var c=[b];b.parent;)c.push(b.parent),b=b.parent;return c}function d(b){var d=[],f;for(f in l){var h=l[f];if(h._storm.hash&&a.isString(h._storm.hash)){var m=[];h._storm.isRegexHash||h._storm.hash!=
b?RegExp(h._storm.hash,"").test(b)&&(m=c(h)):m=c(h);a:{for(h=m.length;h--;)if(!1===m[h]._storm.acl){h=!1;break a}h=!0}h&&d.push(m)}}return d}function f(c,d){var f=a.groupBy(c,function(b){return-b._storm.level}),h=a.callback.chainer(null,d,null);a.each(f,function(c){h.addCallback(function(){b("unload",c,this.next,this.error,h)})});h.start()}function h(c,d){var f=a.groupBy(c,function(b){return b._storm.level}),h=a.callback.chainer(null,d,null);a.each(f,function(c){h.addCallback(function(){b("load",
c,this.next,this.error,h)})});h.start()}function m(b,c){if(!c||a.isNone(c))return!0;var d=b.acl||{};return a.isNumber(d.minimum)&&a.acl.isRefused(d.minimum,c)||a.isNumber(d.maximum)&&a.acl.isRefused(c,d.maximum)||a.isArray(d.allowed)&&!a.contains(d.allowed,c)||a.isArray(d.refused)&&a.contains(d.refused,c)?!1:!0}var l={},q=[];a.hash.bind("a.hash",function(b){a.message.dispatch("a.state.begin",{});loading=a.uniq(a.flatten(d(b.value)));unloading=q;diff1=a.difference(loading,unloading);diff2=a.difference(unloading,
loading);var c=a.uniq(a.flatten(a.intersection(loading,diff1)));b=a.flatten(a.intersection(unloading,diff2));f(b,function(){q=c;h(c,function(){a.message.dispatch("a.state.end",{})})})});a.acl.bind("change",function(b){a.each(l,function(c){c._storm.acl=m(c,b)})});this.add=function(b){if(a.isObject(b)){b.id&&null===this.get(b.id)||(b.id=a.uniqueId("state_"));var c=b.children||null;b.children=null;b._storm={parent:b.parent||null};if(b.parent&&(a.isString(b.parent)||a.isNumber(b.parent))){var d=this.get(b.parent);
d?(b.parent=d,b._storm.level=d._storm.level+1,d.children&&a.isArray(d.children)||(d.children=[]),d.children.push(b)):a.console.error("a.state.add: unable to found parent "+b.parent+" for state "+b.id)}else b.parent=null,b._storm.level=0;b._storm.data=b.data||"";b._storm.option=b.option||null;b.hash&&a.isString(b.hash)&&(b._storm.isRegexHash=!1,0<=b.hash.indexOf("{{")&&0<=b.hash.indexOf("}}")&&(b._storm.isRegexHash=!0),b._storm.hash=a.parameter.convert(b.hash));b._storm.acl=m(b,a.acl.getCurrentRole());
b.data=null;delete b.option;l[b.id]=b;a.isArray(c)?a.each(c,function(c){c.parent=b.id;this.add(c)},this):a.isObject(c)&&this.add(c)}};this.remove=function(b){var c=this.get(b);c&&a.isArray(c.children)&&a.each(c.children,function(b){this.remove(b)},this);delete l[b]};this.clear=function(){l={};q=[]};this.get=function(b){return l[b]||null};this.load=function(b){if(b=this.get(b)){b=c(b);var d=a.uniq(q,b);h(d,function(){q=q.concat(d)})}};this.unload=function(b){if(b=this.get(b))b=c(b),f(b)};this.hashExists=
function(b){return 0<d(b).length}};a.state.chain=new function(){function b(b){return!0==b||1==b||"loading"==b||"load"==b?c:d}var c=[],d=[];this.add=function(c,d,m,l){l=l||{};c=b(c);d={name:d,fct:m,scope:l.scope||null};m=a.pluck(c,"name");var q=m.length;l.after&&a.contains(m,l.after)?q=a.indexOf(m,l.after)+1:l.before&&a.contains(m,l.before)?q=a.indexOf(m,l.before):l.position<=m.length&&(q=l.position);0>q&&(q=0);q>=m.length?c.push(d):c.splice(q,0,d)};this.remove=function(c,d){for(var m=b(c),l=m.length;l--;)m[l].name==d&&m.splice(l,1)};
this.get=function(c){return b(c)}};
(function(){function b(){var b=a.toArray(arguments),c=a.last(b),b=a.initial(b);c.next.apply(this,b)}function c(b,c,d){return function(l){a.loader[b](c,function(b){a.isFunction(d)&&d(b);l.done()})}}function d(b,c,d){b=b.include;var l=c+"_"+d;d=c+d.charAt(0).toUpperCase()+d.slice(1);c=b[l]||b[d]||b[c+"_default"]||b[c+"Default"]||b[c]||[];c=a.isString(c)?[c]:a.isArray(c)?c:[];for(d=c.length;d--;)c[d]=c[d];return c}a.state.chain.add(!0,"preLoad",function(){this.preLoad?this.preLoad.apply(this,arguments):
b.apply(this,arguments)});a.state.chain.add(!0,"title",function(){this.title&&(document.title=this.title);b.apply(this,arguments)});a.state.chain.add(!0,"include",function(){if(this.include){var f=a.callback.synchronizer(null),h=a.acl.getCurrentRole(),m=this.include.partials,l=d(this,"css",h),q=d(this,"js",h),g=d(this,"html",h);d(this,"translate",h);a.each(l,function(b){f.addCallback(function(){c("css",b)})});a.each(q,function(b){f.addCallback(function(){c("js",b)})});f.addCallback(function(b){a.template.get(g[0],
{},null,null)});a.each(m,function(b,c){f.addCallback(function(d){a.template.partial(c,b,d.next,d.error)})})}b.apply(this,arguments)});a.state.chain.add(!0,"converter",function(){this.converter&&this.converter.apply(this,this.data);b.apply(this,arguments)});a.state.chain.add(!0,"content",function(){b.apply(this,arguments)});a.state.chain.add(!0,"load",function(){this.load?this.load.apply(this,arguments):b.apply(this,arguments)});a.state.chain.add(!0,"bind",function(){a.each(this.bind||this.bindings||
this.events||null,function(b,c){var d=c.split("|");2==d.length&&a.dom.query(d[0]).event.bind(d[1],b)});b.apply(this,arguments)});a.state.chain.add(!0,"postLoad",function(){this.postLoad?this.postLoad.apply(this,arguments):b.apply(this,arguments)});a.state.chain.add(!1,"preUnload",function(){this.preUnload?this.preUnload.apply(this,arguments):b.apply(this,arguments)});a.state.chain.add(!1,"unbind",function(){a.each(this.bind||this.bindings||this.events||null,function(b,c){var d=c.split("|");2==d.length&&
a.dom.query(d[0]).event.unbind(d[1],b)});b.apply(this,arguments)});a.state.chain.add(!1,"content",function(){var c=null;a.isFunction(this.entry)?c=a.dom.el(this.entry()):a.isString(this.entry)&&(c=a.dom.query(this.entry));c&&("replace"==this.type?c.empty():"hide"==this.type&&c.css("display","none"));b.apply(this,arguments)});a.state.chain.add(!1,"unload",function(){this.unload?this.unload.apply(this,arguments):b.apply(this,arguments)});a.state.chain.add(!1,"postUnload",function(){this.postUnload?
this.postUnload.apply(this,arguments):b.apply(this,arguments)})})();a.binding=function(){function b(b,c){c=c||m;var d=a.dom.el(b).attribute(c);return a.isString(d)?d:0<d.length?d[0]:null}function c(c,d,f){c=this;d=b(c);f=c.value;for(var h=["data-inner-bind-"+d,"a-inner-bind-"+d,"inner-bind-"+d],q=h.slice(),w=h.slice(),h=q.length,w=w.length;h--;)q[h]+="-start";for(;w--;)q[w]+="-stop";a.message.dispatch("a.binding",{name:d,value:f});a.dom.attr(m,d).each(function(b){c&&this===c||(a.contains(l,this.nodeName)?this.value=b:this.innerHTML=b)},f);a.dom.attr(q).each(function(b){},
f)}function d(d){d=d||document;var e=[];a.dom.el(d).attr(m).each(function(){a.contains(l,this.nodeName)&&(e.push(this),b(this),a.dom.el(this).bind("change input keydown",c),c.call(this))});return e}function f(b){b=b||document;var d=[];a.dom.el(b).attr(m).each(function(){a.contains(l,this.nodeName)&&(d.push(this),a.dom.el(this).unbind("change input keydown",c))});return d}function h(b){b=b||document;var c=/\{\{\s*(\w+)\s*\}\}/gi;a.dom.el(b).all().each(function(){var b;if(a.contains(l,this.nodeName))b=
this.value;else{b="";for(var d=0,f=this.childNodes.length;d<f;++d){var g=this.childNodes[d];3==g.nodeType&&(b+=g.nodeValue)}}-1!=b.indexOf("{{")&&(-1!=b.indexOf("}}")&&c.test(b))&&(b.match(c),b.replace(c,"\u200c\u200c\u200c\u200c"))})}var m=["data-bind","a-bind","bind"],l=["INPUT","TEXTAREA"],q={};return{bind:function(b){return d(b)},unbind:function(b){return f(b)},manual:function(b,d){c(null,b,d)},refresh:function(){unbind(document);return d(document)},registerConverter:function(b,c){a.isFunction(c)&&
(q[b]=c)},getConverter:function(b){return q[b]||null},removeConverter:function(b){delete q[b]},registerInnerBind:function(b){h(b)}}}();a.model=function(b,c,d){return function(){var f=a.extend(new a.modelInstance(b,a.clone(c),a.clone(d)),new a.eventEmitter("a.model"));f.init();return f}};a.modelInstance=function(b,c,d){this.name=b||"";this.properties={};this.snapshot={};this.requests={};a.isObject(c)&&!a.isNone(c)&&(this.properties=c);a.isObject(d)&&!a.isNone(d)&&(this.requests=d)};
a.modelInstance.prototype={get:function(b){return(b=this.properties[b])?b.value:null},list:function(){var b=[],c;for(c in this.properties)b.push(c);return b},set:function(b,c){var d=this.properties[b];if(d){var f=d.check,h=d.apply,m=d.event,l=d.transform,q=d.validate,g=d.value;c=a.isFunction(l)?l(c,g):c;!1===d.nullable&&a.isNone(c)||(a.isString(f)&&f.toLowerCase()!==typeof c||a.isFunction(q)&&!0!==q(c,g))||(d.value=c,a.isFunction(h)&&h(c,g),m&&this.dispatch(m,{value:c,old:g}))}},has:function(b){return b in
this.properties},init:function(){for(var b in this.properties)this.properties[b].value=this.properties[b].init||null;this.takeSnapshot();this.dispatch("init",{})},toJSON:function(){var b={},c;for(c in this.properties)b[c]=this.get(c);return a.parser.json.stringify(b)},fromJSON:function(b){a.isString(b)&&0<b.length&&(b=a.parser.json.parse(b));for(var c in this.properties)c in b&&(this.properties[c].value=b[c])},takeSnapshot:function(){this.snapshot={};for(var b in this.properties)this.snapshot[b]=
this.get(b);return this.getSnapshot()},getSnapshot:function(){return this.snapshot},differenceSnapshot:function(b){var c=this.snapshot,d=this.properties,f={},h;for(h in c){var m=c[h],l=d[h].value;if(l!==m||!0===d[h].needed)f[h]=b?l:{value:l,old:m}}return f},request:function(b){}};a.template={_part:{},_tmpl:{},partial:function(b,c,d,f){var h=a.isObject(window.Handlebars)?window.Handlebars:null;if(h){var m=this._part;if(a.isString(m[b]))return a.console.log("a.template.partial: loading "+b+" from cache",3),m[b];f&&!0==f.noloading?(a.console.log("a.template.partial: loading "+b+" from parameter",3),m[b]=c,h.registerPartial(b,c),a.isFunction(d)&&d(b,c)):a.loader.html(c,function(c){a.console.log("a.template.partial: loading "+b+" from url",3);m[b]=c;h.registerPartial(b,c);a.isFunction(d)&&
d(b,c)})}else a.console.error("a.template.partial: unable to find Handlebars.JS !",1)},get:function(b,c,d,f){var h=a.isObject(window.Handlebars)?window.Handlebars:null;if(h){var m=b.replace(/[^a-zA-Z0-9\\-]/g,"_"),l="a_tmpl_"+m,q=function(b,c,d){a.isFunction(b)&&(a.isNone(h.to_html)?(c=h.compile(a.template._tmpl[c]),b(c(d))):b(h.to_html(a.template._tmpl[c],d)))};a.isString(this._tmpl[l])?(a.console.log("a.template.get: loading "+l+" from cache",3),q(d,l,c)):document.getElementById(l)?(this._tmpl[l]||
(a.console.log("a.template.get: loading "+l+" from inner html page",3),this._tmpl[l]=document.getElementById(l).innerHTML),q(d,l,c)):document.getElementById(m)?(this._tmpl[m]||(a.console.log("a.template.get: loading "+m+" from inner html page",3),this._tmpl[m]=document.getElementById(m).innerHTML),q(d,m,c)):(a.console.log("a.template.get: loading "+b+" from external resource",3),a.loader.html(b,function(b,e,f){a.template._tmpl[l]||(a.template._tmpl[l]=b);q(d,l,c)},{},f))}else a.console.error("a.template.get: unable to find Handlebars.JS !",
1)},htmlToDom:function(b){var c=document.createElement("div"),d=[];c.innerHTML=b.replace(/^\s+|\s+$/g,"");a.dom.el(c).children([1,3]).each(function(){d.push(this)});return d},remove:function(b,c){a.dom.el(b).empty();a.isFunction(c)&&c()},append:function(b,c,d){var f=this.htmlToDom(c);a.isObject(f)&&a.dom.el(b).append(f);a.isNone(a.language)||a.language.translate(b);a.isFunction(d)&&d(c)},replace:function(b,c,d){this.remove(b,function(){a.template.append(b,c,d)})}};a.translate=a.i18n=function(){function b(b,c){return b.getAttribute(c)||b.getAttribute("a-"+c)||b.getAttribute("data-"+c)||""}function c(c,d){var e=b(c,C);if(e&&""!=e)try{c[e]=d}catch(f){}else if("INPUT"==c.nodeName)if("submit"==c.type||"reset"==c.type)c.value=d;else try{c.placeholder=d}catch(g){}else if("FIELDSET"===c.nodeName)c.title=d;else if(""!==b(c,w))a.dom.el(c).empty().append(document.createTextNode(d));else{for(var e=d.split("<tag>"),h=0,k=e.length,l=0,m=c.childNodes.length;l<m&&h<k;++l){var q=
c.childNodes[l];3==q.nodeType&&(q.nodeValue=e[h],h++)}if(h!=k)for(;h<k;++h)c.appendChild(document.createTextNode(e[h]));if(l!=m)for(;m-- >l;)q=c.childNodes[m],3==q.nodeType&&c.removeChild(q)}}function d(d){d=d||document;d=a.dom.el(d);var f=e[g];d.attr(t+",a-"+t+",data-"+t).each(function(){var d=b(this,t),e=f[d]||"";""===e&&(e=d);for(var e=e.match(x),e=a.match(e,function(b){return b.replace("{{","").replace("}}","")}),g={},h=e.length;h--;){var k=e[h],l=b(this,t+"-"+k);l&&(g[k]=l)}d=q(d,g,!0);c(this,
d)})}function f(){return g}function h(b,c){g=b;!1!==c&&d()}function m(b,c,f,g){e[b]||(e[b]={});e[b][c]=f;!1!==g&&d()}function l(b,c,f){if(null===c)delete e[b];else for(var g in c)m(b,g,c[g],!1);!1!==f&&d()}function q(b,c,d){function f(b){for(var d=[c,k],e=0;2>e;++e)for(var g in d[e])if(b==="{{"+g+"}}")return d[e][g];return""}b=e[g][b]||null;if(a.isNull(b))return"";if(!1===d)return b;d=b.match(x)||[];for(var h=0,l=d.length;h<l;++h){var m=d[h];b=b.replace(m,f(m))}return b.replace(x,"")}var g="en-US",
e={},k={},t="tr",C="custom-tr",w="erase-tr",x=/\{\{[a-z0-9\-_]+\}\}/gi;if(a.storage&&a.storage.persistent.support){var r=a.storage.persistent.getItem("_app.language");a.isString(r)&&0<r.length&&(g=r,d())}return{getLanguage:f,getCurrent:f,setLanguage:h,setCurrent:h,translate:d,i18n:d,getDictionnary:function(b){return b?e[b]||{}:e},getGlobalVariable:function(b){return k[b]||""},setGlobalVariable:function(b,c){k[b]=c},add:m,addTranslation:m,get:q,getTranslation:q,set:l,setTranslation:l}}();
