(function(){var c=this,b=c._,d={},f=Array.prototype,h=Object.prototype,n=f.push,l=f.slice,t=f.concat,s=h.toString,m=h.hasOwnProperty,w=f.forEach,u=f.map,p=f.reduce,v=f.reduceRight,e=f.filter,q=f.every,k=f.some,x=f.indexOf,A=f.lastIndexOf,h=Array.isArray,B=Object.keys,r=Function.prototype.bind,g=function(b){return b instanceof g?b:this instanceof g?(this._wrapped=b,void 0):new g(b)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=g),exports._=g):c._=
g;g.VERSION="1.5.2";var z=g.each=g.forEach=function(b,e,c){if(null!=b)if(w&&b.forEach===w)b.forEach(e,c);else if(b.length===+b.length)for(var k=0,m=b.length;m>k&&e.call(c,b[k],k,b)!==d;k++);else for(var q=g.keys(b),k=0,m=q.length;m>k&&e.call(c,b[q[k]],q[k],b)!==d;k++);};g.map=g.collect=function(b,e,c){var g=[];return null==b?g:u&&b.map===u?b.map(e,c):(z(b,function(b,F,k){g.push(e.call(c,b,F,k))}),g)};g.reduce=g.foldl=g.inject=function(b,e,c,k){var d=2<arguments.length;if(null==b&&(b=[]),p&&b.reduce===
p)return k&&(e=g.bind(e,k)),d?b.reduce(e,c):b.reduce(e);if(z(b,function(b,F,g){d?c=e.call(k,c,b,F,g):(c=b,d=!0)}),!d)throw new TypeError("Reduce of empty array with no initial value");return c};g.reduceRight=g.foldr=function(b,e,c,k){var d=2<arguments.length;if(null==b&&(b=[]),v&&b.reduceRight===v)return k&&(e=g.bind(e,k)),d?b.reduceRight(e,c):b.reduceRight(e);var m=b.length;if(m!==+m)var q=g.keys(b),m=q.length;if(z(b,function(g,p,f){p=q?q[--m]:--m;d?c=e.call(k,c,b[p],p,f):(c=b[p],d=!0)}),!d)throw new TypeError("Reduce of empty array with no initial value");
return c};g.find=g.detect=function(b,e,c){var g;return D(b,function(b,F,k){return e.call(c,b,F,k)?(g=b,!0):void 0}),g};g.filter=g.select=function(b,c,g){var k=[];return null==b?k:e&&b.filter===e?b.filter(c,g):(z(b,function(b,e,F){c.call(g,b,e,F)&&k.push(b)}),k)};g.reject=function(b,e,c){return g.filter(b,function(b,F,g){return!e.call(c,b,F,g)},c)};g.every=g.all=function(b,e,c){e||(e=g.identity);var k=!0;return null==b?k:q&&b.every===q?b.every(e,c):(z(b,function(b,F,g){return(k=k&&e.call(c,b,F,g))?
void 0:d}),!!k)};var D=g.some=g.any=function(b,e,c){e||(e=g.identity);var m=!1;return null==b?m:k&&b.some===k?b.some(e,c):(z(b,function(b,F,g){return m||(m=e.call(c,b,F,g))?d:void 0}),!!m)};g.contains=g.include=function(b,e){return null==b?!1:x&&b.indexOf===x?-1!=b.indexOf(e):D(b,function(b){return b===e})};g.invoke=function(b,e){var c=l.call(arguments,2),k=g.isFunction(e);return g.map(b,function(b){return(k?e:b[e]).apply(b,c)})};g.pluck=function(b,e){return g.map(b,function(b){return b[e]})};g.where=
function(b,e,c){return g.isEmpty(e)?c?void 0:[]:g[c?"find":"filter"](b,function(b){for(var c in e)if(e[c]!==b[c])return!1;return!0})};g.findWhere=function(b,e){return g.where(b,e,!0)};g.max=function(b,e,c){if(!e&&g.isArray(b)&&b[0]===+b[0]&&65535>b.length)return Math.max.apply(Math,b);if(!e&&g.isEmpty(b))return-1/0;var k={computed:-1/0,value:-1/0};return z(b,function(b,g,F){g=e?e.call(c,b,g,F):b;g>k.computed&&(k={value:b,computed:g})}),k.value};g.min=function(b,e,c){if(!e&&g.isArray(b)&&b[0]===+b[0]&&
65535>b.length)return Math.min.apply(Math,b);if(!e&&g.isEmpty(b))return 1/0;var k={computed:1/0,value:1/0};return z(b,function(b,g,F){g=e?e.call(c,b,g,F):b;g<k.computed&&(k={value:b,computed:g})}),k.value};g.shuffle=function(b){var e,c=0,k=[];return z(b,function(b){e=g.random(c++);k[c-1]=k[e];k[e]=b}),k};g.sample=function(b,e,c){return 2>arguments.length||c?b[g.random(b.length-1)]:g.shuffle(b).slice(0,Math.max(0,e))};var C=function(b){return g.isFunction(b)?b:function(e){return e[b]}};g.sortBy=function(b,
e,c){var k=C(e);return g.pluck(g.map(b,function(b,e,g){return{value:b,index:e,criteria:k.call(c,b,e,g)}}).sort(function(b,e){var c=b.criteria,g=e.criteria;if(c!==g){if(c>g||void 0===c)return 1;if(g>c||void 0===g)return-1}return b.index-e.index}),"value")};var y=function(b){return function(e,c,k){var d={},m=null==c?g.identity:C(c);return z(e,function(c,g){var q=m.call(k,c,g,e);b(d,q,c)}),d}};g.groupBy=y(function(b,e,c){(g.has(b,e)?b[e]:b[e]=[]).push(c)});g.indexBy=y(function(b,e,c){b[e]=c});g.countBy=
y(function(b,e){g.has(b,e)?b[e]++:b[e]=1});g.sortedIndex=function(b,e,c,k){c=null==c?g.identity:C(c);e=c.call(k,e);for(var d=0,m=b.length;m>d;){var q=d+m>>>1;c.call(k,b[q])<e?d=q+1:m=q}return d};g.toArray=function(b){return b?g.isArray(b)?l.call(b):b.length===+b.length?g.map(b,g.identity):g.values(b):[]};g.size=function(b){return null==b?0:b.length===+b.length?b.length:g.keys(b).length};g.first=g.head=g.take=function(b,e,c){return null==b?void 0:null==e||c?b[0]:l.call(b,0,e)};g.initial=function(b,
e,c){return l.call(b,0,b.length-(null==e||c?1:e))};g.last=function(b,e,c){return null==b?void 0:null==e||c?b[b.length-1]:l.call(b,Math.max(b.length-e,0))};g.rest=g.tail=g.drop=function(b,e,c){return l.call(b,null==e||c?1:e)};g.compact=function(b){return g.filter(b,g.identity)};var E=function(b,e,c){return e&&g.every(b,g.isArray)?t.apply(c,b):(z(b,function(b){g.isArray(b)||g.isArguments(b)?e?n.apply(c,b):E(b,e,c):c.push(b)}),c)};g.flatten=function(b,e){return E(b,e,[])};g.without=function(b){return g.difference(b,
l.call(arguments,1))};g.uniq=g.unique=function(b,e,c,k){g.isFunction(e)&&(k=c,c=e,e=!1);c=c?g.map(b,c,k):b;var d=[],m=[];return z(c,function(c,k){(e?k&&m[m.length-1]===c:g.contains(m,c))||(m.push(c),d.push(b[k]))}),d};g.union=function(){return g.uniq(g.flatten(arguments,!0))};g.intersection=function(b){var e=l.call(arguments,1);return g.filter(g.uniq(b),function(b){return g.every(e,function(e){return 0<=g.indexOf(e,b)})})};g.difference=function(b){var e=t.apply(f,l.call(arguments,1));return g.filter(b,
function(b){return!g.contains(e,b)})};g.zip=function(){for(var b=g.max(g.pluck(arguments,"length").concat(0)),e=Array(b),c=0;b>c;c++)e[c]=g.pluck(arguments,""+c);return e};g.object=function(b,e){if(null==b)return{};for(var c={},g=0,k=b.length;k>g;g++)e?c[b[g]]=e[g]:c[b[g][0]]=b[g][1];return c};g.indexOf=function(b,e,c){if(null==b)return-1;var k=0,d=b.length;if(c){if("number"!=typeof c)return k=g.sortedIndex(b,e),b[k]===e?k:-1;k=0>c?Math.max(0,d+c):c}if(x&&b.indexOf===x)return b.indexOf(e,c);for(;d>
k;k++)if(b[k]===e)return k;return-1};g.lastIndexOf=function(b,e,c){if(null==b)return-1;var k=null!=c;if(A&&b.lastIndexOf===A)return k?b.lastIndexOf(e,c):b.lastIndexOf(e);for(c=k?c:b.length;c--;)if(b[c]===e)return c;return-1};g.range=function(b,e,c){1>=arguments.length&&(e=b||0,b=0);c=arguments[2]||1;for(var k=Math.max(Math.ceil((e-b)/c),0),g=0,d=Array(k);k>g;)d[g++]=b,b+=c;return d};var J=function(){};g.bind=function(b,e){var c,k;if(r&&b.bind===r)return r.apply(b,l.call(arguments,1));if(!g.isFunction(b))throw new TypeError;
return c=l.call(arguments,2),k=function(){if(!(this instanceof k))return b.apply(e,c.concat(l.call(arguments)));J.prototype=b.prototype;var g=new J;J.prototype=null;var d=b.apply(g,c.concat(l.call(arguments)));return Object(d)===d?d:g}};g.partial=function(b){var e=l.call(arguments,1);return function(){return b.apply(this,e.concat(l.call(arguments)))}};g.bindAll=function(b){var e=l.call(arguments,1);if(0===e.length)throw Error("bindAll must be passed function names");return z(e,function(e){b[e]=g.bind(b[e],
b)}),b};g.memoize=function(b,e){var c={};return e||(e=g.identity),function(){var k=e.apply(this,arguments);return g.has(c,k)?c[k]:c[k]=b.apply(this,arguments)}};g.delay=function(b,e){var c=l.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},e)};g.defer=function(b){return g.delay.apply(g,[b,1].concat(l.call(arguments,1)))};g.throttle=function(b,e,c){var k,g,d,m=null,q=0;c||(c={});var p=function(){q=!1===c.leading?0:new Date;m=null;d=b.apply(k,g)};return function(){var f=new Date;
q||!1!==c.leading||(q=f);var x=e-(f-q);return k=this,g=arguments,0>=x?(clearTimeout(m),m=null,q=f,d=b.apply(k,g)):m||!1===c.trailing||(m=setTimeout(p,x)),d}};g.debounce=function(b,e,c){var k,g,d,m,q;return function(){d=this;g=arguments;m=new Date;var p=function(){var f=new Date-m;e>f?k=setTimeout(p,e-f):(k=null,c||(q=b.apply(d,g)))},f=c&&!k;return k||(k=setTimeout(p,e)),f&&(q=b.apply(d,g)),q}};g.once=function(b){var e,c=!1;return function(){return c?e:(c=!0,e=b.apply(this,arguments),b=null,e)}};g.wrap=
function(b,e){return function(){var c=[b];return n.apply(c,arguments),e.apply(this,c)}};g.compose=function(){var b=arguments;return function(){for(var e=arguments,c=b.length-1;0<=c;c--)e=[b[c].apply(this,e)];return e[0]}};g.after=function(b,e){return function(){return 1>--b?e.apply(this,arguments):void 0}};g.keys=B||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var e=[],c;for(c in b)g.has(b,c)&&e.push(c);return e};g.values=function(b){for(var e=g.keys(b),c=e.length,k=Array(c),
d=0;c>d;d++)k[d]=b[e[d]];return k};g.pairs=function(b){for(var e=g.keys(b),c=e.length,k=Array(c),d=0;c>d;d++)k[d]=[e[d],b[e[d]]];return k};g.invert=function(b){for(var e={},c=g.keys(b),k=0,d=c.length;d>k;k++)e[b[c[k]]]=c[k];return e};g.functions=g.methods=function(b){var e=[],c;for(c in b)g.isFunction(b[c])&&e.push(c);return e.sort()};g.extend=function(b){return z(l.call(arguments,1),function(e){if(e)for(var c in e)b[c]=e[c]}),b};g.pick=function(b){var e={},c=t.apply(f,l.call(arguments,1));return z(c,
function(c){c in b&&(e[c]=b[c])}),e};g.omit=function(b){var e={},c=t.apply(f,l.call(arguments,1)),k;for(k in b)g.contains(c,k)||(e[k]=b[k]);return e};g.defaults=function(b){return z(l.call(arguments,1),function(e){if(e)for(var c in e)void 0===b[c]&&(b[c]=e[c])}),b};g.clone=function(b){return g.isObject(b)?g.isArray(b)?b.slice():g.extend({},b):b};g.tap=function(b,e){return e(b),b};var K=function(b,e,c,k){if(b===e)return 0!==b||1/b==1/e;if(null==b||null==e)return b===e;b instanceof g&&(b=b._wrapped);
e instanceof g&&(e=e._wrapped);var d=s.call(b);if(d!=s.call(e))return!1;switch(d){case "[object String]":return b==String(e);case "[object Number]":return b!=+b?e!=+e:0==b?1/b==1/e:b==+e;case "[object Date]":case "[object Boolean]":return+b==+e;case "[object RegExp]":return b.source==e.source&&b.global==e.global&&b.multiline==e.multiline&&b.ignoreCase==e.ignoreCase}if("object"!=typeof b||"object"!=typeof e)return!1;for(var m=c.length;m--;)if(c[m]==b)return k[m]==e;var m=b.constructor,q=e.constructor;
if(m!==q&&!(g.isFunction(m)&&m instanceof m&&g.isFunction(q)&&q instanceof q))return!1;c.push(b);k.push(e);m=0;q=!0;if("[object Array]"==d){if(m=b.length,q=m==e.length)for(;m--&&(q=K(b[m],e[m],c,k)););}else{for(var p in b)if(g.has(b,p)&&(m++,!(q=g.has(e,p)&&K(b[p],e[p],c,k))))break;if(q){for(p in e)if(g.has(e,p)&&!m--)break;q=!m}}return c.pop(),k.pop(),q};g.isEqual=function(b,e){return K(b,e,[],[])};g.isEmpty=function(b){if(null==b)return!0;if(g.isArray(b)||g.isString(b))return 0===b.length;for(var e in b)if(g.has(b,
e))return!1;return!0};g.isElement=function(b){return!(!b||1!==b.nodeType)};g.isArray=h||function(b){return"[object Array]"==s.call(b)};g.isObject=function(b){return b===Object(b)};z("Arguments Function String Number Date RegExp".split(" "),function(b){g["is"+b]=function(e){return s.call(e)=="[object "+b+"]"}});g.isArguments(arguments)||(g.isArguments=function(b){return!(!b||!g.has(b,"callee"))});"function"!=typeof/./&&(g.isFunction=function(b){return"function"==typeof b});g.isFinite=function(b){return isFinite(b)&&
!isNaN(parseFloat(b))};g.isNaN=function(b){return g.isNumber(b)&&b!=+b};g.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"==s.call(b)};g.isNull=function(b){return null===b};g.isUndefined=function(b){return void 0===b};g.has=function(b,e){return m.call(b,e)};g.noConflict=function(){return c._=b,this};g.identity=function(b){return b};g.times=function(b,e,c){for(var k=Array(Math.max(0,b)),g=0;b>g;g++)k[g]=e.call(c,g);return k};g.random=function(b,e){return null==e&&(e=b,b=0),b+Math.floor(Math.random()*
(e-b+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=g.invert(I.escape);var M={escape:RegExp("["+g.keys(I.escape).join("")+"]","g"),unescape:RegExp("("+g.keys(I.unescape).join("|")+")","g")};g.each(["escape","unescape"],function(b){g[b]=function(e){return null==e?"":(""+e).replace(M[b],function(e){return I[b][e]})}});g.result=function(b,e){if(null!=b){var c=b[e];return g.isFunction(c)?c.call(b):c}};g.mixin=function(b){z(g.functions(b),function(e){var c=
g[e]=b[e];g.prototype[e]=function(){var b=[this._wrapped];n.apply(b,arguments);b=c.apply(g,b);return this._chain?g(b).chain():b}})};var G=0;g.uniqueId=function(b){var e=++G+"";return b?b+e:e};g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n"," ":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;g.template=function(b,e,c){var k;c=g.defaults({},c,g.templateSettings);var d=
RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),m=0,q="__p+='";b.replace(d,function(e,c,k,g,d){return q+=b.slice(m,d).replace(O,function(b){return"\\"+N[b]}),c&&(q+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),k&&(q+="'+\n((__t=("+k+"))==null?'':__t)+\n'"),g&&(q+="';\n"+g+"\n__p+='"),m=d+e.length,e});q+="';\n";c.variable||(q="with(obj||{}){\n"+q+"}\n");q="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
q+"return __p;\n";try{k=new Function(c.variable||"obj","_",q)}catch(p){throw p.source=q,p;}if(e)return k(e,g);e=function(b){return k.call(this,b,g)};return e.source="function("+(c.variable||"obj")+"){\n"+q+"}",e};g.chain=function(b){return g(b).chain()};g.mixin(g);z("pop push reverse shift sort splice unshift".split(" "),function(b){var e=f[b];g.prototype[b]=function(){var c=this._wrapped;return e.apply(c,arguments),"shift"!=b&&"splice"!=b||0!==c.length||delete c[0],this._chain?g(c).chain():c}});
z(["concat","join","slice"],function(b){var e=f[b];g.prototype[b]=function(){var b=e.apply(this._wrapped,arguments);return this._chain?g(b).chain():b}});g.extend(g.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);var Handlebars=function(){var c=function(){function b(c){this.string=c}b.prototype.toString=function(){return""+this.string};return b}(),b=function(b){function c(b){return f[b]||"&amp;"}var d={},f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},m=/[&<>"'`]/g,h=/[&<>"'`]/;d.extend=function(b,c){for(var k in c)c.hasOwnProperty(k)&&(b[k]=c[k])};var u=Object.prototype.toString;d.toString=u;var p=function(b){return"function"===typeof b};p(/x/)&&(p=function(b){return"function"===
typeof b&&"[object Function]"===u.call(b)});d.isFunction=p;var v=Array.isArray||function(b){return b&&"object"===typeof b?"[object Array]"===u.call(b):!1};d.isArray=v;d.escapeExpression=function(e){if(e instanceof b)return e.toString();if(!e&&0!==e)return"";e=""+e;return h.test(e)?e.replace(m,c):e};d.isEmpty=function(b){return b||0===b?v(b)&&0===b.length?!0:!1:!0};return d}(c),d=function(){function b(){for(var d=Error.prototype.constructor.apply(this,arguments),f=0;f<c.length;f++)this[c[f]]=d[c[f]]}
var c="description fileName lineNumber message name number stack".split(" ");b.prototype=Error();return b}(),f=function(b,c){function d(b,e){this.helpers=b||{};this.partials=e||{};f(this)}function f(b){b.registerHelper("helperMissing",function(b){if(2!==arguments.length)throw Error("Missing helper: '"+b+"'");});b.registerHelper("blockHelperMissing",function(e,c){var k=c.inverse||function(){},g=c.fn;v(e)&&(e=e.call(this));return!0===e?g(this):!1===e||null==e?k(this):p(e)?0<e.length?b.helpers.each(e,
c):k(this):g(e)});b.registerHelper("each",function(b,e){var c=e.fn,g=e.inverse,d=0,m="",q;v(b)&&(b=b.call(this));e.data&&(q=k(e.data));if(b&&"object"===typeof b)if(p(b))for(var f=b.length;d<f;d++)q&&(q.index=d,q.first=0===d,q.last=d===b.length-1),m+=c(b[d],{data:q});else for(f in b)b.hasOwnProperty(f)&&(q&&(q.key=f),m+=c(b[f],{data:q}),d++);0===d&&(m=g(this));return m});b.registerHelper("if",function(b,e){v(b)&&(b=b.call(this));return!e.hash.includeZero&&!b||u.isEmpty(b)?e.inverse(this):e.fn(this)});
b.registerHelper("unless",function(e,c){return b.helpers["if"].call(this,e,{fn:c.inverse,inverse:c.fn,hash:c.hash})});b.registerHelper("with",function(b,e){v(b)&&(b=b.call(this));if(!u.isEmpty(b))return e.fn(b)});b.registerHelper("log",function(e,c){var k=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;b.log(k,e)})}function m(b,e){q.log(b,e)}var h={},u=b;h.VERSION="1.1.2";h.COMPILER_REVISION=4;h.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};var p=u.isArray,
v=u.isFunction,e=u.toString;h.HandlebarsEnvironment=d;d.prototype={constructor:d,logger:q,log:m,registerHelper:function(b,k,d){if("[object Object]"===e.call(b)){if(d||k)throw new c("Arg not supported with multiple helpers");u.extend(this.helpers,b)}else d&&(k.not=d),this.helpers[b]=k},registerPartial:function(b,c){"[object Object]"===e.call(b)?u.extend(this.partials,b):this.partials[b]=c}};var q={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,
e){if(q.level<=b){var c=q.methodMap[b];"undefined"!==typeof console&&console[c]&&console[c].call(console,e)}}};h.logger=q;h.log=m;var k=function(b){var e={};u.extend(e,b);return e};h.createFrame=k;return h}(b,d),h=function(b,c,d){function f(b,e,c){var d=Array.prototype.slice.call(arguments,3),m=function(b,k){k=k||{};return e.apply(this,[b,k.data||c].concat(d))};m.program=b;m.depth=d.length;return m}function m(b,e,c){var d=function(b,k){k=k||{};return e(b,k.data||c)};d.program=b;d.depth=0;return d}
function h(b,e,c,d,m,g){d={partial:!0,helpers:d,partials:m,data:g};if(void 0===b)throw new v("The partial "+e+" could not be found");if(b instanceof Function)return b(c,d)}function u(){return""}var p={},v=c,e=d.COMPILER_REVISION,q=d.REVISION_CHANGES;p.template=function(c,d){if(!d)throw Error("No environment passed to template");var p={escapeExpression:b.escapeExpression,invokePartial:d.compile?function(b,e,c,k,m,q){var p=h.apply(this,arguments);if(p)return p;p={helpers:k,partials:m,data:q};m[e]=d.compile(b,
{data:void 0!==q},d);return m[e](c,p)}:function(b,e){var c=h.apply(this,arguments);if(c)return c;throw new v("The partial "+e+" could not be compiled when running in runtime-only mode");},programs:[],program:function(b,e,c){var k=this.programs[b];c?k=m(b,e,c):k||(k=this.programs[b]=m(b,e));return k},merge:function(e,c){var k=e||c;e&&c&&e!==c&&(k={},b.extend(k,c),b.extend(k,e));return k},programWithDepth:f,noop:u,compilerInfo:null};return function(b,m){m=m||{};var g=m.partial?m:d,f,s;m.partial||(f=
m.helpers,s=m.partials);g=c.call(p,g,b,f,s,m.data);if(!m.partial&&(s=(f=p.compilerInfo)&&f[0]||1,s!==e)){if(s<e)throw Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+q[e]+") or downgrade your runtime to an older version ("+q[s]+").");throw Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+f[1]+").");}return g}};
p.programWithDepth=f;p.program=m;p.invokePartial=h;p.noop=u;return p}(b,d,f),c=function(b,c,d,f,m){var h=function(){var p=new b.HandlebarsEnvironment;f.extend(p,b);p.SafeString=c;p.Exception=d;p.Utils=f;p.VM=m;p.template=function(b){return m.template(b,p)};return p},u=h();u.create=h;return u}(f,c,d,b,h),b=function(b){function c(b,d,f){this.type="program";this.statements=b;this.strip={};f?(this.inverse=new c(f,d),this.strip.right=d.left):d&&(this.strip.left=d.right)}var d={};d.ProgramNode=c;d.MustacheNode=
function(b,c,d,f){this.type="mustache";this.hash=c;this.strip=f;d=d[3]||d[2];this.escaped="{"!==d&&"&"!==d;d=this.id=b[0];b=this.params=b.slice(1);this.isHelper=(this.eligibleHelper=d.isSimple)&&(b.length||c)};d.PartialNode=function(b,c,d){this.type="partial";this.partialName=b;this.context=c;this.strip=d};d.BlockNode=function(c,d,f,h){if(c.id.original!==h.path.original)throw new b(c.id.original+" doesn't match "+h.path.original);this.type="block";this.mustache=c;this.program=d;this.inverse=f;this.strip=
{left:c.strip.left,right:h.strip.right};(d||f).strip.left=c.strip.right;(f||d).strip.right=h.strip.left;f&&!d&&(this.isInverse=!0)};d.ContentNode=function(b){this.type="content";this.string=b};d.HashNode=function(b){this.type="hash";this.pairs=b};d.IdNode=function(c){this.type="ID";for(var d="",f=[],h=0,p=0,v=c.length;p<v;p++){var e=c[p].part,d=d+((c[p].separator||"")+e);if(".."===e||"."===e||"this"===e){if(0<f.length)throw new b("Invalid path: "+d);".."===e?h++:this.isScoped=!0}else f.push(e)}this.original=
d;this.parts=f;this.string=f.join(".");this.depth=h;this.isSimple=1===c.length&&!this.isScoped&&0===h;this.stringModeValue=this.string};d.PartialNameNode=function(b){this.type="PARTIAL_NAME";this.name=b.original};d.DataNode=function(b){this.type="DATA";this.id=b};d.StringNode=function(b){this.type="STRING";this.original=this.string=this.stringModeValue=b};d.IntegerNode=function(b){this.type="INTEGER";this.original=this.integer=b;this.stringModeValue=Number(b)};d.BooleanNode=function(b){this.type=
"BOOLEAN";this.bool=b;this.stringModeValue="true"===b};d.CommentNode=function(b){this.type="comment";this.comment=b};return d}(d),h=function(b,c){var d={};d.parser=b;d.parse=function(d){if(d.constructor===c.ProgramNode)return d;b.yy=c;return b.parse(d)};return d}(function(){return function(){function b(c,d){return{left:"~"===c[2],right:"~"===d[0]||"~"===d[1]}}function c(){this.yy={}}var d={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,
closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",
15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],
[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(c,d,f,p,h,e,q){c=e.length-1;switch(h){case 1:return new p.ProgramNode(e[c-1]);case 2:return new p.ProgramNode([]);case 3:this.$=new p.ProgramNode([],e[c-1],e[c]);break;case 4:this.$=new p.ProgramNode(e[c-2],e[c-1],e[c]);break;case 5:this.$=new p.ProgramNode(e[c-1],e[c],[]);break;case 6:this.$=new p.ProgramNode(e[c]);break;case 7:this.$=new p.ProgramNode([]);break;case 8:this.$=new p.ProgramNode([]);break;case 9:this.$=[e[c]];
break;case 10:e[c-1].push(e[c]);this.$=e[c-1];break;case 11:this.$=new p.BlockNode(e[c-2],e[c-1].inverse,e[c-1],e[c]);break;case 12:this.$=new p.BlockNode(e[c-2],e[c-1],e[c-1].inverse,e[c]);break;case 13:this.$=e[c];break;case 14:this.$=e[c];break;case 15:this.$=new p.ContentNode(e[c]);break;case 16:this.$=new p.CommentNode(e[c]);break;case 17:this.$=new p.MustacheNode(e[c-1][0],e[c-1][1],e[c-2],b(e[c-2],e[c]));break;case 18:this.$=new p.MustacheNode(e[c-1][0],e[c-1][1],e[c-2],b(e[c-2],e[c]));break;
case 19:this.$={path:e[c-1],strip:b(e[c-2],e[c])};break;case 20:this.$=new p.MustacheNode(e[c-1][0],e[c-1][1],e[c-2],b(e[c-2],e[c]));break;case 21:this.$=new p.MustacheNode(e[c-1][0],e[c-1][1],e[c-2],b(e[c-2],e[c]));break;case 22:this.$=new p.PartialNode(e[c-2],e[c-1],b(e[c-3],e[c]));break;case 23:this.$=b(e[c-1],e[c]);break;case 24:this.$=[[e[c-2]].concat(e[c-1]),e[c]];break;case 25:this.$=[[e[c]],null];break;case 26:this.$=e[c];break;case 27:this.$=new p.StringNode(e[c]);break;case 28:this.$=new p.IntegerNode(e[c]);
break;case 29:this.$=new p.BooleanNode(e[c]);break;case 30:this.$=e[c];break;case 31:this.$=new p.HashNode(e[c]);break;case 32:this.$=[e[c-2],e[c]];break;case 33:this.$=new p.PartialNameNode(e[c]);break;case 34:this.$=new p.PartialNameNode(new p.StringNode(e[c]));break;case 35:this.$=new p.PartialNameNode(new p.IntegerNode(e[c]));break;case 36:this.$=new p.DataNode(e[c]);break;case 37:this.$=new p.IdNode(e[c]);break;case 38:e[c-2].push({part:e[c],separator:e[c-1]});this.$=e[c-2];break;case 39:this.$=
[{part:e[c]}];break;case 42:this.$=[];break;case 43:e[c-1].push(e[c]);break;case 46:this.$=[e[c]];break;case 47:e[c-1].push(e[c])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],
15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],
19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:29,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:30,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:31,21:24,30:25,38:[1,28],40:[1,27],41:26},{21:33,26:32,32:[1,34],33:[1,35],38:[1,28],41:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],
25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,38:[1,28],40:[1,27],41:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,42],24:[2,42],28:43,32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,25],24:[2,25]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[1,44]},{21:45,38:[1,28],41:26},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],40:[2,39],42:[2,39]},{18:[1,
46]},{18:[1,47]},{24:[1,48]},{18:[2,40],21:50,27:49,38:[1,28],41:26},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{18:[2,35],38:[2,35]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,38:[1,28],41:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],
20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,44],21:56,24:[2,44],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:55,36:61,37:62,38:[1,63],40:[1,27],41:26},{38:[1,64]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,
20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,65]},{18:[2,41]},{18:[1,66]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24]},{18:[2,43],24:[2,43],32:[2,43],33:[2,43],34:[2,43],38:[2,43],40:[2,43]},{18:[2,45],24:[2,45]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},
{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],38:[2,30],40:[2,30]},{18:[2,31],24:[2,31],37:67,38:[1,68]},{18:[2,46],24:[2,46],38:[2,46]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],39:[1,69],40:[2,39],42:[2,39]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],
38:[2,38],40:[2,38],42:[2,38]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{18:[2,47],24:[2,47],38:[2,47]},{39:[1,69]},{21:56,30:60,31:70,32:[1,57],33:[1,58],34:[1,59],38:[1,28],40:[1,27],41:26},{18:[2,32],24:[2,32],38:[2,32]}],defaultActions:{3:[2,2],16:[2,1],50:[2,41]},parseError:function(b,c){throw Error(b);},parse:function(b){var c=[0],d=[null],f=[],h=this.table,
e="",q=0,k=0,x=0;this.lexer.setInput(b);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});b=this.lexer.yylloc;f.push(b);var s=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var l,r,g,n,t={},C,y;;){g=c[c.length-1];if(this.defaultActions[g])n=this.defaultActions[g];else{if(null===l||"undefined"==typeof l)l=this.lexer.lex()||1,"number"!==typeof l&&
(l=this.symbols_[l]||l);n=h[g]&&h[g][l]}if("undefined"===typeof n||!n.length||!n[0]){var E="";if(!x){y=[];for(C in h[g])this.terminals_[C]&&2<C&&y.push("'"+this.terminals_[C]+"'");E=this.lexer.showPosition?"Parse error on line "+(q+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+y.join(", ")+", got '"+(this.terminals_[l]||l)+"'":"Parse error on line "+(q+1)+": Unexpected "+(1==l?"end of input":"'"+(this.terminals_[l]||l)+"'");this.parseError(E,{text:this.lexer.match,token:this.terminals_[l]||l,
line:this.lexer.yylineno,loc:b,expected:y})}}if(n[0]instanceof Array&&1<n.length)throw Error("Parse Error: multiple actions possible at state: "+g+", token: "+l);switch(n[0]){case 1:c.push(l);d.push(this.lexer.yytext);f.push(this.lexer.yylloc);c.push(n[1]);l=null;r?(l=r,r=null):(k=this.lexer.yyleng,e=this.lexer.yytext,q=this.lexer.yylineno,b=this.lexer.yylloc,0<x&&x--);break;case 2:y=this.productions_[n[1]][1];t.$=d[d.length-y];t._$={first_line:f[f.length-(y||1)].first_line,last_line:f[f.length-1].last_line,
first_column:f[f.length-(y||1)].first_column,last_column:f[f.length-1].last_column};s&&(t._$.range=[f[f.length-(y||1)].range[0],f[f.length-1].range[1]]);g=this.performAction.call(t,e,k,q,this.yy,n[1],d,f);if("undefined"!==typeof g)return g;y&&(c=c.slice(0,-2*y),d=d.slice(0,-1*y),f=f.slice(0,-1*y));c.push(this.productions_[n[1]][0]);d.push(t.$);f.push(t._$);n=h[c[c.length-2]][c[c.length-1]];c.push(n);break;case 3:return!0}}return!0}},f=function(){return{EOF:1,parseError:function(b,c){if(this.yy.parser)this.yy.parser.parseError(b,
c);else throw Error(b);},setInput:function(b){this._input=b;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var b=this._input[0];this.yytext+=b;this.yyleng++;this.offset++;this.match+=b;this.matched+=b;b.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):
this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return b},unput:function(b){var c=b.length,d=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-c-1);this.offset-=c;b=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);d.length-1&&(this.yylineno-=d.length-1);var f=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,
last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:d?(d.length===b.length?this.yylloc.first_column:0)+b[b.length-d.length].length-d[0].length:this.yylloc.first_column-c};this.options.ranges&&(this.yylloc.range=[f[0],f[0]+this.yyleng-c]);return this},more:function(){this._more=!0;return this},less:function(b){this.unput(this.match.slice(b))},pastInput:function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(20<b.length?"...":"")+b.substr(-20).replace(/\n/g,
"")},upcomingInput:function(){var b=this.match;20>b.length&&(b+=this._input.substr(0,20-b.length));return(b.substr(0,20)+(20<b.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var b=this.pastInput(),c=Array(b.length+1).join("-");return b+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,c,d;this._more||(this.match=this.yytext="");for(var f=this._currentRules(),h=0;h<f.length&&(!(c=this._input.match(this.rules[f[h]]))||b&&!(c[0].length>
b[0].length)||(b=c,d=h,this.options.flex));h++);if(b){if(c=b[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=c.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length};this.yytext+=b[0];this.match+=b[0];this.matches=b;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=
!1;this._input=this._input.slice(b[0].length);this.matched+=b[0];b=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(b)return b}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return"undefined"!==typeof b?b:this.lex()},begin:function(b){this.conditionStack.push(b)},
popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(b){this.begin(b)},options:{},performAction:function(b,c,d,f){function h(b,d){return c.yytext=c.yytext.substr(b,c.yyleng-d)}switch(d){case 0:"\\\\"===c.yytext.slice(-2)?(h(0,1),this.begin("mu")):"\\"===c.yytext.slice(-1)?(h(0,1),this.begin("emu")):
this.begin("mu");if(c.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==c.yytext.slice(-1)&&this.popState(),"\\"===c.yytext.slice(-1)&&h(0,1),14;case 3:return h(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState();this.begin("com");break;case 12:return h(3,5),this.popState(),15;case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 19:return this.popState(),
24;case 20:return this.popState(),18;case 21:return c.yytext=h(1,2).replace(/\\"/g,'"'),32;case 22:return c.yytext=h(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return c.yytext=h(1,2),38;case 29:return"INVALID";case 30:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,
/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,
25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}}}}();d.lexer=f;c.prototype=d;d.Parser=c;return new c}()}(),b),f=function(b){function c(b){this.value=b}function d(){}var f=b.COMPILER_REVISION,h=b.REVISION_CHANGES,w=b.log;d.prototype={nameLookup:function(b,c){var k,f;0===b.indexOf("depth")&&(k=!0);f=/^[0-9]+$/.test(c)?b+"["+c+"]":d.isValidJavaScriptVariableName(c)?b+"."+c:b+"['"+c+"']";return k?"("+b+" && "+f+")":f},appendToBuffer:function(b){return this.environment.isSimple?
"return "+b+";":{appendToBuffer:!0,content:b,toString:function(){return"buffer += "+b+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(b,c,d,f){this.environment=b;this.options=c||{};w("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!d;this.context=d||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=
[];this.compileChildren(b,c);b=b.opcodes;this.i=0;for(d=b.length;this.i<d;this.i++)c=b[this.i],"DECLARE"===c.opcode?this[c.name]=c.value:this[c.opcode].apply(this,c.args),c.opcode!==this.stripNext&&(this.stripNext=!1);this.pushSource("");return this.createFunctionContext(f)},preamble:function(){var b=[];if(this.isChild)b.push("");else{var c=this.namespace,d="helpers = this.merge(helpers, "+c+".helpers);";this.environment.usePartial&&(d=d+" partials = this.merge(partials, "+c+".partials);");this.options.data&&
(d+=" data = data || {};");b.push(d)}this.environment.isSimple?b.push(""):b.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=b},createFunctionContext:function(b){var c=this.stackVars.concat(this.registers.list);0<c.length&&(this.source[1]=this.source[1]+", "+c.join(", "));if(!this.isChild)for(var d in this.context.aliases)this.context.aliases.hasOwnProperty(d)&&(this.source[1]=this.source[1]+", "+d+"="+this.context.aliases[d]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+
";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.pushSource("return buffer;");c=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];d=0;for(var p=this.environment.depths.list.length;d<p;d++)c.push("depth"+this.environment.depths.list[d]);d=this.mergeSource();this.isChild||(d="this.compilerInfo = ["+f+",'"+h[f]+"'];\n"+d);if(b)return c.push(d),Function.apply(this,c);b="function "+(this.name||"")+"("+c.join(",")+
") {\n "+d+"}";w("debug",b+"\n\n");return b},mergeSource:function(){for(var b="",c,d=0,f=this.source.length;d<f;d++){var p=this.source[d];p.appendToBuffer?c=c?c+"\n + "+p.content:p.content:(c&&(b+="buffer += "+c+";\n ",c=void 0),b+=p+"\n ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var b=["depth0"];this.setupParams(0,b);this.replaceStack(function(c){b.splice(1,0,c);return"blockHelperMissing.call("+b.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing=
"helpers.blockHelperMissing";var b=["depth0"];this.setupParams(0,b);var c=this.topStack();b.splice(1,0,c);b[b.length-1]="options";this.pushSource("if (!"+this.lastHelper+") { "+c+" = blockHelperMissing.call("+b.join(", ")+"); }")},appendContent:function(b){this.pendingContent&&(b=this.pendingContent+b);this.stripNext&&(b=b.replace(/^\s+/,""));this.pendingContent=b},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,""));this.stripNext="strip"},append:function(){this.flushInline();
var b=this.popStack();this.pushSource("if("+b+" || "+b+" === 0) { "+this.appendToBuffer(b)+" }");this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(b){this.lastContext!==b&&(this.lastContext=b)},lookupOnContext:function(b){this.push(this.nameLookup("depth"+this.lastContext,b,"context"))},
pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(b){return"typeof "+b+" === functionType ? "+b+".apply(depth0) : "+b})},lookup:function(b){this.replaceStack(function(c){return c+" == null || "+c+" === false ? "+c+" : "+this.nameLookup(c,b,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(b,c){this.pushStackLiteral("depth"+this.lastContext);
this.pushString(c);"string"===typeof b?this.pushString(b):this.pushStackLiteral(b)},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var b=this.hash;this.hash=void 0;this.options.stringParams&&(this.register("hashContexts","{"+b.contexts.join(",")+"}"),this.register("hashTypes","{"+b.types.join(",")+"}"));this.push("{\n "+
b.values.join(",\n ")+"\n }")},pushString:function(b){this.pushStackLiteral(this.quotedString(b))},push:function(b){this.inlineStack.push(b);return b},pushLiteral:function(b){this.pushStackLiteral(b)},pushProgram:function(b){null!=b?this.pushStackLiteral(this.programExpression(b)):this.pushStackLiteral(null)},invokeHelper:function(b,c){this.context.aliases.helperMissing="helpers.helperMissing";var d=this.lastHelper=this.setupHelper(b,c,!0),f=this.nameLookup("depth"+this.lastContext,c,"context");this.push(d.name+
" || "+f);this.replaceStack(function(b){return b+" ? "+b+".call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+")"})},invokeKnownHelper:function(b,c){var d=this.setupHelper(b,c);this.push(d.name+".call("+d.callParams+")")},invokeAmbiguous:function(b,c){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var d=this.setupHelper(0,b,c),f=this.lastHelper=this.nameLookup("helpers",b,"helper"),p=this.nameLookup("depth"+this.lastContext,b,"context"),h=this.nextStack();
this.pushSource("if ("+h+" = "+f+") { "+h+" = "+h+".call("+d.callParams+"); }");this.pushSource("else { "+h+" = "+p+"; "+h+" = typeof "+h+" === functionType ? "+h+".call("+d.callParams+") : "+h+"; }")},invokePartial:function(b){b=[this.nameLookup("partials",b,"partial"),"'"+b+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(b){var c=this.popStack(),d,f;this.options.stringParams&&
(f=this.popStack(),d=this.popStack());var p=this.hash;d&&p.contexts.push("'"+b+"': "+d);f&&p.types.push("'"+b+"': "+f);p.values.push("'"+b+"': ("+c+")")},compiler:d,compileChildren:function(b,c){for(var d=b.children,f,p,h=0,m=d.length;h<m;h++){f=d[h];p=new this.compiler;var g=this.matchExistingProgram(f);null==g?(this.context.programs.push(""),g=this.context.programs.length,f.index=g,f.name="program"+g,this.context.programs[g]=p.compile(f,c,this.context),this.context.environments[g]=f):(f.index=g,
f.name="program"+g)}},matchExistingProgram:function(b){for(var c=0,d=this.context.environments.length;c<d;c++){var f=this.context.environments[c];if(f&&f.equals(b))return c}},programExpression:function(b){this.context.aliases.self="this";if(null==b)return"self.noop";var c=this.environment.children[b];b=c.depths.list;for(var d=[c.index,c.name,"data"],f=0,p=b.length;f<p;f++)c=b[f],1===c?d.push("depth0"):d.push("depth"+(c-1));return(0===b.length?"self.program(":"self.programWithDepth(")+d.join(", ")+
")"},register:function(b,c){this.useRegister(b);this.pushSource(b+" = "+c+";")},useRegister:function(b){this.registers[b]||(this.registers[b]=!0,this.registers.list.push(b))},pushStackLiteral:function(b){return this.push(new c(b))},pushSource:function(b){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0);b&&this.source.push(b)},pushStack:function(b){this.flushInline();var c=this.incrStack();b&&this.pushSource(c+" = "+b+";");
this.compileStack.push(c);return c},replaceStack:function(b){var d="",k=this.isInline(),f;k?(f=this.popStack(!0),f instanceof c?f=f.value:(d=this.stackSlot?this.topStackName():this.incrStack(),d="("+this.push(d)+" = "+f+"),",f=this.topStack())):f=this.topStack();b=b.call(this,f);k?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+d+b+")")):(/^stack/.test(f)||(f=this.nextStack()),this.pushSource(f+" = ("+d+b+");"));return f},nextStack:function(){return this.pushStack()},
incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var b=this.inlineStack;if(b.length){this.inlineStack=[];for(var d=0,k=b.length;d<k;d++){var f=b[d];f instanceof c?this.compileStack.push(f):this.pushStack(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(b){var d=this.isInline(),f=(d?this.inlineStack:
this.compileStack).pop();if(!b&&f instanceof c)return f.value;d||this.stackSlot--;return f},topStack:function(b){var d=this.isInline()?this.inlineStack:this.compileStack,d=d[d.length-1];return!b&&d instanceof c?d.value:d},quotedString:function(b){return'"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(b,c,d){var f=[];this.setupParams(b,f,d);b=this.nameLookup("helpers",c,"helper");
return{params:f,name:b,callParams:["depth0"].concat(f).join(", "),helperMissingParams:d&&["depth0",this.quotedString(c)].concat(f).join(", ")}},setupParams:function(b,c,d){var f=[],p=[],h=[],m,g;f.push("hash:"+this.popStack());m=this.popStack();if((g=this.popStack())||m)g||(this.context.aliases.self="this",g="self.noop"),m||(this.context.aliases.self="this",m="self.noop"),f.push("inverse:"+m),f.push("fn:"+g);for(g=0;g<b;g++)m=this.popStack(),c.push(m),this.options.stringParams&&(h.push(this.popStack()),
p.push(this.popStack()));this.options.stringParams&&(f.push("contexts:["+p.join(",")+"]"),f.push("types:["+h.join(",")+"]"),f.push("hashContexts:hashContexts"),f.push("hashTypes:hashTypes"));this.options.data&&f.push("data:data");f="{"+f.join(",")+"}";d?(this.register("options",f),c.push("options")):c.push(f);return c.join(", ")}};b="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" ");
for(var u=d.RESERVED_WORDS={},p=0,v=b.length;p<v;p++)u[b[p]]=!0;d.isValidJavaScriptVariableName=function(b){return!d.RESERVED_WORDS[b]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(b)?!0:!1};return d}(f),d=function(b,c,d,f){function h(){}var w={},u=c.parse;w.Compiler=h;h.prototype={compiler:h,disassemble:function(){for(var b=this.opcodes,c,d=[],f,k,h=0,m=b.length;h<m;h++)if(c=b[h],"DECLARE"===c.opcode)d.push("DECLARE "+c.name+"="+c.value);else{f=[];for(var l=0;l<c.args.length;l++)k=c.args[l],"string"===typeof k&&
(k='"'+k.replace("\n","\\n")+'"'),f.push(k);d.push(c.opcode+" "+f.join(" "))}return d.join("\n")},equals:function(b){var c=this.opcodes.length;if(b.opcodes.length!==c)return!1;for(var d=0;d<c;d++){var f=this.opcodes[d],k=b.opcodes[d];if(f.opcode!==k.opcode||f.args.length!==k.args.length)return!1;for(var h=0;h<f.args.length;h++)if(f.args[h]!==k.args[h])return!1}c=this.children.length;if(b.children.length!==c)return!1;for(d=0;d<c;d++)if(!this.children[d].equals(b.children[d]))return!1;return!0},guid:0,
compile:function(b,c){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=c;var d=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(d)for(var f in d)this.options.knownHelpers[f]=d[f];return this.accept(b)},accept:function(b){var c=b.strip||{};c.left&&this.opcode("strip");b=this[b.type](b);c.right&&this.opcode("strip");return b},program:function(b){b=b.statements;for(var c=0,d=b.length;c<d;c++)this.accept(b[c]);
this.isSimple=1===d;this.depths.list=this.depths.list.sort(function(b,c){return b-c});return this},compileProgram:function(b){b=(new this.compiler).compile(b,this.options);var c=this.guid++,d;this.usePartial=this.usePartial||b.usePartial;this.children[c]=b;for(var f=0,k=b.depths.list.length;f<k;f++)d=b.depths.list[f],2>d||this.addDepth(d-1);return c},block:function(b){var c=b.mustache,d=b.program;b=b.inverse;d&&(d=this.compileProgram(d));b&&(b=this.compileProgram(b));var f=this.classifyMustache(c);
"helper"===f?this.helperMustache(c,d,b):"simple"===f?(this.simpleMustache(c),this.opcode("pushProgram",d),this.opcode("pushProgram",b),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(c,d,b),this.opcode("pushProgram",d),this.opcode("pushProgram",b),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(b){b=b.pairs;var c,d;this.opcode("pushHash");for(var f=0,k=b.length;f<k;f++)c=b[f],d=c[1],this.options.stringParams?(d.depth&&this.addDepth(d.depth),
this.opcode("getContext",d.depth||0),this.opcode("pushStringParam",d.stringModeValue,d.type)):this.accept(d),this.opcode("assignToHash",c[0]);this.opcode("popHash")},partial:function(b){var c=b.partialName;this.usePartial=!0;b.context?this.ID(b.context):this.opcode("push","depth0");this.opcode("invokePartial",c.name);this.opcode("append")},content:function(b){this.opcode("appendContent",b.string)},mustache:function(b){var c=this.options,d=this.classifyMustache(b);"simple"===d?this.simpleMustache(b):
"helper"===d?this.helperMustache(b):this.ambiguousMustache(b);b.escaped&&!c.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(b,c,d){b=b.id;var f=b.parts[0],k=null!=c||null!=d;this.opcode("getContext",b.depth);this.opcode("pushProgram",c);this.opcode("pushProgram",d);this.opcode("invokeAmbiguous",f,k)},simpleMustache:function(b){b=b.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext"));
this.opcode("resolvePossibleLambda")},helperMustache:function(b,c,d){c=this.setupFullMustacheParams(b,c,d);b=b.id.parts[0];if(this.options.knownHelpers[b])this.opcode("invokeKnownHelper",c.length,b);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+b);this.opcode("invokeHelper",c.length,b)}},ID:function(b){this.addDepth(b.depth);this.opcode("getContext",b.depth);b.parts[0]?this.opcode("lookupOnContext",b.parts[0]):this.opcode("pushContext");
for(var c=1,d=b.parts.length;c<d;c++)this.opcode("lookup",b.parts[c])},DATA:function(c){this.options.data=!0;if(c.id.isScoped||c.id.depth)throw new b("Scoped data references are not supported: "+c.original);this.opcode("lookupData");c=c.id.parts;for(var d=0,e=c.length;d<e;d++)this.opcode("lookup",c[d])},STRING:function(b){this.opcode("pushString",b.string)},INTEGER:function(b){this.opcode("pushLiteral",b.integer)},BOOLEAN:function(b){this.opcode("pushLiteral",b.bool)},comment:function(){},opcode:function(b){this.opcodes.push({opcode:b,
args:[].slice.call(arguments,1)})},declare:function(b,c){this.opcodes.push({opcode:"DECLARE",name:b,value:c})},addDepth:function(b){if(isNaN(b))throw Error("EWOT");0===b||this.depths[b]||(this.depths[b]=!0,this.depths.list.push(b))},classifyMustache:function(b){var c=b.isHelper,d=b.eligibleHelper,f=this.options;d&&!c&&(f.knownHelpers[b.id.parts[0]]?c=!0:f.knownHelpersOnly&&(d=!1));return c?"helper":d?"ambiguous":"simple"},pushParams:function(b){for(var c=b.length,d;c--;)if(d=b[c],this.options.stringParams)d.depth&&
this.addDepth(d.depth),this.opcode("getContext",d.depth||0),this.opcode("pushStringParam",d.stringModeValue,d.type);else this[d.type](d)},setupMustacheParams:function(b){var c=b.params;this.pushParams(c);b.hash?this.hash(b.hash):this.opcode("emptyHash");return c},setupFullMustacheParams:function(b,c,d){var f=b.params;this.pushParams(f);this.opcode("pushProgram",c);this.opcode("pushProgram",d);b.hash?this.hash(b.hash):this.opcode("emptyHash");return f}};w.precompile=function(c,l){if(null==c||"string"!==
typeof c&&c.constructor!==f.ProgramNode)throw new b("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+c);l=l||{};"data"in l||(l.data=!0);var e=u(c),e=(new h).compile(e,l);return(new d).compile(e,l)};w.compile=function(c,l,e){if(null==c||"string"!==typeof c&&c.constructor!==f.ProgramNode)throw new b("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+c);l=l||{};"data"in l||(l.data=!0);var q;return function(b,f){if(!q){var s=u(c),s=(new h).compile(s,
l),s=(new d).compile(s,l,void 0,!0);q=e.template(s)}return q.call(this,b,f)}};return w}(d,h,f,b);return function(b,c,d,f,h){var w=d.parser,u=d.parse,p=f.Compiler,v=f.compile,e=f.precompile,q=b.create;d=function(){var b=q();b.compile=function(c,d){return v(c,d,b)};b.precompile=e;b.AST=c;b.Compiler=p;b.JavaScriptCompiler=h;b.Parser=w;b.parse=u;return b};b=d();b.create=d;return b}(c,b,h,d,f)}();(function(c,b,d){function f(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent("on"+c,d)}function h(b){if("keypress"==b.type){var c=String.fromCharCode(b.which);b.shiftKey||(c=c.toLowerCase());return c}return e[b.which]?e[b.which]:q[b.which]?q[b.which]:String.fromCharCode(b.which).toLowerCase()}function n(b){b=b||{};var c=!1,d;for(d in g)b[d]?c=!0:g[d]=0;c||(y=!1)}function l(b,c,d,e,f,k){var h,q,l=[],m=d.type;if(!B[b])return[];"keyup"==m&&w(b)&&(c=[b]);for(h=0;h<B[b].length;++h)if(q=
B[b][h],!(!e&&q.seq&&g[q.seq]!=q.level||m!=q.action||("keypress"!=m||d.metaKey||d.ctrlKey)&&c.sort().join(",")!==q.modifiers.sort().join(","))){var s=e&&q.seq==e&&q.level==k;(!e&&q.combo==f||s)&&B[b].splice(h,1);l.push(q)}return l}function t(b){var c=[];b.shiftKey&&c.push("shift");b.altKey&&c.push("alt");b.ctrlKey&&c.push("ctrl");b.metaKey&&c.push("meta");return c}function s(b,c,d){E.stopCallback(c,c.target||c.srcElement,d)||!1!==b(c,d)||(c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation(),
c.returnValue=!1,c.cancelBubble=!0)}function m(b){"number"!==typeof b.which&&(b.which=b.keyCode);var c=h(b);c&&("keyup"==b.type&&D===c?D=!1:E.handleKey(c,t(b),b))}function w(b){return"shift"==b||"ctrl"==b||"alt"==b||"meta"==b}function u(b,c,d,e){function f(c){return function(){y=c;++g[b];clearTimeout(z);z=setTimeout(n,1E3)}}function k(c){s(d,c,b);"keyup"!==e&&(D=h(c));setTimeout(n,10)}for(var q=g[b]=0;q<c.length;++q){var l=q+1===c.length?k:f(e||p(c[q+1]).action);v(c[q],l,e,b,q)}}function p(b,c){var d,
f,g,h=[];d="+"===b?["+"]:b.split("+");for(g=0;g<d.length;++g)f=d[g],x[f]&&(f=x[f]),c&&"keypress"!=c&&k[f]&&(f=k[f],h.push("shift")),w(f)&&h.push(f);d=f;g=c;if(!g){if(!A){A={};for(var q in e)95<q&&112>q||e.hasOwnProperty(q)&&(A[e[q]]=q)}g=A[d]?"keydown":"keypress"}"keypress"==g&&h.length&&(g="keydown");return{key:f,modifiers:h,action:g}}function v(b,c,d,e,f){r[b+":"+d]=c;b=b.replace(/\s+/g," ");var g=b.split(" ");1<g.length?u(b,g,c,d):(d=p(b,d),B[d.key]=B[d.key]||[],l(d.key,d.modifiers,{type:d.action},
e,b,f),B[d.key][e?"unshift":"push"]({callback:c,modifiers:d.modifiers,action:d.action,seq:e,level:f,combo:b}))}var e={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},q={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},k={"~":"`","!":"1",
"@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},A,B={},r={},g={},z,D=!1,C=!1,y=!1;for(d=1;20>d;++d)e[111+d]="f"+d;for(d=0;9>=d;++d)e[d+96]=d;f(b,"keypress",m);f(b,"keydown",m);f(b,"keyup",m);var E={bind:function(b,c,d){b=b instanceof Array?b:[b];for(var e=0;e<b.length;++e)v(b[e],c,d);return this},
unbind:function(b,c){return E.bind(b,function(){},c)},trigger:function(b,c){if(r[b+":"+c])r[b+":"+c]({},b);return this},reset:function(){B={};r={};return this},stopCallback:function(b,c){return-1<(" "+c.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==c.tagName||"SELECT"==c.tagName||"TEXTAREA"==c.tagName||c.isContentEditable},handleKey:function(b,c,d){var e=l(b,c,d),f;c={};var g=0,k=!1;for(f=0;f<e.length;++f)e[f].seq&&(g=Math.max(g,e[f].level));for(f=0;f<e.length;++f)e[f].seq?e[f].level==g&&(k=!0,
c[e[f].seq]=1,s(e[f].callback,d,e[f].combo)):k||s(e[f].callback,d,e[f].combo);e="keypress"==d.type&&C;d.type!=y||w(b)||e||n(c);C=k&&"keydown"==d.type}};c.Mousetrap=E;"function"===typeof define&&define.amd&&define(E)})(window,document);window.appstorm=window.a=_.noConflict();a.__defaultAjaxOptions={};a.url="";a.getStackTrace=function(){return Error().stack};a.isNone=function(c){return a.isNull(c)||a.isUndefined(c)};a.deepClone=function(c){if(a.isObject(c)){if(a.isArray(c))for(var b=c.length,d=Array(b),f=0;f<b;++f)d[f]=a.deepClone(c[f]);else for(b in d={},a.isFunction(c.constructor)&&(d=new c.constructor),a.isObject(c.prototype)&&(d.prototype=c.prototype),c)d[b]=a.deepClone(c[b]);return d}return c};
a.contains=function(c,b){if(c instanceof Array)for(var d=c.length;d--;){if(c[d]===b)return!0}else if(this.isObject(c))return b in c;return!1};a.isNumber=function(c){return!isNaN(parseFloat(c))&&isFinite(c)};a.isObject=function(c){return"object"===typeof c&&null!==c};a.isString=function(c){return"string"===typeof c};a.isFunction=function(c){return"function"===typeof c};a.isNull=function(c){return"undefined"===typeof c||null===c};a.isBoolean=function(c){return"boolean"===typeof c};
a.isArray=function(c){return c instanceof Array};a.setDefaultAjaxOptions=function(c){a.isObject(c)&&(this.__defaultAjaxOptions=c)};a.getDefaultAjaxOptions=function(){return this.__defaultAjaxOptions};(function(){var c=document.getElementById("a-core");c&&"undefined"!==typeof c.src&&(a.url=c.src.replace(/\/[^/]*$/,"/"))})();a.environment=new function(){var c={verbose:2,console:"log"};this.get=function(b){return b in c?c[b]:null};this.set=function(b,d){a.isNone(b)||(c[b]=d,a.message.dispatch("a.environment.add",{key:b,value:d}))};this.remove=function(b){a.isNone(c[b])||(delete c[b],a.message.dispatch("a.environment.remove",{key:b}))};this.clear=function(){c={verbose:2,console:"log"}}};a.console=function(){function c(c,f,h,n){a.isArray(b[c])||(c="log");b[c].push(f);if(!a.isNone(window.console)&&a.isFunction(window.console.log)&&!1!==n)switch(a.environment.get("console")){case "error":if("error"!==c)break;case "warning":case "warn":if("warn"!==c&&"error"!==c)break;case "info":if("log"===c)break;default:n=!0;var l=!1;if(a.isString(f)&&0<=f.indexOf(":"))for(var t=f.substr(0,f.indexOf(":")).split("."),s=t.length;s--;){var m="verbose-"+t.join("."),m=a.environment.get(m);if(!a.isNone(m)){l=
!0;n=m<h?!1:!0;break}t.pop()}l||(a.isNone(a.environment.get("verbose"))||a.isNone(h))||parseInt(a.environment.get("verbose"),10)<h&&(n=!1);if(n)window.console[c](f)}for(;2E3<b[c].length;)b[c].shift()}var b={log:[],warn:[],info:[],error:[]};return{log:function(b,f,h){c("log",b,f,h)},warn:function(b,f,h){c("warn",b,f,h)},info:function(b,f,h){c("info",b,f,h)},error:function(b,f,h){c("error",b,f,h)},trace:function(c){return a.isString(c)&&c in b?b[c]:b},clear:function(){b={log:[],warn:[],info:[],error:[]}}}}();a.eventEmitter=function(){function c(c){for(var f in b.__list)1>b.__list[f].length&&delete b.__list[f]}var b=function(){this.__list={};this.__base="a.message"};b.prototype.setName=function(b){this.__base=""+b};b.prototype.addListener=function(b,c){a.isFunction(c)?(a.isNone(this.__list[b])&&(this.__list[b]=[]),this.__list[b].push(c),this.dispatch(this.__base+".add",{type:b,fct:c})):a.console.warn(this.__base+".addListener : unable to bind function, this is not a function",1)};b.prototype.add=b.prototype.on=
b.prototype.bind=b.prototype.addListener;b.prototype.addListenerOnce=function(b,c){var h=this,n=function(l){c(l);h.removeListener(b,n)};this.addListener(b,n)};b.prototype.once=b.prototype.onOnce=b.prototype.bindOnce=b.prototype.addListenerOnce;b.prototype.removeListener=function(b,f){if(!a.isNone(this.__list[b])){var h=this.__list[b].length;if(a.isFunction(f))for(;h--;)this.__list[b][h]===f&&this.__list[b].splice(h,1);this.dispatch(this.__base+".remove",{type:b,fct:f});c(b)}};b.prototype.remove=b.prototype.off=
b.prototype.unbind=b.prototype.removeListener;b.prototype.removeAllListeners=function(b){a.isNone(this.__list[b])||(this.__list[b]=[],c(b))};b.prototype.removeAll=b.prototype.offAll=b.prototype.unbindAll=b.prototype.removeAllListeners;b.prototype.clear=function(){var b=this.__base+".clear",c;for(c in this.__list)c!==b&&delete this.__list[c];this.dispatch(b,{})};b.prototype.dispatch=function(b,c){var h=this.__list[b];if(!a.isNone(h))for(var n=0,l=h.length;n<l;++n)(function(b){setTimeout(function(){b(c)},
0)})(h[n])};return b}();a.message=new a.eventEmitter;a.message.setName=function(){};a.isNone(JSON)&&(a.isNone(JSON.parser)||a.isNone(JSON.stringify))&&function(){function c(c){var e,g,k,q="json"==c;if(q||"json-stringify"==c||"json-parse"==c){if("json-stringify"==c||q){if(e="function"==typeof s.stringify&&z){(k=function(){return 1}).toJSON=k;try{e="0"===s.stringify(0)&&"0"===s.stringify(new Number)&&'""'==s.stringify(new String)&&s.stringify(h)===b&&s.stringify(b)===b&&s.stringify()===b&&"1"===s.stringify(k)&&"[1]"==s.stringify([k])&&"[null]"==s.stringify([b])&&"null"==s.stringify(f)&&
"[null,null,null]"==s.stringify([b,h,f])&&'{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==s.stringify({A:[k,d,!1,f,"\x00\b\n\f\r\t"]})&&"1"===s.stringify(f,k)&&"[\n 1,\n 2\n]"==s.stringify([1,2],f,1)&&'"-271821-04-20T00:00:00.000Z"'==s.stringify(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==s.stringify(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==s.stringify(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==s.stringify(new Date(-1))}catch(l){e=!1}}if(!q)return e}if("json-parse"==
c||q){if("function"==typeof s.parse)try{if(0===s.parse("0")&&!s.parse(!1)&&(k=s.parse('{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'),g=5==k.a.length&&1==k.a[0])){try{g=!s.parse('"\t"')}catch(m){}if(g)try{g=1!=s.parse("01")}catch(n){}}}catch(r){g=!1}if(!q)return g}return e&&g}}var b=void 0,d=!0,f=null,h={}.toString,n,l,t="function"===typeof define&&define.c,s=!t&&"object"==typeof exports&&exports;s||t?"object"==typeof JSON&&JSON?t?s=JSON:(s.stringify=JSON.stringify,s.parse=JSON.parse):t&&(s=
this.JSON={}):s=this.JSON||(this.JSON={});var m,w,u,p,v,e,q,k,x,A,B,r,g,z=new Date(-0xc782b5b800cec),D,C,y;try{z=-109252==z.getUTCFullYear()&&0===z.getUTCMonth()&&1==z.getUTCDate()&&10==z.getUTCHours()&&37==z.getUTCMinutes()&&6==z.getUTCSeconds()&&708==z.getUTCMilliseconds()}catch(E){}c("json")||(z||(D=Math.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],y=function(b,c){return C[c]+365*(b-1970)+D((b-1969+(c=+(1<c)))/4)-D((b-1901+c)/100)+D((b-1601+c)/400)}),(n={}.hasOwnProperty)||(n=function(b){var c=
{},d;(c.__proto__=f,c.__proto__={toString:1},c).toString!=h?n=function(b){var c=this.__proto__;b=b in(this.__proto__=f,this);this.__proto__=c;return b}:(d=c.constructor,n=function(b){var c=(this.constructor||d).prototype;return b in this&&!(b in c&&this[b]===c[b])});c=f;return n.call(this,b)}),l=function(b,c){var d=0,e,g,k;(e=function(){this.valueOf=0}).prototype.valueOf=0;g=new e;for(k in g)n.call(g,k)&&d++;e=g=f;d?d=2==d?function(b,c){var d={},e="[object Function]"==h.call(b),f;for(f in b)e&&"prototype"==
f||n.call(d,f)||(d[f]=1)&&n.call(b,f)&&c(f)}:function(b,c){var d="[object Function]"==h.call(b),e,f;for(e in b)d&&"prototype"==e||!n.call(b,e)||(f="constructor"===e)||c(e);(f||n.call(b,e="constructor"))&&c(e)}:(g="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),d=function(b,c){var d="[object Function]"==h.call(b),e;for(e in b)d&&"prototype"==e||!n.call(b,e)||c(e);for(d=g.length;e=g[--d];n.call(b,e)&&c(e));});d(b,c)},c("json-stringify")||(m=
{"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},w=function(b,c){return("000000"+(c||0)).slice(-b)},u=function(b){for(var c='"',d=0,e;e=b.charAt(d);d++)c+=-1<'\\"\b\f\n\r\t'.indexOf(e)?m[e]:m[e]=" ">e?"\\u00"+w(2,e.charCodeAt(0).toString(16)):e;return c+'"'},p=function(c,e,g,k,q,m,s){var r=e[c],x,B,A,t,v,z,C,E,H;if("object"==typeof r&&r)if(x=h.call(r),"[object Date]"!=x||n.call(r,"toJSON"))"function"==typeof r.toJSON&&("[object Number]"!=x&&"[object String]"!=x&&"[object Array]"!=
x||n.call(r,"toJSON"))&&(r=r.toJSON(c));else if(r>-1/0&&r<1/0){if(y){A=D(r/864E5);for(x=D(A/365.2425)+1970-1;y(x+1,0)<=A;x++);for(B=D((A-y(x,0))/30.42);y(x,B+1)<=A;B++);A=1+A-y(x,B);t=(r%864E5+864E5)%864E5;v=D(t/36E5)%24;z=D(t/6E4)%60;C=D(t/1E3)%60;t%=1E3}else x=r.getUTCFullYear(),B=r.getUTCMonth(),A=r.getUTCDate(),v=r.getUTCHours(),z=r.getUTCMinutes(),C=r.getUTCSeconds(),t=r.getUTCMilliseconds();r=(0>=x||1E4<=x?(0>x?"-":"+")+w(6,0>x?-x:x):w(4,x))+"-"+w(2,B+1)+"-"+w(2,A)+"T"+w(2,v)+":"+w(2,z)+":"+
w(2,C)+"."+w(3,t)+"Z"}else r=f;g&&(r=g.call(e,c,r));if(r===f)return"null";x=h.call(r);if("[object Boolean]"==x)return""+r;if("[object Number]"==x)return r>-1/0&&r<1/0?""+r:"null";if("[object String]"==x)return u(r);if("object"==typeof r){for(c=s.length;c--;)if(s[c]===r)throw TypeError();s.push(r);E=[];e=m;m+=q;if("[object Array]"==x){B=0;for(c=r.length;B<c;H||(H=d),B++)x=p(B,r,g,k,q,m,s),E.push(x===b?"null":x);c=H?q?"[\n"+m+E.join(",\n"+m)+"\n"+e+"]":"["+E.join(",")+"]":"[]"}else l(k||r,function(c){var e=
p(c,r,g,k,q,m,s);e!==b&&E.push(u(c)+":"+(q?" ":"")+e);H||(H=d)}),c=H?q?"{\n"+m+E.join(",\n"+m)+"\n"+e+"}":"{"+E.join(",")+"}":"{}";s.pop();return c}},s.stringify=function(b,c,d){var e,f,g,k,q,m;if("function"==typeof c||"object"==typeof c&&c)if("[object Function]"==h.call(c))f=c;else if("[object Array]"==h.call(c))for(g={},k=0,q=c.length;k<q;m=c[k++],("[object String]"==h.call(m)||"[object Number]"==h.call(m))&&(g[m]=1));if(d)if("[object Number]"==h.call(d)){if(0<(d-=d%1))for(e="",10<d&&(d=10);e.length<
d;e+=" ");}else"[object String]"==h.call(d)&&(e=10>=d.length?d:d.slice(0,10));return p("",(m={},m[""]=b,m),f,g,e,"",[])}),c("json-parse")||(v=String.fromCharCode,e={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"},q=function(){r=g=f;throw SyntaxError();},k=function(){for(var b=g,c=b.length,k,h,m,l,s;r<c;)if(k=b.charAt(r),-1<"\t\r\n ".indexOf(k))r++;else{if(-1<"{}[]:,".indexOf(k))return r++,k;if('"'==k){h="@";for(r++;r<c;)if(k=b.charAt(r)," ">k)q();else if("\\"==k)if(k=b.charAt(++r),-1<
'\\"/btnfr'.indexOf(k))h+=e[k],r++;else if("u"==k){m=++r;for(l=r+4;r<l;r++)k=b.charAt(r),"0"<=k&&"9">=k||"a"<=k&&"f">=k||"A"<=k&&"F">=k||q();h+=v("0x"+b.slice(m,r))}else q();else{if('"'==k)break;h+=k;r++}if('"'==b.charAt(r))return r++,h}else{m=r;"-"==k&&(s=d,k=b.charAt(++r));if("0"<=k&&"9">=k){for("0"==k&&(k=b.charAt(r+1),"0"<=k&&"9">=k)&&q();r<c&&(k=b.charAt(r),"0"<=k&&"9">=k);r++);if("."==b.charAt(r)){for(l=++r;l<c&&(k=b.charAt(l),"0"<=k&&"9">=k);l++);l==r&&q();r=l}k=b.charAt(r);if("e"==k||"E"==
k){k=b.charAt(++r);"+"!=k&&"-"!=k||r++;for(l=r;l<c&&(k=b.charAt(l),"0"<=k&&"9">=k);l++);l==r&&q();r=l}return+b.slice(m,r)}s&&q();if("true"==b.slice(r,r+4))return r+=4,d;if("false"==b.slice(r,r+5))return r+=5,!1;if("null"==b.slice(r,r+4))return r+=4,f}q()}return"$"},x=function(b){var c,e;"$"==b&&q();if("string"==typeof b){if("@"==b.charAt(0))return b.slice(1);if("["==b){for(c=[];;e||(e=d)){b=k();if("]"==b)break;e&&(","==b?(b=k(),"]"==b&&q()):q());","==b&&q();c.push(x(b))}return c}if("{"==b){for(c=
{};;e||(e=d)){b=k();if("}"==b)break;e&&(","==b?(b=k(),"}"==b&&q()):q());","!=b&&"string"==typeof b&&"@"==b.charAt(0)&&":"==k()||q();c[b.slice(1)]=x(k())}return c}q()}return b},B=function(c,d,e){e=A(c,d,e);e===b?delete c[d]:c[d]=e},A=function(b,c,d){var e=b[c],f;if("object"==typeof e&&e)if("[object Array]"==h.call(e))for(f=e.length;f--;)B(e,f,d);else l(e,function(b){B(e,b,d)});return d.call(b,c,e)},s.parse=function(b,c){var d,e;r=0;g=b;d=x(k());"$"!=k()&&q();r=g=f;return c&&"[object Function]"==h.call(c)?
A((e={},e[""]=d,e),"",c):d}));t&&define(function(){return s})}();
a.parser={json:{stringify:function(c){try{return JSON.stringify(c)}catch(b){return a.console.error("a.parser.json.stringify: unable to stringify (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),""}},parse:function(c){try{return JSON.parse(c)}catch(b){return a.console.error("a.parser.json.parse: unable to parse (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null}}},xml:{stringify:function(c){if(!a.isNone(c)&&!a.isNone(c.xml))return c.xml;
if(!a.isNone(window.XMLSerializer))try{return(new window.XMLSerializer).serializeToString(c)}catch(b){a.console.error("a.parser.xml.stringify: unable to stringify (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1)}a.console.error("a.parser.xml.stringify: unable to find any parser available",1);return""},parse:function(c){if(!a.isNone(window.ActiveXObject)){for(var b=null,d=0;4>d;++d)try{b=new ActiveXObject(("MSXML2.DOMDocument."+(6-d)+".0")[d])}catch(f){}b.async=!1;
b.loadXML(c);return 0!=b.parseError.errorCode?(a.console.error("a.parser.xml.parse: unable to parse (value: "+c+", reason"+b.parseError.reason+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null):b}if(!a.isNone(window.DOMParser))return(new DOMParser).parseFromString(c,"text/xml");a.console.error("a.parser.xml.parse: unable to find any parser available",1);return null}}};a.timer=function(){var c={};setInterval(function(){a.message.dispatch("a.timer.tick");for(var b in c){var d=c[b];d.current+=50;d.current>=d.timeout&&(d.current=0,a.isFunction(d.fct)&&d.fct.call(d.scope||this))}},50);return{add:function(b,d,f){var h;for(h=Math.floor(1E6*Math.random());!a.isNone(c[h]);)h=Math.floor(1E6*Math.random());if(!a.isNumber(f)||0>=f)f=1E3,a.console.warn("The timeout has not been setted properly into timer, timeout has been setted to 1000ms",1);c[h]={fct:b,scope:d,timeout:f,
current:0};return h},once:function(b,c,f){var h=this.add(function(){a.isFunction(b)&&b.call(this);a.timer.remove(h)},c,f);return h},get:function(b){b=c[b];return a.isNone(b)?null:b},remove:function(b){return delete c[b]},clear:function(){c={}}}}();a.dom={query:function(c,b){b=a.isObject(b)?b:document;return!b.querySelectorAll&&window.jQuery?this.el(jQuery(c)):this.el(b.querySelectorAll(c))},el:function(c){if(window.jQuery&&c instanceof jQuery){for(var b=[],d=c.size();d--;)b.push(c.get(d));c=b}return a.isArray(c)?new this.children(c):new this.children([c])},id:function(c){return this.attr("id",c,document)},cls:function(c,b){return this.attr("class",c,b)},tag:function(c,b){b=a.isObject(b)?b:document;var d=a.isString(c)?c.replace(/ /g,"").split(","):
c,f=[],h=d.length;if(1<h){for(;h--;)for(var n=this.tag(d[h],b).getElements(),l=n.length;l--;)a.contains(f,n[l])||f.push(n[l]);return new a.dom.children(f)}f=b.querySelectorAll?b.querySelectorAll(c):b.getElementsByTagName(c);return new a.dom.children(f)},attr:function(c,b,d){function f(b,c){for(var d=c.length;d--;)a.contains(b,c[d])||b.push(c[d])}if(a.isNone(d)){a.isNone(b)&&(b=document);if(a.isObject(b))return this.attr(c,null,b);d=document}if(c&&(a.isArray(c)||0<=c.indexOf(","))){var h=a.isString(c)?
c.replace(/ /g,"").split(","):c,n=h.length;if(1<n){for(var l=[];n--;){var t=this.attr(h[n],b,d),t=t.getElements();f(l,t)}return new a.dom.children(l)}}if(b&&(a.isArray(b)||0<b.indexOf(","))&&(h=a.isString(b)?b.replace(/ /g,"").split(","):b,n=h.length,1<n)){for(l=[];n--;)t=this.attr(c,h[n],d),t=t.getElements(),f(l,t);return new a.dom.children(l)}h=a.isString(b);l=[];c=c.replace(/ /g,"");b=b.replace(/ /g,"");if("class"==c)l=d.getElementsByClassName(b);else if("id"==c)l=[d.getElementById(b)];else if(d.querySelectorAll)l=
d.querySelectorAll(h?"["+c+'="'+b+'"]':"["+c+"]");else for(d=d.getElementsByTagName("*"),n=d.length;n--;){var t=d[n],s=t.getAttribute(c);s&&(h&&s==b||!h)&&(a.contains(l,t)||l.push(t))}return new a.dom.children(l)}};a.dom.children=function(c){this.elementList=c="undefined"===typeof c.length?[c]:c;this.length=c.length};
a.dom.children.prototype={_perform:function(){var c=[],b=this.elementList,d=Array.prototype.slice.call(arguments),f=d[0],d=d.slice(1),h=d.length,n=b.length;for(d.push(null);n--;){d[h]=b[n];for(var l=f.apply(a.dom,d).getElements(),t=l.length;t--;)a.contains(c,l[t])||c.push(l[t])}this.elementList=c;this.length=c.length;return this},get:function(c){return this.elementList[c]||null},getElements:function(){return this.elementList},id:function(c){return this._perform(a.dom.id,c)},cls:function(c){return this._perform(a.dom.cls,
c)},css:function(c,b){if("undefined"===typeof b){for(var d=[],f=this.elementList,h=f.length;h--;){var n=f[h].style[c];a.isNone(n)||d.push(n)}return 1>=d.length?d[0]||"":d}this.each(function(){this.style[c]=b})},addClass:function(c){this.each(function(){this.classList?this.classList.add(c):this.className.match(RegExp("(\\s|^)"+c+"(\\s|$)"))||(this.className+=" "+c)});return this},hasClass:function(c){c=RegExp("(\\s|^)"+c+"(\\s|$)");for(var b=this.elementList,d=b.length;d--;)if(!b[d].className.match(c))return!1;
return!0},removeClass:function(c){this.each(function(b){this.classList?this.classList.remove(c):(b=RegExp("(\\s|^)"+c+"(\\s|$)"),this.className.match(b)&&this.className.replace(b,""))},this);return this},toggleClass:function(c){this.each(function(b){this.classList?this.classList.toggle(c):(b=RegExp("(\\s|^)"+c+"(\\s|$)"),this.className.match(b)?this.className.replace(b,""):this.className+=" "+c)},this);return this},bind:function(c,b){var d=a.isString(c)?c.split(" "):c;for(i=d.length;i--;)d[i]&&""!=
d[i]&&this.each(function(c){document.addEventListener?this.addEventListener(c,b,!1):document.attachEvent?this.attachEvent("on"+c,b):this["on"+c]=b},d[i].toLowerCase());return this},unbind:function(c,b){var d=a.isString(c)?c.split(" "):c;for(i=d.length;i--;)d[i]&&""!=d[i]&&this.each(function(c){document.removeEventListener?this.removeEventListener(c,b,!1):document.detachEvent?this.detachEvent("on"+c,b):this["on"+c]=void 0},d[i].toLowerCase());return this},tag:function(c){return this._perform(a.dom.tag,
c)},attr:function(c,b){return this._perform(a.dom.attr,c,b)},attribute:function(c,b){if("undefined"===typeof b){for(var d=[],f=this.elementList,h=f.length;h--;)try{var n=f[h].getAttribute();a.isNone(n)||a.contains(d,n)||d.push(n)}catch(l){}return d}this.each(function(){try{this.setAttribute(c,b)}catch(d){}});return this},data:function(c,b){return this.attribute("data-"+c,b)},parent:function(){for(var c=this.elementList,b=c.length;b--;)c[b]=c[b].parentNode;return this},insertBefore:function(c){this.each(function(){this.parentNode.insertBefore(c,
this)});return this},insertAfter:function(c){this.each(function(){this.parentNode.insertBefore(c,this.nextSibling)});return this},empty:function(){this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)});return this},remove:function(c){this.each(function(){try{this.parentNode.removeChild(c)}catch(b){}});return this},append:function(c){this.each(function(){this.appendChild(c)});return this},replace:function(c){this.empty();this.append(c);return this},each:function(){for(var c=
this.elementList,b=Array.prototype.slice.call(arguments),d=b[0],b=b.slice(1),d=a.isFunction(d)?d:function(){},f=0,h=c.length;f<h;++f)d.apply(c[f],b);return this}};a.ajax=function(c,b,d){var f=a.getDefaultAjaxOptions();this.params={url:"",method:"GET",type:"raw",async:!0,cache:!1,data:{},header:{}};for(var h in this.params)"data"!==h&&"header"!==h&&(h in f&&typeof f[h]===typeof this.params[h]&&(this.params[h]=f[h]),h in c&&typeof c[h]===typeof this.params[h]&&(this.params[h]=c[h]));if(a.isObject(f.data))for(var n in f.data)this.params.data[n]=f.data[n];if(a.isObject(f.header))for(var l in f.header)this.params.header[l]=f.header[l];if(a.isString(c.data))this.params.data=
c.data;else if(a.isObject(c.data))for(var t in c.data)this.params.data[t]=c.data[t];if(a.isObject(c.header))for(var s in c.header)this.params.header[s]=c.header[s];this.success=a.isFunction(b)?b:function(){};this.error=a.isFunction(d)?d:function(){};this.request=null;if(a.isNone(window.XMLHttpRequest)){c=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var m in c)try{this.request=new ActiveXObject(c[m])}catch(w){}}else this.request=new XMLHttpRequest};
a.ajax.prototype.parseResult=function(c,b){if(204===b.status)return"";var d=c.type.toLowerCase();return"json"===d?a.parser.json.parse(b.responseText):"xml"===d?b.responseXML:b.responseText};a.ajax.prototype.abort=function(){try{this.request.abort()}catch(c){}};
a.ajax.prototype.send=function(){var c=this.params.method.toUpperCase();if(!1===this.params.cache){var b=Math.floor(1E5*Math.random())+1;try{this.params.data.cachedisable=b}catch(d){}}b="";if(a.isString(this.params.data))b=this.params.data;else{for(var f in this.params.data)b+=encodeURIComponent(f)+"="+encodeURIComponent(this.params.data[f])+"&";b=b.slice(0,-1)}var h=this.params.url;f=this.params.async;"GET"===c&&""!==b&&(h+="?"+b);if(!0===f){var n={success:this.success,params:this.params,error:this.error,
request:this.request,parseResult:this.parseResult};this.request.onreadystatechange=function(){if(4===n.request.readyState){var b=200<=n.request.status&&400>n.request.status;b?n.success(n.parseResult(n.params,n.request),n.request.status):n.error(h,n.request.status);a.message.dispatch("a.ajax",{success:b,status:n.request.status,url:n.params.url,method:n.method,params:n.params})}}}this.request.open(c,h,f);var l=["Content-Type","Content-type","content-type"],t=!1,s;for(s in this.params.header)this.request.setRequestHeader(s,
this.params.header[s]),!t&&a.contains(l,s)&&(t=!0);t||"POST"!==c||this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.request.send(b);return!1===f?this.parseResult(this.params,this.request):"No return in async mode"};a.loader=function(){function c(b,c){if(a.isNone(b))return!1;for(var d=0,h=f.length;d<h;++d)if(f[d]===b)return a.isFunction(c)&&c(),!0;return!1}function b(b,c,d,m,n,u){for(var p in c)b.setAttribute(p,c[p]);!a.isNone(n)&&n.id&&b.setAttribute("id",n.id);var v=!1,e=function(c){v||(v=!0,a.isFunction(d)&&d(b),(a.isNone(n)||!1!==n.cache)&&f.push(m))};b.addEventListener?b.addEventListener("load",e,!1):b.readyState?b.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||e()}:
b.onload=e;if("text/css"===c.type){var q=document.styleSheets.length;h++;var k=a.timer.add(function(){document.styleSheets.length>q+h-1&&(h--,a.timer.remove(k),e())},null,50)}document.getElementsByTagName("head")[0].appendChild(b)}function d(b,c,d,h){var w={url:b,method:"GET",type:"raw",async:!0,cache:!0,data:{},header:{}};a.console.log("a.loader: load resource (url: "+b+")",3);a.isNone(d)||(a.contains(n,d.method)&&(w.method=d.method),a.isNone(d.type)||"json"!==d.type&&"xml"!==d.type||(w.type=d.type),
a.isObject(d.data)&&(w.data=d.data),a.isObject(d.header)&&(w.header=d.header),a.isBoolean(d.cache)&&(w.cache=d.cache));h=a.isFunction(h)?h:function(){};(new a.ajax(w,function(h,m){a.isFunction(c)&&c(h,m);(a.isNone(d)||!1!==d.cache)&&f.push(b)},h)).send()}var f=[],h=0,n="GET POST PUT DELETE HEAD OPTIONS".split(" ");return{js:function(b,d,f,h){c(b,d)||this.jsonp(b,d,f,h)},jsonp:function(c,d,f,h){var n=a.isObject(f)&&f.type?f.type:"text/javascript";a.console.log("a.loader: load resource (url: "+c+")",
3);b(document.createElement("script"),{type:n,src:c},d,c,f,h)},json:function(b,c,f,h){a.isObject(f)||(f={});f.type="json";a.isObject(f.header)||(f.header={});f.header.accept="application/json, text/javascript";d(b,c,f,h)},xml:function(b,c,f,h){a.isObject(f)||(f={});f.type="xml";a.isObject(f.header)||(f.header={});f.header.accept="application/xml, text/xml";d(b,c,f,h)},css:function(d,f,h,m){c(d,f)||(a.console.log("a.loader: load resource (url: "+d+")",3),b(document.createElement("link"),{rel:"stylesheet",
type:"text/css",href:d},f,d,h,m))},html:function(b,f,h,m){c(b,f)||(a.isObject(h)||(h={}),h.type="raw",!0===a.environment.get("debug")&&(h.cache=!1),a.isObject(h.header)||(h.header={}),h.header.accept="text/html",d(b,f,h,m))},javafx:function(b,d,f,h){if(a.isNone(f)||a.isNone(f.code)||a.isNone(f.id))a.console.warn("a.loader.javafx : the system need args.code and args.name setted to be able to load any javafx resource... This uri will not be loaded : "+b,3);else if(!c(b,d)){this.js("http://dl.javafx.com/"+
(f.version?f.version:"1.3")+"/dtfx.js",function(){javafx({archive:b,width:f.width||1,height:f.height||1,code:f.code,name:f.id})});var n=null,u=2E3,n=a.timer.add(function(){0<u--&&!a.isNone(document.getElementById(f.id).Packages)?(a.timer.remove(n),a.isFunction(d)&&d()):0>=u&&a.isFunction(h)&&h(b,408)},null,200)}},flash:function(b,d,f,h){a.isNone(f)||a.isNone(f.rootId)||a.isNone(f.id)?a.console.warn("a.loader.flash : the system need args parameters : rootId, id, setted to be able to load any flash resource... This uri will not be loaded : "+
b,3):c(b,d)||this.js(a.url+"vendor/storage/flash/swfobject.js",function(){swfobject.embedSWF(b,f.rootId,"100%","100%","10.0.0",a.url+"vendor/storage/flash/expressInstall.swf",f.flashvars,f.params,{id:f.id},function(c){!1===c.success&&a.isFunction(h)?h(b,408):!0===c.success&&a.isFunction(d)&&setTimeout(d,500)})})},silverlight:function(b,d,f,h){if(a.isNone(f)||a.isNone(f.rootId)||a.isNone(f.id))a.console.warn("a.loader.silverlight : the system need args parameters : rootId, id, setted to be able to load any silverlight resource... This uri will not be loaded : "+
b,3);else if(!c(b,d)){a.console.log("a.loader: load resource (url: "+b+")",3);var n=document.createElement("object");n.id=f.id;n.data="data:application/x-silverlight-2,";n.type="application/x-silverlight-2";a.isArray(f.params)||(f.params=[]);f.params.push({name:"source",value:b});for(var u=0,p=f.params.length;u<p;++u){var v=document.createElement("param");v.name=f.params[u].name;v.value=f.params[u].value;n.appendChild(v)}document.getElementById(f.rootId).appendChild(n);var e=null,q=2E3,e=a.timer.add(function(){0<
q--&&!a.isNone(document.getElementById(f.id).Content)?(a.timer.remove(e),d()):0>=q&&a.isFunction(h)&&h(b,408)},null,200)}},trace:function(){return f}}}();a.keyboard=function(c){return a.isNone(c)?(a.console.error("a.keyboard.global: error, Mousetrap is undefined, the plugin a.keyboard will not work",1),{addListener:function(){},removeListener:function(){},reset:function(){},clear:function(){}}):{addListener:function(b,d){a.console.log("a.keyboard.addListener: bind key: "+b,3);c.bind(b,d)},removeListener:function(b){a.console.log("a.keyboard.removeLister: remove listener on key: "+b,3);c.unbind(b)},reset:function(){a.console.log("a.keyboard.reset: clear all keys",
3);c.reset()},clear:function(){a.console.log("a.keyboard.clear: clear all keys",3);c.reset()}}}(window.Mousetrap);a.callback={};
a.callback.synchronizer=function(){function c(){t--;0>=t&&!1===u?(w=!1,v.prototype.dispatch("a.callback.synchronizer.success",{}),s(p)):0>=t&&(w=u=!1)}function b(){!0===w&&(u=!0,w=!1,v.prototype.dispatch("a.callback.synchronizer.error",{}),m.apply(this,arguments))}function d(b,c){p[b]=c}function f(b){a.isObject(b)&&(p=b)}function h(b){return a.isNone(p[b])?null:p[b]}function n(){return p}var l=[],t=0,s=function(){return!0},m=function(){return!0},w=!1,u=!1,p={},v=function(){};v.prototype=new a.eventEmitter;
v.prototype.constructor=this;v.prototype.setSuccess=function(b){s=a.isFunction(b)?b:s};v.prototype.setDone=v.prototype.setSuccess;v.prototype.setFail=function(b){m=a.isFunction(b)?b:m};v.prototype.setError=v.prototype.setFail;v.prototype.addCallback=function(){for(var e=[],e=!a.isNone(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,k=0,m=e.length;k<m;++k){var p=e[k];a.isFunction(p)&&(t++,l.push(p),!0===w&&p({success:c,done:c,getData:h,getFullData:n,setData:d,setFullData:f,fail:b,error:b}))}!0===
w&&a.console.warn("a.callback.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",1)};v.prototype.removeCallback=function(b){for(var c=l.length-1;0<=c;--c)l[c]===b&&(!0===w&&a.console.warn("a.callback.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1),t--,l.splice(c,1))};v.prototype.start=function(e,k){if(0>=t)c();else{w=!0;p={};for(var m=0,A=l.length;m<A;++m)l[m]({success:c,done:c,getData:h,getFullData:n,setData:d,
setFullData:f,fail:b,error:b},k);a.isNumber(e)&&0<e?setTimeout(function(){var c=parseInt(e,10);v.prototype.dispatch("a.callback.synchronizer.error",{timeout:c});b({timeout:c})},e):v.prototype.dispatch("a.callback.synchronizer.start",{timeout:-1})}};v.prototype.isRunning=function(){return w};var e=new v;e.setName("a.callback.synchronizer");return e};
a.callback.chainer=function(){function c(){0==m.length?(m=[],t(w),u.prototype.dispatch("a.callback.chainer.success",{})):u.prototype.start(arguments)}function b(){m=[];s.apply(this,arguments);u.prototype.dispatch("a.callback.chainer.error",{})}function d(b,c){w[b]=c}function f(b){a.isObject(b)&&(w=b)}function h(b){return a.isNone(w[b])?null:w[b]}function n(){return w}var l=[],t=function(){return!0},s=function(){return!0},m=[],w={},u=function(){};u.prototype=new a.eventEmitter;u.prototype.constructor=
this;u.prototype.setSuccess=function(b){t=a.isFunction(b)?b:t};u.prototype.setDone=u.prototype.setSuccess;u.prototype.setFail=function(b){s=a.isFunction(b)?b:s};u.prototype.setError=u.prototype.setFail;u.prototype.addCallback=function(){for(var b=[],b=!a.isNone(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,c=0,d=b.length;c<d;++c){var f=b[c];a.isFunction(f)&&(l.push(f),!0===u.prototype.isRunning()&&m.push(f))}!0===u.prototype.isRunning()&&a.console.warn("a.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",
1)};u.prototype.removeCallback=function(b){for(var c=l.length-1;0<=c;--c)if(l[c]===b){if(!0===u.prototype.isRunning()){for(var d=m.length-1;0<=d;--d)m[d]===b&&m.splice(d,1);a.console.warn("a.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1)}l.splice(c,1)}};u.prototype.start=function(){if(0==m.length){for(var p=0,e=l.length;p<e;++p)m.push(l[p]);u.prototype.dispatch("a.callback.chainer.start",{});w={};0==m.length&&c()}p=m.shift();a.isFunction(p)&&p({success:c,
done:c,getData:h,getFullData:n,setData:d,setFullData:f,fail:b,error:b},arguments)};u.prototype.isRunning=function(){return 0==m.length?!1:!0};var p=new u;p.setName("a.callback.chainer");return p};a.storage={__printGetItem:function(c,b,d){"__test_support"!==b&&a.console.log("a.storage.type."+c+".getItem: get element (key: "+b+", value: "+d+")",3)},__printGetErrorItem:function(c,b){"__test_support"!==b&&a.console.log("a.storage.type."+c+".getItem: unable to find key ("+b+") in store",2)},__printSetItem:function(c,b,d){"__test_support"!==b&&a.console.log("a.storage.type."+c+".setItem: add element (key: "+b+", value: "+d+")",3)},__printRemoveItem:function(c,b){"__test_support"!==b&&a.console.log("a.storage.type."+
c+".removeItem: remove element (key: "+b+")",3)},type:{}};
a.storage.type.cookie=function(){var c=!1,b={support:!1,engine:"cookie",setItem:function(b,c,h){var n="";a.storage.__printSetItem("cookie",b,c);h&&(n=new Date,n.setTime(n.getTime()+864E5*h),n="; expires="+n.toGMTString());document.cookie=b+"="+escape(a.parser.json.stringify(c))+n+"; path=/"},getItem:function(b){if(0<document.cookie.length){var c=document.cookie.indexOf(b+"=");if(-1!=c){var c=c+b.length+1,h=document.cookie.indexOf(";",c);-1==h&&(h=document.cookie.length);c=a.parser.json.parse(unescape(document.cookie.substring(c,
h)));a.storage.__printGetItem("cookie",b,c);return c}}a.storage.__printGetErrorItem("cookie",b);return null},removeItem:function(b){a.storage.__printRemoveItem("cookie",b);this.setItem(b,"",-1);c&&a.message.dispatch("a.storage.remove",{key:b})}};b.setItem("__test_support","ok");"ok"===b.getItem("__test_support")&&(b.removeItem("__test_support"),b.support=!0);c=!0;return b}();a.storage.cookie=a.storage.type.cookie;
a.storage.type.localStorage=function(){var c=!1;"localStorage"in window&&null!==window.localStorage&&(window.localStorage.setItem("__test_support","o"),"o"===window.localStorage.getItem("__test_support")&&(window.localStorage.removeItem("__test_support"),c=!0));return{support:c,engine:"localStorage",getItem:function(b){if(c){var d=window.localStorage.getItem(b);if(a.isNone(d))return a.storage.__printGetErrorItem("localStorage",b),null;d=a.parser.json.parse(d);a.storage.__printGetItem("localStorage",
b,d);return d}return null},setItem:function(b,d){c&&(a.storage.__printSetItem("localStorage",b,d),window.localStorage.setItem(b,a.parser.json.stringify(d)),a.message.dispatch("a.storage.add",{key:b,value:d}))},removeItem:function(b){c&&(a.storage.__printRemoveItem("localStorage",b),window.localStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.globalStorage=function(){var c=!1,b=window.location.hostname;a.isNone(window.globalStorage)||(window.globalStorage[b].setItem("__test_support","ok"),"ok"==window.globalStorage[b].getItem("__test_support")&&(window.globalStorage[b].removeItem("__test_support"),c=!0));return{support:c,engine:"globalStorage",getItem:function(d){if(c){var f=window.globalStorage[b].getItem(d);if(a.isObject(f)&&!a.isNone(f.value))return f=a.parser.json.parse(f.value),a.storage.__printGetItem("globalStorage",
d,f),f;if(a.isNone(f))a.storage.__printGetErrorItem("globalStorage",d);else return f=a.parser.json.parse(f),a.storage.__printGetItem("globalStorage",d,f),f}return null},setItem:function(d,f){c&&(a.storage.__printSetItem("globalStorage",d,f),window.globalStorage[b].setItem(d,a.parser.json.stringify(f)),a.message.dispatch("a.storage.add",{key:d,value:f}))},removeItem:function(d){c&&(a.storage.__printRemoveItem("globalStorage",d),window.globalStorage[b].removeItem(d),a.message.dispatch("a.storage.remove",
{key:d}))}}}();
a.storage.type.memory=function(){var c={};return{support:!0,engine:"memory",getItem:function(b){var d=c[b];if(!a.isNone(d))return a.storage.__printGetItem("memory",b,d),a.console.log("a.storage.memory.getItem: found item (key: "+b+", value: "+d+")",3),d;a.storage.__printGetErrorItem("memory",b);return null},setItem:function(b,d){c[b]=d;a.storage.__printSetItem("memory",b,d);a.message.dispatch("a.storage.add",{key:b,value:d})},removeItem:function(b){a.storage.__printRemoveItem("memory",b);a.isNone(c[b])||
(delete c[b],a.message.dispatch("a.storage.remove",{key:b}))}}}();a.storage.memory=a.storage.type.memory;
a.storage.type.sessionStorage=function(){var c=!1;"sessionStorage"in window&&!a.isNone(window.sessionStorage)&&(window.sessionStorage.setItem("__test_support","o"),"o"===window.sessionStorage.getItem("__test_support")&&(window.sessionStorage.removeItem("__test_support"),c=!0));return{support:c,engine:"sessionStorage",getItem:function(b){if(c){var d=window.sessionStorage.getItem(b);if(a.isNone(d))return a.storage.__printGetErrorItem("sessionStorage",b),null;d=a.parser.json.parse(d);a.storage.__printGetItem("sessionStorage",
b,d);return d}return null},setItem:function(b,d){c&&(a.storage.__printSetItem("sessionStorage",b,d),window.sessionStorage.setItem(b,a.parser.json.stringify(d)),a.message.dispatch("a.storage.add",{key:b,value:d}))},removeItem:function(b){c&&(a.storage.__printRemoveItem("sessionStorage",b),window.sessionStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.userData=function(){var c=!1;if(document.all)try{document.write('<input type="hidden" id="a_storage" style="display:none;behavior:url(\'#default#userData\')" />');var b=document.getElementById("a_storage");b.load("aUserDataStorage");b.setAttribute("__test_support","ok");b.save("aUserDataStorage");"ok"===b.getAttribute("__test_support")&&(b.removeAttribute("__test_support"),b.save("aUserDataStorage"),c=!0)}catch(d){c=!1}return{support:c,engine:"userData",getItem:function(d){if(c){var h=
a.parser.json.parse(b.getAttribute(d));if(a.isNone(h))return a.storage.__printGetErrorItem("userData",d),null;a.storage.__printGetItem("userData",d,h);return h}return null},setItem:function(d,h){c&&(a.storage.__printSetItem("userData",d,h),b.setAttribute(d,a.parser.json.stringify(h)),b.save("aUserDataStorage"),a.message.dispatch("a.storage.add",{key:d,value:h}))},removeItem:function(d){c&&(a.storage.__printRemoveItem("userData",d),b.removeAttribute(d),b.save("aUserDataStorage"),a.message.dispatch("a.storage.remove",
{key:d}))}}}();
a.storage.type.flash=function(){function c(c){if(!1===b&&!1===d){var n=document.createElement("div");n.id="flashstoragecontent";document.body.appendChild(n);var l={id:f,rootId:n.id,flashvars:{},params:{wmode:"transparent",menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always"}};a.loader.flash(a.url+"vendor/storage/flash/localStorage.swf",function(f){d=!0;f=document.getElementById(l.id);!0===f.testData()&&(b=!0,f.setDatabase("a_flashStorage"));!0===b&&a.isFunction(c)&&c(b)},
l)}else!0===b&&a.isFunction(c)&&c(b)}var b=!1,d=!1,f="flashstorage";return{support:function(){return b},ready:function(){return d},engine:"flash",start:function(b){c(b)},getItem:function(c){this.start();if(!0===b){var d=document.getElementById(f).getData(c);if(a.isNone(d))return a.storage.__printGetErrorItem("flash",c),null;a.storage.__printGetItem("flash",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("flash",c,d),document.getElementById(f).setData(c,
d))},removeItem:function(c){this.start();if(!0===b)return a.storage.__printRemoveItem("flash",c),document.getElementById(f).removeData(c)}}}();
a.storage.type.silverlight=function(){function c(c){if(!1===b&&!1===d){var n=document.createElement("div");n.id="__silverlightstorage";document.body.appendChild(n);var l={id:f,rootId:n.id,params:[{name:"minRuntimeVersion",value:"2.0.31005.0"},{name:"autoUpgrade",value:"true"}]};a.loader.silverlight(a.url+"vendor/storage/silverlight/silverlightStorage.xap",function(f){d=!0;!0===document.getElementById(l.id).Content.store.testData()&&(b=!0);!0===b&&a.isFunction(c)&&c(b)},l)}else!0===b&&a.isFunction(c)&&
c(b)}var b=!1,d=!1,f="silverlightstorage";return{support:function(){return b},ready:function(){return d},engine:"silverlight",start:function(b){c(b)},getItem:function(c){this.start();if(!0===b){var d=document.getElementById(f).Content.store.loadData(c);if(a.isNone(d)||"false"===d)return a.storage.__printGetErrorItem("silverlight",c),null;d=a.parser.json.parse(d);a.storage.__printGetItem("silverlight",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("silverlight",
c,d),document.getElementById(f).Content.store.saveData(c,a.parser.json.stringify(d)))},removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("silverlight",c),document.getElementById(f).Content.store.removeData(c))}}}();
a.storage.type.javafx=function(){function c(c){!1===b&&!1===d?a.loader.javafx(a.url+"vendor/storage/javafx/JavaFXStorage.jar",function(){d=!0;!0===document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.testData()&&(b=!0,el.setDatabase("a_javafxStorage"));!0===b&&a.isFunction(c)&&c(b)},{code:"javafxstorage.Main",id:"javafxstorage"}):!0===b&&a.isFunction(c)&&c(b)}var b=!1,d=!1;return{support:function(){return b},ready:function(){return d},engine:"javafx",start:function(b){c(b)},
getItem:function(c){this.start();if(!0===b){var d=document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.loadData(c);if(a.isNone(d)||"false"===d)return a.storage.__printGetErrorItem("javafx",c),null;d=a.parser.json.parse(d);a.storage.__printGetItem("javafx",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("javafx",c,d),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.saveData(c,a.parser.json.stringify(d)))},
removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("javafx",c),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.removeData(c))}}}();a.storage.temporary=function(){for(var c=["sessionStorage","cookie","memory"],b=0,d=c.length;b<d;++b){var f=c[b];if(a.storage.type[f].support)return a.console.log("a.storage.temporary: choosing storage "+a.storage.type[f].engine,3),a.message.dispatch("a.storage.temporary.change",{engine:f}),a.storage.type[f]}return null}();
a.storage.external=function(){function c(b,c){a.storage.external.ready=b.ready;a.storage.external.support=b.support;a.storage.external.engine=b.engine;a.storage.external.getItem=b.getItem;a.storage.external.setItem=b.setItem;a.storage.external.removeItem=b.removeItem;a.isFunction(c)&&c()}return{start:function(b){var d=a.storage.type.silverlight,f=a.storage.type.flash,h=a.storage.type.javafx;d.start(function(n){n?(a.console.log("a.storage.external: choosing storage silverlight",3),c(d,b)):f.start(function(d){d?
(a.console.log("a.storage.external: choosing storage flash",3),c(f,b)):h.start(function(d){d?(a.console.log("a.storage.external: choosing storage javafx",3),c(h,b)):a.console.warn("a.storage.external: choosing storage NONE AVAILABLE",3)})})})}}}();
a.storage.persistent=function(){for(var c=["localStorage","globalStorage","userData","cookie"],b=0,d=c.length;b<d;++b){var f=c[b];if(a.storage.type[f].support)return a.console.log("a.storage.persistent: choosing storage "+a.storage.type[f].engine,3),a.message.dispatch("a.storage.persistent.change",{engine:f}),a.storage.type[f]}return null}();
null==a.storage.persistent&&(a.storage.persistent={},a.storage.persistent.support=!1,a.storage.persistent.engine=function(){return"none"},a.storage.persistent.getItem=function(){return null},a.storage.persistent.setItem=function(){},a.storage.persistent.removeItem=function(){});a.storage.support=a.storage.persistent.support;a.storage.engine=a.storage.persistent.engine;a.storage.getItem=a.storage.persistent.getItem;a.storage.setItem=a.storage.persistent.setItem;a.storage.removeItem=a.storage.persistent.removeItem;a.language=function(){function c(b,c){if(a.isNone(t[b]))return null;var d=t[b][c];if(a.isNone(d))a.console.info("a.language.__getRawTranslate: unable to find hash in dictionnary (value: "+c+", language: "+b+")",3);else return d;return null}function b(b){b=""+b;0>b.indexOf("{{")&&(b="{{"+b+"}}");b=b.replace("{{","\\{\\{");return b=b.replace("}}","\\}\\}")}function d(d,e){var f=c(n,d);if(!a.isNone(f)){var h=f;if(a.isArray(e))for(var m=0,r=e.length;m<r;++m)var g=b(m+1),g=RegExp(g,"gi"),h=h.replace(g,
e[m]);else for(m in e)g=b(m),g=RegExp(g,"gi"),h=h.replace(g,e[m]);if(0<=h.indexOf("{{")&&0<=h.indexOf("}}"))for(f=f.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],m=0,r=f.length;m<r;++m){var g=b(f[m]),l=f[m].replace("{{","").replace("}}",""),l=a.isNone(u[l])?null:u[l];a.isNone(l)||(g=RegExp(g,"gi"),h=h.replace(g,l))}return h=h.replace(/\{\{[a-z\-_0-9]+\}\}/gi,"")}return d}function f(b,c){a.isString(c)||(c=m);try{return b.getAttribute(c)}catch(d){return null}}function h(b){a.isNone(b)&&(b=document);var e=[];
a.isNone(f(b))||e.push(b);var h=[];b.querySelectorAll?(h=b.querySelectorAll("*["+m+"]"),0===h.length&&(h=b.querySelectorAll("*"))):h=b.getElementsByTagName("*");b=0;for(var l=h.length;b<l;++b)a.isNone(f(h[b]))||e.push(h[b]);h=0;for(b=e.length;h<b;++h){var p=e[h],l=f(p);if(!a.isNone(l)){var r=c(n,l),g={};a.isNone(r)&&(r=l);for(var r=r.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],t=0,v=r.length;t<v;++t){var C=r[t].replace("{{","").replace("}}",""),y=f(p,m+"-"+C);a.isNone(y)?(y="undefined"===u[C]?null:u[C],a.isNone(y)||
(g[C]=y)):g[C]=y}r=d(l,g);l=f(p,w);if(!a.isNone(l))try{p[l]=r}catch(E){}else if(p)if("INPUT"!==p.nodeName||"submit"!==p.type&&"reset"!==p.type)if("INPUT"===p.nodeName)try{p.placeholder=r}catch(J){}else if("FIELDSET"===p.nodeName)p.title=r;else if(!a.isNone(p.text)&&document.all)p.text=r;else if(a.isNone(p.childNodes))p.innerHTML=r;else if(l=p.childNodes.length,g=document.createTextNode(r),"leave"===s){for(r=!1;l--;)t=p.childNodes[l],3===t.nodeType&&(r||(p.insertBefore(g,t),r=!0),p.removeChild(t));
r||p.appendChild(g)}else{for(;l--;)p.removeChild(p.firstChild);p.appendChild(g)}else p.value=r}}}var n="en",l=["en","fr","de","sp"],t={},s="leave",m="data-tr",w="data-tr-attr",u={},p=!a.isNone(a.storage)&&!0===a.storage.persistent.support;if(p){var v=a.storage.persistent.getItem("a_language_store_language"),e=a.storage.persistent.getItem("a_language_store_allowed");a.isString(v)&&(n=v,h(document));a.isArray(e)&&(l=e)}return{setBehavior:function(b){s="erase"===b?"erase":"leave"},getBehavior:function(){return s},
getCurrent:function(){return n},setCurrent:function(b,c){!a.isString(b)||0>=b.length?a.console.error("a.language.setCurrent: setting a non-string lang, or empty string, as default language: "+b,1):(a.isNone(c)&&(c=!0),a.contains(l,b)||a.console.warn("a.language.setCurrent: unable to find language in available language list (value: "+b+", available: "+l.join(";")+")",2),n=b,a.isNone(t[n])&&(t[n]={}),a.console.log("a.language.setCurrent: set current language to "+n+", request update ? "+c,3),a.message.dispatch("a.language.change",
{value:n}),p&&a.storage.persistent.setItem("a_language_store_language",n),this.translate(document,c))},getAllowed:function(){return l},setAllowed:function(b){a.isString(b)&&(b=[b]);if(a.isArray(b)){l=b;var c=0;for(b=b.length;c<b;++c)a.isNone(t[c])&&(t[c]={});p&&(a.console.log("a.language.setAllowed: set allowed language to "+l,3),a.storage.persistent.setItem("a_language_store_allowed",l))}else a.console.error("a.language.setAllowed: the allowed language must be an Array (value: "+b+")",1)},getSingleTranslation:function(b,
c){return d(b,c)},addSingleTranslation:function(b,c,d,e){a.isNone(t[b])&&(a.console.warn("a.language.addSingleTranslation: be carefull, the language you submit does not seems to exist in dict (value: "+b+", dict: "+l.join(";")+")",1),t[b]={});t[b][c]=d;this.translate(document,e)},addTranslation:function(b,c,d){a.isNone(t[b])&&(t[b]={});for(var e in c)t[b][e]=c[e];this.translate(document,d)},getTranslation:function(b){return a.isString(b)?t[b]:t},translate:function(b,c){!1!==c&&h(b)},addVariable:function(b,
c){a.console.log("a.language.addVariable: add global variable (key: "+b+", value: "+c+")",3);u[b]=c},getVariable:function(b){return"undefined"===u[b]?null:u[b]},removeVariable:function(b){a.console.log("a.language.removeVariable: remove global variable (key: "+b+")",3);delete u[b]},clear:function(){t={}}}}();a.form=function(){function c(b,c){return a.isNone(b.getAttribute)?null:b.getAttribute(c)}function b(b){for(var c=[],d=b.length;d--;)c.push(b[d]);return c}function d(b){var d=c(b,"name");if(a.isNone(d)||""===d)if(d=c(b,"id"),a.isNone(d)||""===d)d=c(b,"class");return d}function f(d){var f=d.getElementsByTagName("input"),h=d.getElementsByTagName("textarea");d=d.getElementsByTagName("select");for(var f=b(f),l=f.length;l--;){var n=c(f[l],"type");a.contains(s,n)||a.isNone(n)||f.splice(l,1)}return f.concat(b(h),
b(d))}function h(b,d,f,h){var l="";a.isNone(f)||""===f||(l=c(b,"data-error-"+f));if(a.isNone(l)||""===l)l=c(b,"data-error");(a.isNone(l)||""===l)&&a.console.warn("A data-error tag has not been setted for "+d+" with value "+h+", can't proceed error show",3);a.isNone(a.language)||(l=a.language.getSingleTranslation(l,{name:f,value:h}));return{el:b,id:d,error:l}}var n="text search url tel email password".split(" "),l="number range date datetime datetime-local month time week".split(" "),t=n.concat(l,
["number","checkbox","radio","file"]),s=l.concat(n,["color","checkbox","file","hidden","radio"]);return{skipNoValidate:!1,get:function(b){b=f(b);for(var h={},l=b.length;l--;){var p=b[l],n=d(p),e;e=p;var q=c(e,"type"),k=e.tagName.toLowerCase();e="input"===k||"textarea"===k?"checkbox"===q?e.checked:e.value:"select"===k?e.options[e.selectedIndex].value:void 0;null!==n&&""!==n&&(a.isNone(p)||"radio"!==c(p,"type")?h[n]=""===e?null:e:p.checked&&(h[n]=""===e?null:e))}a.console.log("a.form.get: found element list:",
3);a.console.log(h,3);return h},validate:function(b){if(!a.isNone(c(b,"novalidate"))&&!1===this.skipNoValidate)return[];b=f(b);for(var s=[],u="number range text search url email password color checkbox hidden radio".split(" "),p=RegExp("^[a-z]{2,}:\\/\\/([a-z0-9\\/\\.\\-_~+;:&=]{2,})$","gi"),v=RegExp("^.{2,}@.*\\.[a-z0-9]{2,}$","gi"),e=RegExp("^#([a-f]{3}|[a-f]{6})$","gi"),q=b.length;q--;){var k=b[q],x=k.tagName.toLowerCase();if("select"!==x&&a.isNone(c(k,"formnovalidate"))){var A=c(k,"type"),B=d(k),
r=k.value,g=c(k,"required"),z=c(k,"pattern");c(k,"multiple");var D=c(k,"min"),C=c(k,"max"),y=c(k,"step"),D=a.isNone(D)||""===D?null:parseFloat(D),C=a.isNone(C)||""===C?null:parseFloat(C),y=a.isNone(y)||""===y?null:parseFloat(y);"input"!==x||a.contains(u,A)||a.isNone(A)?"number"!==A&&"range"!==A||a.isNumber(r)?"url"!==A||p.test(r)?"email"!==A||v.test(r)?"color"!==A||e.test(r)?null!==g&&a.contains(t,A)&&(""===r||a.isNone(r))?s.push(h(k,B,"required",r)):null===z||"textarea"!==x&&!a.contains(n,A)&&!a.isNone(A)||
RegExp(z).test(r)?null===D&&null==C&&null==y||!a.contains(l,A)||(x=parseFloat(r),null!==D&&x<D?s.push(h(k,B,"min",r)):null!==C&&x>C?s.push(h(k,B,"max",r)):null!==y&&0!==x%y&&s.push(h(k,B,"step",r))):s.push(h(k,B,"pattern",r)):s.push(h(k,B,null,r)):s.push(h(k,B,null,r)):s.push(h(k,B,null,r)):s.push(h(k,B,null,r)):a.console.warn("Type "+A+" for input "+B+" not recognized or not supported",3)}}a.console.log("a.form.validate: found error list:",3);a.console.log(s,3);return s},validateAndGet:function(b){b=
{errorList:this.validate(b),error:!1,contentList:this.get(b)};0<b.errorList.length&&(b.error=!0);return b}}}();a.state=function(){function c(b){return a.isArray(b)?b.reverse():a.isString(b)?[b]:[]}function b(){for(var b=e;e===b||0>=e;)e=Math.floor(1E5*Math.random());return e}function d(b,c){var d=[],e=b.length;c=a.isFunction(c)?c:function(){return!0};for(var f=0;f<e;++f){for(var g=!1,h=0;h<e;++h)if(f!=h&&b[f].id===b[h].id&&c(b[f])){g=!0;break}g||d.push(b[f].id)}return d}function f(b){for(var c=0,d=[],e=a.state.helper.tree.selectLevel(b,s,c);0<e.length;)d.push(e),c++,e=a.state.helper.tree.selectLevel(b,s,c);
return d}function h(b){b=n(b);for(var c=v.length,d=[];c--;){for(var e=v[c].hashtagList,f=e.length,g=!1;f--&&(g=b({hash:e[f]}),!0!==g););g||(d=d.concat(v[c].itemList.slice()),v.splice(c,1))}return d}function n(b){return function(c){if(a.isObject(c)&&0<c.hash.length){if(c.hash===b)return!0;if(0<=c.hash.indexOf("{{")&&0<=c.hash.indexOf("}}")){var d=a.state.helper.parameter.extract(c.hash);c=c.hash;for(var e=d.length;e--;)c=a.state.helper.parameter.replace(c,d[e]);return RegExp("^"+c+"$","gi").test(b)}}return!1}}
function l(b){return function(c){return a.isObject(c)&&(a.isArray(b)&&a.contains(b,c.id)||c.id===b)?!0:!1}}function t(b,c){var d=l(c),e=n(b);return function(b){return!0===d(b)||!0===e(b)?!0:!1}}function s(b){return a.isObject(b)&&a.isArray(b.children)?b.children:[]}function m(b){return a.isObject(b)?b.id:-1}function w(b){return a.isObject(b)&&a.isObject(b.error)?b.error:null}function u(c){var e=a.deepClone(p),l=a.deepClone(p),q=a.deepClone(p),r=h(c.value),g=n(c.old),r=t(c.old,r),u=n(c.value);a.state.helper.tree.selectBranch(e,
s,r);a.state.helper.tree.selectBranch(l,s,u);a.state.helper.tree.selectBranch(q,s,n("*"));var r=a.state.helper.tree.flat(e.concat(l),s),v=d(r,function(b){return 0<=b.hash.indexOf("{{")&&0<=b.hash.indexOf("}}")&&!a.state.helper.tree.isInBranch(b,s,u)&&!a.state.helper.tree.isInBranch(b,s,g)?!1:!0}),w=a.state.helper.tree.flat(q,s,m),e=f(e),y=f(l);a.message.dispatch("a.state.begin",c);a.console.log("a.state: element allowed to proceed change: "+v+" (does not mean all of them will be loaded)",3);var E=
b();a.state.helper.chainer("unload",e,v,-1,function(){a.state.helper.chainer("load",y,v,E,function(){0<q.length?(q=[q],a.console.log("a.state: wildcard allowed to proceed change: "+w+" (does not mean all of them will be loaded)",3),a.state.helper.chainer("unload",q,w,-1,function(){a.state.helper.chainer("load",q,w,-1,function(){a.message.dispatch("a.state.end",c)})})):a.message.dispatch("a.state.end",c)})})}var p=[],v=[],e=-1,q=[];a.message.addListener("a.page.event.hash",u);a.message.addListener("a.message.clear",
function(){a.message.addListener("a.page.event.hash",u)});return{clear:function(){p=[]},tree:function(){return a.deepClone(p)},add:function(b,d){if(!a.isObject(b))return null;if(a.isArray(b))for(var e=0,f=b.length;e<f;++e)this.add(b[e]);else{b.hash=a.isString(b.hash)?b.hash:"";a.isObject(b.include)||(b.include={});b.include.css=c(b.include.css);b.include.js=c(b.include.js);b.include.translate=c(b.include.translate);b.include.html=a.isString(b.include.html)?b.include.html:null;for(var h=["preLoad",
"postLoad","preUnload","unload","postUnload"],g=0,e=h.length;g<e;++g)f=b[h[g]],a.isFunction(f)&&(f=f.toString(),f=f.slice(f.indexOf("(")+1,f.indexOf(")")).match(/([^\s,]+)/g),a.isNone(f)&&a.console.warn("The result parameter for function '"+h[g]+"' in id '"+b.id+"' has not been found, the state may not work properly",2));!a.isArray(b.children)&&a.isObject(b.children)&&(b.children=[a.deepClone(b.children)]);g=!a.isNone(b.parent);e=a.isArray(b.children);"*"===b.hash&&(g&&a.console.warn("a.state.add : The wildcard has a parent setted (not allowed)",
1),e&&a.console.warn("a.state.add : The wildcard has children (not allowed)",1),b.parent=null,g=!1,b.children=[]);h=[];e&&(h=b.children.slice());b.children=[];a.isNone(b.id)&&(b.id=1);for(;!a.isNone(a.state.helper.tree.getItem(p,s,l(b.id)));)b.id=Math.floor(1E5*Math.random()+1);if(g){g=a.state.helper.tree.getItem(p,s,l(b.parent));if(a.isNone(g))return null;g.children.push(b)}else p.push(b);g=b.id;e=0;for(f=h.length;e<f;++e)a.isObject(h[e])&&(h[e].parent=g,this.add(h[e]));"*"===b.hash&&a.state.helper.chainer("load",
[[b]],[g],-1,function(){});!0===b.bootOnLoad&&(h=a.deepClone(b),h.data=h.converter=h.options=null,h.preLoad=h.load=h.postLoad=null,h.preUnload=h.unload=h.postUnload=null,d=a.isFunction(d)?d:function(){},a.state.helper.chainer("load",[[h]],[g],-1,d));return g}},getById:function(b){return a.state.helper.tree.getItem(p,s,l(b))},removeById:function(b){var c=a.state.helper.tree.getItem(p,s,l(b));a.console.log("a.state.removeById: remove element (id: "+b+")",3);a.state.helper.tree.selectBranch(p,s,function(b){return b===
c?!1:!0})},loadById:function(b,e,h){var q=a.deepClone(p),r=a.page.event.hash.getHash(),g=a.deepClone(p);a.state.helper.tree.selectBranch(q,s,l(b));a.state.helper.tree.selectBranch(g,s,n(r));var t=a.state.helper.tree.flat(q,s),g=a.state.helper.tree.flat(g,s),g=d(g.concat(t)),q=f(q);h=a.isFunction(h)?h:function(){};a.console.log("a.state.loadById: element allowed to proceed change: "+g+" (does not mean all of them will be loaded)",3);a.state.helper.chainer("load",q,g,-1,h);a.isNone(e)&&(e=r);b={id:b,
itemList:a.state.helper.tree.flat(t,s,m),hashtagList:c(e)};v.push(b)},unloadById:function(b,c){for(var d=this.getById(b),d=f([d]),e=[],h=v.length;h--;)e=e.concat(v[h].itemList);a.console.log("a.state.unloadById: element allowed to proceed change: "+e+" (does not mean all of them will be unloaded)",3);h=a.isFunction(c)?c:function(){};a.state.helper.chainer("unload",d,e,-1,h)},forceReloadById:function(c,d){for(var e=a.isFunction(d)?d:function(){},h=v.length,l=[],g=a.deepClone(v);h--;)a.contains(v[h].itemList,
c)&&l.push(v[h].hashtagList);if(0<l.length)this.unloadById(c,function(){for(var b=l.length;b--;)a.state.loadById(c,l[b]);v=g;e()});else{var h=a.deepClone(p),q=a.page.event.hash.getHash();a.state.helper.tree.selectBranch(h,s,n(q));for(var q=a.state.helper.tree.flat(h,s),t=q.length;t--;)if(q[t].id===c){var u=f([q[t]]),w=a.state.helper.tree.flat(h,s,m);a.console.log("a.state.forceReloadById: element allowed to proceed change: "+w+" (does not mean all of them will be loaded/unloaded)",3);var E=b();a.state.helper.chainer("unload",
u,w,-1,function(){a.state.helper.chainer("load",u,w,E,e)});break}}},hashExists:function(b){return a.isString(b)&&""!==b?a.state.helper.tree.isInBranch(p,s,n(b)):!1},__currentGeneratedId:function(){return e},__getError:function(b,c){var d=b.id;c="_"+c;var e=a.deepClone(p);a.state.helper.tree.selectBranch(e,s,l(d));for(var d=a.state.helper.tree.flat(e,s,w),e=[c,c.substring(0,c.length-1)+"x",c.substring(0,c.length-2)+"xx","generic","_generic"],f=0,g=e.length;f<g;++f){var h;a:{h=e[f];for(var m=d.length;m--;){var n=
d[m];if(!a.isNone(n))for(var q in n)if(q==h){h=n[q];break a}}h=null}if(!a.isNone(h))return h}return null},type:{add:function(b,c){q[b]=c},get:function(b){return a.isFunction(q[b])?q[b]:null},list:function(){return q}},helper:{tree:{},chainer:{},parameter:{}}}}();
a.state.helper.tree={flat:function(c,b,d){var f=[];if(!a.isArray(c)||!a.isFunction(b))return[];d=a.isFunction(d)?d:function(b){return b};for(var h=0,n=c.length;h<n;++h){var l=this.flat(b(c[h]),b,d);f.push(d(c[h]));0<l.length&&(f=f.concat(l))}return f},getItem:function(c,b,d){if(!a.isArray(c)||!a.isFunction(d)||!a.isFunction(b))return null;for(var f=0,h=c.length;f<h;++f){if(!0===d(c[f]))return c[f];var n=this.getItem(b(c[f]),b,d);if(!a.isNone(n))return n}return null},isInBranch:function(c,b,d){c=this.getItem(c,
b,d);return a.isNone(c)?!1:!0},selectBranch:function(c,b,d){if(a.isArray(c)&&a.isFunction(b)&&a.isFunction(d))for(var f=c.length;f--;){var h=b(c[f]);!1===d(c[f])&&a.isNone(this.getItem(h,b,d))?c.splice(f,1):0<h.length&&this.selectBranch(h,b,d)}},selectLevel:function(c,b,d){if(!a.isArray(c)||!a.isFunction(b))return[];var f=[],h=c.length;if(a.isNone(d)||isNaN(d)||0>=d)return c;for(d--;h--;){var n=b(c[h]);0<n.length&&(f=f.concat(this.selectLevel(n,b,d)))}return f}};
a.state.helper.chainer=function(c,b,d,f,h){function n(b,c){var d={};a.isNone(b)||(d.resource=b);a.isNone(c)||(d.status=c);var f=a.state.__getError(e,c);a.message.dispatch("a.state.error",d);a.isNone(f)||(a.isString(f)?window.location.href="#"+f:a.isFunction(f)?f(e.id,b,c):a.console.error("a.state.helper.chainer.__error: error resolver cannot determine action to perform, please check your different error handler (status: "+c+", state id: "+e.id+")"))}function l(b){return function(c){p(b,function(){c.done()})}}
function t(b,c,d){return function(e){a.loader[b](c,function(b){a.isFunction(d)&&d(b);e.done()})}}function s(b,c,d){if(a.isObject(d))for(var e in d)d[e]=a.state.helper.parameter.extrapolate(d[e],b,c),s(b,c,d[e])}function m(b,c,d,e){var f=a.deepClone(d);d=a.page.event.hash.getHash();f.url=a.state.helper.parameter.extrapolate(c,d,e);s(d,e,f);c=c.replace(/^\s+|\s+$/g,"");return 0===c.indexOf("{{")&&c.indexOf("}}")===c.length-2?(c=a.state.helper.parameter.extrapolate(c,d,e,!1),function(d){var e=d.getData("data")||
{};a.isObject(e.a)||(e.a=e.appstorm={},e.a.parameter=e.appstorm.parameter={});a.isNone(b)?e=c:(e.a.parameter[b]=c,e.appstorm.parameter=e.a.parameter,a.isNone(e[b])&&(e[b]=c));d.setData("data",e);d.done()}):function(c){a.isNone(c.getData("data"))&&c.setData("data",{});(new a.ajax(f,function(d){if(a.isNone(b))c.setData("data",d);else{var e=c.getData("data");e[b]=d;c.setData("data",e)}c.done()},n)).send()}}function w(b,c){for(var d=new a.callback.synchronizer,e=b.include.css,f=b.include.js,h=b.include.html,
k=b.include.translate,l=b.data,p=b.title,q=b.options,s=b.converter,u=b.hash,v=e.length,w=f.length;v--;)d.addCallback(t("css",e[v]));for(;w--;)d.addCallback(t("js",f[w]));if(!a.isNone(a.language)&&0<k.length)for(e=k.length;e--;)d.addCallback(t("json",k[e],function(b){for(var c in b)a.language.addTranslation(c,b[c],!0)}));a.isString(h)&&(h=a.state.helper.parameter.extrapolate(h,a.page.event.hash.getHash(),u),d.addCallback(function(b){b.setData("html",h);a.page.template.get(h,{},b.done,n)}));if(a.isString(l)||
a.isObject(l))if(a.isObject(q)||(q={type:"json"}),a.isString(q.type)||(q.type="json"),a.isString(l))d.addCallback(m(null,l,q,u));else for(var G in l)a.isObject(l[G])&&a.isString(l[G].url)?(a.isObject(l[G].options)||(l[G].options={type:"json"}),d.addCallback(m(G,l[G].url,l[G].options,u))):d.addCallback(m(G,l[G],q,u));else d.addCallback(function(b){b.setData("data",{});b.done()});d.setSuccess(function(b){a.isNone(s)||s(b.data);a.isNone(p)||(p=a.state.helper.parameter.extrapolate(p,a.page.event.hash.getHash(),
u),a.isNone(a.language)?document.title=p:document.title=a.language.getSingleTranslation(p));var d=b.data,e=b.html,d=a.isNone(d)?{}:d;a.isNone(e)?a.isFunction(c)&&c(b,null):a.page.template.get(e,d,function(d){a.isFunction(c)&&c(b,d)})});d.setFail(n);d.start()}function u(b,d){e=b;var h=new a.callback.chainer;"unload"===c?h.addCallback(b.preUnload,b.unload,b.postUnload):h.addCallback(function(c){a.isFunction(b.preLoad)&&(-1==f||0<=f&&a.state.__currentGeneratedId()===f)?b.preLoad(c):c.done()},function(c){w(b,
function(d,e){a.isFunction(b.load)&&(-1==f||0<=f&&a.state.__currentGeneratedId()===f)&&b.load(e);var h=c.getFullData()||{};if(a.isObject(d.data))for(var k in d.data)h[k]=d.data[k];c.setFullData(h);c.done()})},function(c){a.isFunction(b.postLoad)&&(-1==f||0<=f&&a.state.__currentGeneratedId()===f)?b.postLoad(c):c.done()},function(c){var d={id:b.id,value:b.id};a.message.dispatch("a.state.load",d);a.message.dispatch("a.state.load-"+b.id,d);c.done()});h.setSuccess(d);h.setFail(n);h.start()}function p(b,
c){for(var e=new a.callback.synchronizer,f=b.length;f--;)a.contains(d,b[f].id)&&function(b){e.addCallback(function(c){u(b,function(){c.done()})})}(b[f]);e.setSuccess(c);e.setFail(n);e.start()}var v=b.length,e=null;c="unload"===c?"unload":"load";d=d||[];var q=new a.callback.chainer;if("unload"===c)for(;v--;)q.addCallback(l(b[v]));else for(var k=0;k<v;)q.addCallback(l(b[k])),k++;q.setSuccess(h);q.setFail(n);q.start()};
a.state.helper.parameter={extract:function(c,b){var d=/\{\{(\s*\w+\s*:\s*[a-z0-9_\-\[\]\(\)\^.\|\+\*\?\\\/]+\s*)\}\}/gmi,f=/^\s+|\s+$/g,h=!a.isNone(b);h&&(d=b);for(var n=[],l;l=d.exec(c);){var t=null,t=h?["hash",l[1]]:l[1].split(":",2);n.push({original:l[0].replace(f,""),name:t[0].replace(f,""),regex:t[1].replace(f,""),start:l.index})}return n},replace:function(c,b,d){d=a.isNone(d)?"("+b.regex+")":d;return c.substr(0,b.start)+d+c.substr(b.start+b.original.length)},extrapolate:function(c,b,d,f){if(a.isString(c)&&
0<=c.indexOf("{{")&&0<=c.indexOf("}}")){for(var h=this.extract(c),n=this.extract(d),l=this.extract(c,/\{\{(\s*\w+\s*)\}\}/gmi),h=h.concat(l),l=n.length;l--;)d=this.replace(d,n[l]);if(l=RegExp("^"+d+"$","gi").exec(b)){b=0;for(d=n.length;b<d;++b)n[b].value=l[b+1];for(var l=0,t=h.length;l<t;++l)for(b=0;b<d;++b)n[b].name===h[l].regex&&"hash"===h[l].name&&(h[l].value=n[b].value)}n=h.length;for(f=!1===f?function(b,c,d){return d}:this.replace;n--;){b=h[n];"hash"!==b.name&&"hashtag"!==b.name||a.isNone(b.value)||
(c=this.replace(c,b,b.value));d=!1;if(!a.isNone(a.storage))switch(b.name){case "temporary":c=f(c,b,a.storage.temporary.getItem(b.regex));d=!0;break;case "memory":c=f(c,b,a.storage.memory.getItem(b.regex));d=!0;break;case "persistent":c=f(c,b,a.storage.persistent.getItem(b.regex));d=!0;break;case "cookie":c=f(c,b,a.storage.cookie.getItem(b.regex));d=!0;break;case "store":case "storage":d=a.storage.temporary.getItem(b.regex),c=a.isNone(d)?f(c,b,a.storage.persistent.getItem(b.regex)):f(c,b,d),d=!0}if(!d&&
(d=a.state.type.list(),a.isObject(d)))for(var s in d)s===b.name&&(l=d[s],c=a.isFunction(l)?f(c,b,l(b.regex)):f(c,b,l))}}return c}};a.page={};
a.page.template={__tmpl:{},get:function(c,b,d,f){var h=null;a.isObject(window.Handlebars)&&(h=window.Handlebars);if(null==h)a.console.error("a.page.template.get: unable to find Handlebars.JS ! Can't proceed",1);else{var n=c.replace(/[^a-zA-Z0-9\\-]/g,"_"),l="a_tmpl_"+n+"_a",t=function(b,c,d){a.isFunction(b)&&(a.isNone(h.to_html)?(c=h.compile(a.page.template.__tmpl[c]),b(c(d))):b(h.to_html(a.page.template.__tmpl[c],d)))};a.isString(this.__tmpl[l])?(a.console.log("a.page.template.get: loading "+l+" from cache",
3),t(d,l,b)):document.getElementById(l)?(this.__tmpl[l]||(a.console.log("a.page.template.get: loading "+l+" from inner html page",3),this.__tmpl[l]=document.getElementById(l).innerHTML),t(d,l,b)):document.getElementById(n)?(this.__tmpl[n]||(a.console.log("a.page.template.get: loading "+n+" from inner html page",3),this.__tmpl[n]=document.getElementById(n).innerHTML),t(d,n,b)):(a.console.log("a.page.template.get: loading "+c+" from external resource",3),a.loader.html(c,function(c,f,h){a.page.template.__tmpl[l]||
(a.page.template.__tmpl[l]=c);t(d,l,b)},{},f))}},htmlToDom:function(c){var b=document.createElement("div");b.innerHTML=c.replace(/^\s+|\s+$/g,"");c=b.childNodes;for(var b=[],d=0,f=c.length;d<f;++d){var h=c.item(d);!a.isObject(h)||"1"!==h.nodeType.toString()&&"3"!==h.nodeType.toString()||b.push(h)}return b},remove:function(c,b){for(;c.firstChild;)c.removeChild(c.firstChild);a.isFunction(b)&&b()},append:function(c,b,d){var f=this.htmlToDom(b);if(a.isObject(f))for(var h=0,n=f.length;h<n;++h)c.appendChild(f[h]);
a.isNone(a.language)||a.language.translate(c);a.isFunction(d)&&d(b)},replace:function(c,b,d){this.remove(c);this.append(c,b,d)}};
a.page.event=function(){function c(b,c){a.isObject(c)||(c={});return function(){a.message.dispatch("a.page.event."+b,c)}}function b(){var b=(new Date).getTime();b>l+2*n&&(a.console.log("a.page.event.hibernate: hibernate mode has been detected",3),c("hibernate")());l=b}function d(b,c){window.addEventListener?window.addEventListener(b,c,!1):window.attachEvent&&window.attachEvent("on"+b,c)}function f(b){var d=window.location.hash?window.location.hash.substring(1):null;if(t!==d){if(!0!==b){for(s.push({hash:d,
time:(new Date).getTime()});1E3<s.length;)s.shift();a.console.log("a.page.event.hash: hash change (previous: "+t+", new: "+d+")",3);c("hash",{value:d,old:t})()}t=d}}var h={},n=1E4,l=(new Date).getTime(),t=null,s=[];h.hash={getHash:function(){return window.location.hash?window.location.hash.substring(1):null},getPreviousHash:function(){return t},setPreviousHash:function(b){a.console.log("a.page.event.hash.setPreviousHash: change previous hash to "+b,3);t=b},trace:function(){return s}};f(!0);!a.isNone(window.onhashchange)&&
(void 0===document.documentMode||7<document.documentMode)?window.onhashchange=f:a.timer.add(f,null,50);var m=["resize","load","unload"],w;for(w in m)d(m[w],c(m[w]));d("load",function(){a.timer.add(b,null,n)});return h}();
