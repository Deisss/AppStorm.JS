(function(){var c=this,b=c._,d={},e=Array.prototype,g=Object.prototype,n=e.push,l=e.slice,t=e.concat,q=g.toString,m=g.hasOwnProperty,x=e.forEach,u=e.map,r=e.reduce,v=e.reduceRight,f=e.filter,p=e.every,k=e.some,w=e.indexOf,A=e.lastIndexOf,g=Array.isArray,B=Object.keys,s=Function.prototype.bind,h=function(b){return b instanceof h?b:this instanceof h?(this._wrapped=b,void 0):new h(b)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports._=h):c._=
h;h.VERSION="1.5.2";var z=h.each=h.forEach=function(b,c,f){if(null!=b)if(x&&b.forEach===x)b.forEach(c,f);else if(b.length===+b.length)for(var k=0,m=b.length;m>k&&c.call(f,b[k],k,b)!==d;k++);else for(var p=h.keys(b),k=0,m=p.length;m>k&&c.call(f,b[p[k]],p[k],b)!==d;k++);};h.map=h.collect=function(b,c,f){var k=[];return null==b?k:u&&b.map===u?b.map(c,f):(z(b,function(b,F,d){k.push(c.call(f,b,F,d))}),k)};h.reduce=h.foldl=h.inject=function(b,c,f,k){var d=2<arguments.length;if(null==b&&(b=[]),r&&b.reduce===
r)return k&&(c=h.bind(c,k)),d?b.reduce(c,f):b.reduce(c);if(z(b,function(b,F,h){d?f=c.call(k,f,b,F,h):(f=b,d=!0)}),!d)throw new TypeError("Reduce of empty array with no initial value");return f};h.reduceRight=h.foldr=function(b,c,f,k){var d=2<arguments.length;if(null==b&&(b=[]),v&&b.reduceRight===v)return k&&(c=h.bind(c,k)),d?b.reduceRight(c,f):b.reduceRight(c);var m=b.length;if(m!==+m)var p=h.keys(b),m=p.length;if(z(b,function(h,e,w){e=p?p[--m]:--m;d?f=c.call(k,f,b[e],e,w):(f=b[e],d=!0)}),!d)throw new TypeError("Reduce of empty array with no initial value");
return f};h.find=h.detect=function(b,c,f){var k;return D(b,function(b,d,F){return c.call(f,b,d,F)?(k=b,!0):void 0}),k};h.filter=h.select=function(b,c,k){var d=[];return null==b?d:f&&b.filter===f?b.filter(c,k):(z(b,function(b,f,F){c.call(k,b,f,F)&&d.push(b)}),d)};h.reject=function(b,c,f){return h.filter(b,function(b,k,d){return!c.call(f,b,k,d)},f)};h.every=h.all=function(b,c,f){c||(c=h.identity);var k=!0;return null==b?k:p&&b.every===p?b.every(c,f):(z(b,function(b,F,h){return(k=k&&c.call(f,b,F,h))?
void 0:d}),!!k)};var D=h.some=h.any=function(b,c,f){c||(c=h.identity);var m=!1;return null==b?m:k&&b.some===k?b.some(c,f):(z(b,function(b,k,F){return m||(m=c.call(f,b,k,F))?d:void 0}),!!m)};h.contains=h.include=function(b,c){return null==b?!1:w&&b.indexOf===w?-1!=b.indexOf(c):D(b,function(b){return b===c})};h.invoke=function(b,c){var f=l.call(arguments,2),k=h.isFunction(c);return h.map(b,function(b){return(k?c:b[c]).apply(b,f)})};h.pluck=function(b,c){return h.map(b,function(b){return b[c]})};h.where=
function(b,c,f){return h.isEmpty(c)?f?void 0:[]:h[f?"find":"filter"](b,function(b){for(var f in c)if(c[f]!==b[f])return!1;return!0})};h.findWhere=function(b,c){return h.where(b,c,!0)};h.max=function(b,c,f){if(!c&&h.isArray(b)&&b[0]===+b[0]&&65535>b.length)return Math.max.apply(Math,b);if(!c&&h.isEmpty(b))return-1/0;var k={computed:-1/0,value:-1/0};return z(b,function(b,d,h){d=c?c.call(f,b,d,h):b;d>k.computed&&(k={value:b,computed:d})}),k.value};h.min=function(b,c,f){if(!c&&h.isArray(b)&&b[0]===+b[0]&&
65535>b.length)return Math.min.apply(Math,b);if(!c&&h.isEmpty(b))return 1/0;var k={computed:1/0,value:1/0};return z(b,function(b,d,h){d=c?c.call(f,b,d,h):b;d<k.computed&&(k={value:b,computed:d})}),k.value};h.shuffle=function(b){var c,f=0,k=[];return z(b,function(b){c=h.random(f++);k[f-1]=k[c];k[c]=b}),k};h.sample=function(b,c,f){return 2>arguments.length||f?b[h.random(b.length-1)]:h.shuffle(b).slice(0,Math.max(0,c))};var C=function(b){return h.isFunction(b)?b:function(c){return c[b]}};h.sortBy=function(b,
c,f){var k=C(c);return h.pluck(h.map(b,function(b,c,d){return{value:b,index:c,criteria:k.call(f,b,c,d)}}).sort(function(b,c){var f=b.criteria,k=c.criteria;if(f!==k){if(f>k||void 0===f)return 1;if(k>f||void 0===k)return-1}return b.index-c.index}),"value")};var y=function(b){return function(c,f,k){var d={},m=null==f?h.identity:C(f);return z(c,function(f,h){var p=m.call(k,f,h,c);b(d,p,f)}),d}};h.groupBy=y(function(b,c,f){(h.has(b,c)?b[c]:b[c]=[]).push(f)});h.indexBy=y(function(b,c,f){b[c]=f});h.countBy=
y(function(b,c){h.has(b,c)?b[c]++:b[c]=1});h.sortedIndex=function(b,c,f,k){f=null==f?h.identity:C(f);c=f.call(k,c);for(var d=0,m=b.length;m>d;){var p=d+m>>>1;f.call(k,b[p])<c?d=p+1:m=p}return d};h.toArray=function(b){return b?h.isArray(b)?l.call(b):b.length===+b.length?h.map(b,h.identity):h.values(b):[]};h.size=function(b){return null==b?0:b.length===+b.length?b.length:h.keys(b).length};h.first=h.head=h.take=function(b,c,f){return null==b?void 0:null==c||f?b[0]:l.call(b,0,c)};h.initial=function(b,
c,f){return l.call(b,0,b.length-(null==c||f?1:c))};h.last=function(b,c,f){return null==b?void 0:null==c||f?b[b.length-1]:l.call(b,Math.max(b.length-c,0))};h.rest=h.tail=h.drop=function(b,c,f){return l.call(b,null==c||f?1:c)};h.compact=function(b){return h.filter(b,h.identity)};var E=function(b,c,f){return c&&h.every(b,h.isArray)?t.apply(f,b):(z(b,function(b){h.isArray(b)||h.isArguments(b)?c?n.apply(f,b):E(b,c,f):f.push(b)}),f)};h.flatten=function(b,c){return E(b,c,[])};h.without=function(b){return h.difference(b,
l.call(arguments,1))};h.uniq=h.unique=function(b,c,f,k){h.isFunction(c)&&(k=f,f=c,c=!1);f=f?h.map(b,f,k):b;var d=[],m=[];return z(f,function(f,k){(c?k&&m[m.length-1]===f:h.contains(m,f))||(m.push(f),d.push(b[k]))}),d};h.union=function(){return h.uniq(h.flatten(arguments,!0))};h.intersection=function(b){var c=l.call(arguments,1);return h.filter(h.uniq(b),function(b){return h.every(c,function(c){return 0<=h.indexOf(c,b)})})};h.difference=function(b){var c=t.apply(e,l.call(arguments,1));return h.filter(b,
function(b){return!h.contains(c,b)})};h.zip=function(){for(var b=h.max(h.pluck(arguments,"length").concat(0)),c=Array(b),f=0;b>f;f++)c[f]=h.pluck(arguments,""+f);return c};h.object=function(b,c){if(null==b)return{};for(var f={},k=0,d=b.length;d>k;k++)c?f[b[k]]=c[k]:f[b[k][0]]=b[k][1];return f};h.indexOf=function(b,c,f){if(null==b)return-1;var k=0,d=b.length;if(f){if("number"!=typeof f)return k=h.sortedIndex(b,c),b[k]===c?k:-1;k=0>f?Math.max(0,d+f):f}if(w&&b.indexOf===w)return b.indexOf(c,f);for(;d>
k;k++)if(b[k]===c)return k;return-1};h.lastIndexOf=function(b,c,f){if(null==b)return-1;var k=null!=f;if(A&&b.lastIndexOf===A)return k?b.lastIndexOf(c,f):b.lastIndexOf(c);for(f=k?f:b.length;f--;)if(b[f]===c)return f;return-1};h.range=function(b,c,f){1>=arguments.length&&(c=b||0,b=0);f=arguments[2]||1;for(var k=Math.max(Math.ceil((c-b)/f),0),d=0,h=Array(k);k>d;)h[d++]=b,b+=f;return h};var J=function(){};h.bind=function(b,c){var f,k;if(s&&b.bind===s)return s.apply(b,l.call(arguments,1));if(!h.isFunction(b))throw new TypeError;
return f=l.call(arguments,2),k=function(){if(!(this instanceof k))return b.apply(c,f.concat(l.call(arguments)));J.prototype=b.prototype;var d=new J;J.prototype=null;var h=b.apply(d,f.concat(l.call(arguments)));return Object(h)===h?h:d}};h.partial=function(b){var c=l.call(arguments,1);return function(){return b.apply(this,c.concat(l.call(arguments)))}};h.bindAll=function(b){var c=l.call(arguments,1);if(0===c.length)throw Error("bindAll must be passed function names");return z(c,function(c){b[c]=h.bind(b[c],
b)}),b};h.memoize=function(b,c){var f={};return c||(c=h.identity),function(){var k=c.apply(this,arguments);return h.has(f,k)?f[k]:f[k]=b.apply(this,arguments)}};h.delay=function(b,c){var f=l.call(arguments,2);return setTimeout(function(){return b.apply(null,f)},c)};h.defer=function(b){return h.delay.apply(h,[b,1].concat(l.call(arguments,1)))};h.throttle=function(b,c,f){var k,d,h,m=null,p=0;f||(f={});var e=function(){p=!1===f.leading?0:new Date;m=null;h=b.apply(k,d)};return function(){var w=new Date;
p||!1!==f.leading||(p=w);var r=c-(w-p);return k=this,d=arguments,0>=r?(clearTimeout(m),m=null,p=w,h=b.apply(k,d)):m||!1===f.trailing||(m=setTimeout(e,r)),h}};h.debounce=function(b,c,f){var k,d,h,m,p;return function(){h=this;d=arguments;m=new Date;var e=function(){var w=new Date-m;c>w?k=setTimeout(e,c-w):(k=null,f||(p=b.apply(h,d)))},w=f&&!k;return k||(k=setTimeout(e,c)),w&&(p=b.apply(h,d)),p}};h.once=function(b){var c,f=!1;return function(){return f?c:(f=!0,c=b.apply(this,arguments),b=null,c)}};h.wrap=
function(b,c){return function(){var f=[b];return n.apply(f,arguments),c.apply(this,f)}};h.compose=function(){var b=arguments;return function(){for(var c=arguments,f=b.length-1;0<=f;f--)c=[b[f].apply(this,c)];return c[0]}};h.after=function(b,c){return function(){return 1>--b?c.apply(this,arguments):void 0}};h.keys=B||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var c=[],f;for(f in b)h.has(b,f)&&c.push(f);return c};h.values=function(b){for(var c=h.keys(b),f=c.length,k=Array(f),
d=0;f>d;d++)k[d]=b[c[d]];return k};h.pairs=function(b){for(var c=h.keys(b),f=c.length,k=Array(f),d=0;f>d;d++)k[d]=[c[d],b[c[d]]];return k};h.invert=function(b){for(var c={},f=h.keys(b),k=0,d=f.length;d>k;k++)c[b[f[k]]]=f[k];return c};h.functions=h.methods=function(b){var c=[],f;for(f in b)h.isFunction(b[f])&&c.push(f);return c.sort()};h.extend=function(b){return z(l.call(arguments,1),function(c){if(c)for(var f in c)b[f]=c[f]}),b};h.pick=function(b){var c={},f=t.apply(e,l.call(arguments,1));return z(f,
function(f){f in b&&(c[f]=b[f])}),c};h.omit=function(b){var c={},f=t.apply(e,l.call(arguments,1)),k;for(k in b)h.contains(f,k)||(c[k]=b[k]);return c};h.defaults=function(b){return z(l.call(arguments,1),function(c){if(c)for(var f in c)void 0===b[f]&&(b[f]=c[f])}),b};h.clone=function(b){return h.isObject(b)?h.isArray(b)?b.slice():h.extend({},b):b};h.tap=function(b,c){return c(b),b};var K=function(b,c,f,k){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b instanceof h&&(b=b._wrapped);
c instanceof h&&(c=c._wrapped);var d=q.call(b);if(d!=q.call(c))return!1;switch(d){case "[object String]":return b==String(c);case "[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var m=f.length;m--;)if(f[m]==b)return k[m]==c;var m=b.constructor,p=c.constructor;
if(m!==p&&!(h.isFunction(m)&&m instanceof m&&h.isFunction(p)&&p instanceof p))return!1;f.push(b);k.push(c);m=0;p=!0;if("[object Array]"==d){if(m=b.length,p=m==c.length)for(;m--&&(p=K(b[m],c[m],f,k)););}else{for(var e in b)if(h.has(b,e)&&(m++,!(p=h.has(c,e)&&K(b[e],c[e],f,k))))break;if(p){for(e in c)if(h.has(c,e)&&!m--)break;p=!m}}return f.pop(),k.pop(),p};h.isEqual=function(b,c){return K(b,c,[],[])};h.isEmpty=function(b){if(null==b)return!0;if(h.isArray(b)||h.isString(b))return 0===b.length;for(var c in b)if(h.has(b,
c))return!1;return!0};h.isElement=function(b){return!(!b||1!==b.nodeType)};h.isArray=g||function(b){return"[object Array]"==q.call(b)};h.isObject=function(b){return b===Object(b)};z("Arguments Function String Number Date RegExp".split(" "),function(b){h["is"+b]=function(c){return q.call(c)=="[object "+b+"]"}});h.isArguments(arguments)||(h.isArguments=function(b){return!(!b||!h.has(b,"callee"))});"function"!=typeof/./&&(h.isFunction=function(b){return"function"==typeof b});h.isFinite=function(b){return isFinite(b)&&
!isNaN(parseFloat(b))};h.isNaN=function(b){return h.isNumber(b)&&b!=+b};h.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"==q.call(b)};h.isNull=function(b){return null===b};h.isUndefined=function(b){return void 0===b};h.has=function(b,c){return m.call(b,c)};h.noConflict=function(){return c._=b,this};h.identity=function(b){return b};h.times=function(b,c,f){for(var k=Array(Math.max(0,b)),d=0;b>d;d++)k[d]=c.call(f,d);return k};h.random=function(b,c){return null==c&&(c=b,b=0),b+Math.floor(Math.random()*
(c-b+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=h.invert(I.escape);var M={escape:RegExp("["+h.keys(I.escape).join("")+"]","g"),unescape:RegExp("("+h.keys(I.unescape).join("|")+")","g")};h.each(["escape","unescape"],function(b){h[b]=function(c){return null==c?"":(""+c).replace(M[b],function(c){return I[b][c]})}});h.result=function(b,c){if(null!=b){var f=b[c];return h.isFunction(f)?f.call(b):f}};h.mixin=function(b){z(h.functions(b),function(c){var f=
h[c]=b[c];h.prototype[c]=function(){var b=[this._wrapped];n.apply(b,arguments);b=f.apply(h,b);return this._chain?h(b).chain():b}})};var G=0;h.uniqueId=function(b){var c=++G+"";return b?b+c:c};h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n"," ":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;h.template=function(b,c,f){var k;f=h.defaults({},f,h.templateSettings);var d=
RegExp([(f.escape||L).source,(f.interpolate||L).source,(f.evaluate||L).source].join("|")+"|$","g"),m=0,p="__p+='";b.replace(d,function(c,f,k,d,h){return p+=b.slice(m,h).replace(O,function(b){return"\\"+N[b]}),f&&(p+="'+\n((__t=("+f+"))==null?'':_.escape(__t))+\n'"),k&&(p+="'+\n((__t=("+k+"))==null?'':__t)+\n'"),d&&(p+="';\n"+d+"\n__p+='"),m=h+c.length,c});p+="';\n";f.variable||(p="with(obj||{}){\n"+p+"}\n");p="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
p+"return __p;\n";try{k=new Function(f.variable||"obj","_",p)}catch(e){throw e.source=p,e;}if(c)return k(c,h);c=function(b){return k.call(this,b,h)};return c.source="function("+(f.variable||"obj")+"){\n"+p+"}",c};h.chain=function(b){return h(b).chain()};h.mixin(h);z("pop push reverse shift sort splice unshift".split(" "),function(b){var c=e[b];h.prototype[b]=function(){var f=this._wrapped;return c.apply(f,arguments),"shift"!=b&&"splice"!=b||0!==f.length||delete f[0],this._chain?h(f).chain():f}});
z(["concat","join","slice"],function(b){var c=e[b];h.prototype[b]=function(){var b=c.apply(this._wrapped,arguments);return this._chain?h(b).chain():b}});h.extend(h.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);var Handlebars=function(){var c=function(){function b(c){this.string=c}b.prototype.toString=function(){return""+this.string};return b}(),b=function(b){function c(b){return e[b]||"&amp;"}var d={},e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},m=/[&<>"'`]/g,g=/[&<>"'`]/;d.extend=function(b,c){for(var k in c)c.hasOwnProperty(k)&&(b[k]=c[k])};var u=Object.prototype.toString;d.toString=u;var r=function(b){return"function"===typeof b};r(/x/)&&(r=function(b){return"function"===
typeof b&&"[object Function]"===u.call(b)});d.isFunction=r;var v=Array.isArray||function(b){return b&&"object"===typeof b?"[object Array]"===u.call(b):!1};d.isArray=v;d.escapeExpression=function(f){if(f instanceof b)return f.toString();if(!f&&0!==f)return"";f=""+f;return g.test(f)?f.replace(m,c):f};d.isEmpty=function(b){return b||0===b?v(b)&&0===b.length?!0:!1:!0};return d}(c),d=function(){function b(){for(var d=Error.prototype.constructor.apply(this,arguments),e=0;e<c.length;e++)this[c[e]]=d[c[e]]}
var c="description fileName lineNumber message name number stack".split(" ");b.prototype=Error();return b}(),e=function(b,c){function d(b,c){this.helpers=b||{};this.partials=c||{};e(this)}function e(b){b.registerHelper("helperMissing",function(b){if(2!==arguments.length)throw Error("Missing helper: '"+b+"'");});b.registerHelper("blockHelperMissing",function(c,f){var k=f.inverse||function(){},d=f.fn;v(c)&&(c=c.call(this));return!0===c?d(this):!1===c||null==c?k(this):r(c)?0<c.length?b.helpers.each(c,
f):k(this):d(c)});b.registerHelper("each",function(b,c){var f=c.fn,d=c.inverse,m=0,p="",e;v(b)&&(b=b.call(this));c.data&&(e=k(c.data));if(b&&"object"===typeof b)if(r(b))for(var w=b.length;m<w;m++)e&&(e.index=m,e.first=0===m,e.last=m===b.length-1),p+=f(b[m],{data:e});else for(w in b)b.hasOwnProperty(w)&&(e&&(e.key=w),p+=f(b[w],{data:e}),m++);0===m&&(p=d(this));return p});b.registerHelper("if",function(b,c){v(b)&&(b=b.call(this));return!c.hash.includeZero&&!b||u.isEmpty(b)?c.inverse(this):c.fn(this)});
b.registerHelper("unless",function(c,f){return b.helpers["if"].call(this,c,{fn:f.inverse,inverse:f.fn,hash:f.hash})});b.registerHelper("with",function(b,c){v(b)&&(b=b.call(this));if(!u.isEmpty(b))return c.fn(b)});b.registerHelper("log",function(c,f){var k=f.data&&null!=f.data.level?parseInt(f.data.level,10):1;b.log(k,c)})}function m(b,c){p.log(b,c)}var g={},u=b;g.VERSION="1.1.2";g.COMPILER_REVISION=4;g.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};var r=u.isArray,
v=u.isFunction,f=u.toString;g.HandlebarsEnvironment=d;d.prototype={constructor:d,logger:p,log:m,registerHelper:function(b,k,d){if("[object Object]"===f.call(b)){if(d||k)throw new c("Arg not supported with multiple helpers");u.extend(this.helpers,b)}else d&&(k.not=d),this.helpers[b]=k},registerPartial:function(b,c){"[object Object]"===f.call(b)?u.extend(this.partials,b):this.partials[b]=c}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,
c){if(p.level<=b){var f=p.methodMap[b];"undefined"!==typeof console&&console[f]&&console[f].call(console,c)}}};g.logger=p;g.log=m;var k=function(b){var c={};u.extend(c,b);return c};g.createFrame=k;return g}(b,d),g=function(b,c,d){function e(b,c,f){var d=Array.prototype.slice.call(arguments,3),m=function(b,k){k=k||{};return c.apply(this,[b,k.data||f].concat(d))};m.program=b;m.depth=d.length;return m}function m(b,c,f){var d=function(b,k){k=k||{};return c(b,k.data||f)};d.program=b;d.depth=0;return d}
function g(b,c,f,d,m,h){d={partial:!0,helpers:d,partials:m,data:h};if(void 0===b)throw new v("The partial "+c+" could not be found");if(b instanceof Function)return b(f,d)}function u(){return""}var r={},v=c,f=d.COMPILER_REVISION,p=d.REVISION_CHANGES;r.template=function(c,d){if(!d)throw Error("No environment passed to template");var r={escapeExpression:b.escapeExpression,invokePartial:d.compile?function(b,c,f,k,m,p){var e=g.apply(this,arguments);if(e)return e;e={helpers:k,partials:m,data:p};m[c]=d.compile(b,
{data:void 0!==p},d);return m[c](f,e)}:function(b,c){var f=g.apply(this,arguments);if(f)return f;throw new v("The partial "+c+" could not be compiled when running in runtime-only mode");},programs:[],program:function(b,c,f){var k=this.programs[b];f?k=m(b,c,f):k||(k=this.programs[b]=m(b,c));return k},merge:function(c,f){var k=c||f;c&&f&&c!==f&&(k={},b.extend(k,f),b.extend(k,c));return k},programWithDepth:e,noop:u,compilerInfo:null};return function(b,m){m=m||{};var h=m.partial?m:d,e,q;m.partial||(e=
m.helpers,q=m.partials);h=c.call(r,h,b,e,q,m.data);if(!m.partial&&(q=(e=r.compilerInfo)&&e[0]||1,q!==f)){if(q<f)throw Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+p[f]+") or downgrade your runtime to an older version ("+p[q]+").");throw Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").");}return h}};
r.programWithDepth=e;r.program=m;r.invokePartial=g;r.noop=u;return r}(b,d,e),c=function(b,c,d,e,m){var g=function(){var r=new b.HandlebarsEnvironment;e.extend(r,b);r.SafeString=c;r.Exception=d;r.Utils=e;r.VM=m;r.template=function(b){return m.template(b,r)};return r},u=g();u.create=g;return u}(e,c,d,b,g),b=function(b){function c(b,d,e){this.type="program";this.statements=b;this.strip={};e?(this.inverse=new c(e,d),this.strip.right=d.left):d&&(this.strip.left=d.right)}var d={};d.ProgramNode=c;d.MustacheNode=
function(b,c,d,e){this.type="mustache";this.hash=c;this.strip=e;d=d[3]||d[2];this.escaped="{"!==d&&"&"!==d;d=this.id=b[0];b=this.params=b.slice(1);this.isHelper=(this.eligibleHelper=d.isSimple)&&(b.length||c)};d.PartialNode=function(b,c,d){this.type="partial";this.partialName=b;this.context=c;this.strip=d};d.BlockNode=function(c,d,e,g){if(c.id.original!==g.path.original)throw new b(c.id.original+" doesn't match "+g.path.original);this.type="block";this.mustache=c;this.program=d;this.inverse=e;this.strip=
{left:c.strip.left,right:g.strip.right};(d||e).strip.left=c.strip.right;(e||d).strip.right=g.strip.left;e&&!d&&(this.isInverse=!0)};d.ContentNode=function(b){this.type="content";this.string=b};d.HashNode=function(b){this.type="hash";this.pairs=b};d.IdNode=function(c){this.type="ID";for(var d="",e=[],g=0,r=0,l=c.length;r<l;r++){var f=c[r].part,d=d+((c[r].separator||"")+f);if(".."===f||"."===f||"this"===f){if(0<e.length)throw new b("Invalid path: "+d);".."===f?g++:this.isScoped=!0}else e.push(f)}this.original=
d;this.parts=e;this.string=e.join(".");this.depth=g;this.isSimple=1===c.length&&!this.isScoped&&0===g;this.stringModeValue=this.string};d.PartialNameNode=function(b){this.type="PARTIAL_NAME";this.name=b.original};d.DataNode=function(b){this.type="DATA";this.id=b};d.StringNode=function(b){this.type="STRING";this.original=this.string=this.stringModeValue=b};d.IntegerNode=function(b){this.type="INTEGER";this.original=this.integer=b;this.stringModeValue=Number(b)};d.BooleanNode=function(b){this.type=
"BOOLEAN";this.bool=b;this.stringModeValue="true"===b};d.CommentNode=function(b){this.type="comment";this.comment=b};return d}(d),g=function(b,c){var d={};d.parser=b;d.parse=function(d){if(d.constructor===c.ProgramNode)return d;b.yy=c;return b.parse(d)};return d}(function(){return function(){function b(c,d){return{left:"~"===c[2],right:"~"===d[0]||"~"===d[1]}}function c(){this.yy={}}var d={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,
closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",
15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],
[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(c,d,e,r,g,f,p){c=f.length-1;switch(g){case 1:return new r.ProgramNode(f[c-1]);case 2:return new r.ProgramNode([]);case 3:this.$=new r.ProgramNode([],f[c-1],f[c]);break;case 4:this.$=new r.ProgramNode(f[c-2],f[c-1],f[c]);break;case 5:this.$=new r.ProgramNode(f[c-1],f[c],[]);break;case 6:this.$=new r.ProgramNode(f[c]);break;case 7:this.$=new r.ProgramNode([]);break;case 8:this.$=new r.ProgramNode([]);break;case 9:this.$=[f[c]];
break;case 10:f[c-1].push(f[c]);this.$=f[c-1];break;case 11:this.$=new r.BlockNode(f[c-2],f[c-1].inverse,f[c-1],f[c]);break;case 12:this.$=new r.BlockNode(f[c-2],f[c-1],f[c-1].inverse,f[c]);break;case 13:this.$=f[c];break;case 14:this.$=f[c];break;case 15:this.$=new r.ContentNode(f[c]);break;case 16:this.$=new r.CommentNode(f[c]);break;case 17:this.$=new r.MustacheNode(f[c-1][0],f[c-1][1],f[c-2],b(f[c-2],f[c]));break;case 18:this.$=new r.MustacheNode(f[c-1][0],f[c-1][1],f[c-2],b(f[c-2],f[c]));break;
case 19:this.$={path:f[c-1],strip:b(f[c-2],f[c])};break;case 20:this.$=new r.MustacheNode(f[c-1][0],f[c-1][1],f[c-2],b(f[c-2],f[c]));break;case 21:this.$=new r.MustacheNode(f[c-1][0],f[c-1][1],f[c-2],b(f[c-2],f[c]));break;case 22:this.$=new r.PartialNode(f[c-2],f[c-1],b(f[c-3],f[c]));break;case 23:this.$=b(f[c-1],f[c]);break;case 24:this.$=[[f[c-2]].concat(f[c-1]),f[c]];break;case 25:this.$=[[f[c]],null];break;case 26:this.$=f[c];break;case 27:this.$=new r.StringNode(f[c]);break;case 28:this.$=new r.IntegerNode(f[c]);
break;case 29:this.$=new r.BooleanNode(f[c]);break;case 30:this.$=f[c];break;case 31:this.$=new r.HashNode(f[c]);break;case 32:this.$=[f[c-2],f[c]];break;case 33:this.$=new r.PartialNameNode(f[c]);break;case 34:this.$=new r.PartialNameNode(new r.StringNode(f[c]));break;case 35:this.$=new r.PartialNameNode(new r.IntegerNode(f[c]));break;case 36:this.$=new r.DataNode(f[c]);break;case 37:this.$=new r.IdNode(f[c]);break;case 38:f[c-2].push({part:f[c],separator:f[c-1]});this.$=f[c-2];break;case 39:this.$=
[{part:f[c]}];break;case 42:this.$=[];break;case 43:f[c-1].push(f[c]);break;case 46:this.$=[f[c]];break;case 47:f[c-1].push(f[c])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],
15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],
19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:29,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:30,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:31,21:24,30:25,38:[1,28],40:[1,27],41:26},{21:33,26:32,32:[1,34],33:[1,35],38:[1,28],41:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],
25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,38:[1,28],40:[1,27],41:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,42],24:[2,42],28:43,32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,25],24:[2,25]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[1,44]},{21:45,38:[1,28],41:26},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],40:[2,39],42:[2,39]},{18:[1,
46]},{18:[1,47]},{24:[1,48]},{18:[2,40],21:50,27:49,38:[1,28],41:26},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{18:[2,35],38:[2,35]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,38:[1,28],41:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],
20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,44],21:56,24:[2,44],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:55,36:61,37:62,38:[1,63],40:[1,27],41:26},{38:[1,64]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,
20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,65]},{18:[2,41]},{18:[1,66]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24]},{18:[2,43],24:[2,43],32:[2,43],33:[2,43],34:[2,43],38:[2,43],40:[2,43]},{18:[2,45],24:[2,45]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},
{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],38:[2,30],40:[2,30]},{18:[2,31],24:[2,31],37:67,38:[1,68]},{18:[2,46],24:[2,46],38:[2,46]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],39:[1,69],40:[2,39],42:[2,39]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],
38:[2,38],40:[2,38],42:[2,38]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{18:[2,47],24:[2,47],38:[2,47]},{39:[1,69]},{21:56,30:60,31:70,32:[1,57],33:[1,58],34:[1,59],38:[1,28],40:[1,27],41:26},{18:[2,32],24:[2,32],38:[2,32]}],defaultActions:{3:[2,2],16:[2,1],50:[2,41]},parseError:function(b,c){throw Error(b);},parse:function(b){var c=[0],d=[null],e=[],g=this.table,
f="",p=0,k=0,w=0;this.lexer.setInput(b);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});b=this.lexer.yylloc;e.push(b);var q=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var l,s,h,n,t={},C,y;;){h=c[c.length-1];if(this.defaultActions[h])n=this.defaultActions[h];else{if(null===l||"undefined"==typeof l)l=this.lexer.lex()||1,"number"!==typeof l&&
(l=this.symbols_[l]||l);n=g[h]&&g[h][l]}if("undefined"===typeof n||!n.length||!n[0]){var E="";if(!w){y=[];for(C in g[h])this.terminals_[C]&&2<C&&y.push("'"+this.terminals_[C]+"'");E=this.lexer.showPosition?"Parse error on line "+(p+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+y.join(", ")+", got '"+(this.terminals_[l]||l)+"'":"Parse error on line "+(p+1)+": Unexpected "+(1==l?"end of input":"'"+(this.terminals_[l]||l)+"'");this.parseError(E,{text:this.lexer.match,token:this.terminals_[l]||l,
line:this.lexer.yylineno,loc:b,expected:y})}}if(n[0]instanceof Array&&1<n.length)throw Error("Parse Error: multiple actions possible at state: "+h+", token: "+l);switch(n[0]){case 1:c.push(l);d.push(this.lexer.yytext);e.push(this.lexer.yylloc);c.push(n[1]);l=null;s?(l=s,s=null):(k=this.lexer.yyleng,f=this.lexer.yytext,p=this.lexer.yylineno,b=this.lexer.yylloc,0<w&&w--);break;case 2:y=this.productions_[n[1]][1];t.$=d[d.length-y];t._$={first_line:e[e.length-(y||1)].first_line,last_line:e[e.length-1].last_line,
first_column:e[e.length-(y||1)].first_column,last_column:e[e.length-1].last_column};q&&(t._$.range=[e[e.length-(y||1)].range[0],e[e.length-1].range[1]]);h=this.performAction.call(t,f,k,p,this.yy,n[1],d,e);if("undefined"!==typeof h)return h;y&&(c=c.slice(0,-2*y),d=d.slice(0,-1*y),e=e.slice(0,-1*y));c.push(this.productions_[n[1]][0]);d.push(t.$);e.push(t._$);n=g[c[c.length-2]][c[c.length-1]];c.push(n);break;case 3:return!0}}return!0}},e=function(){return{EOF:1,parseError:function(b,c){if(this.yy.parser)this.yy.parser.parseError(b,
c);else throw Error(b);},setInput:function(b){this._input=b;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var b=this._input[0];this.yytext+=b;this.yyleng++;this.offset++;this.match+=b;this.matched+=b;b.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):
this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return b},unput:function(b){var c=b.length,d=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-c-1);this.offset-=c;b=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);d.length-1&&(this.yylineno-=d.length-1);var e=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,
last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:d?(d.length===b.length?this.yylloc.first_column:0)+b[b.length-d.length].length-d[0].length:this.yylloc.first_column-c};this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-c]);return this},more:function(){this._more=!0;return this},less:function(b){this.unput(this.match.slice(b))},pastInput:function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(20<b.length?"...":"")+b.substr(-20).replace(/\n/g,
"")},upcomingInput:function(){var b=this.match;20>b.length&&(b+=this._input.substr(0,20-b.length));return(b.substr(0,20)+(20<b.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var b=this.pastInput(),c=Array(b.length+1).join("-");return b+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,c,d;this._more||(this.match=this.yytext="");for(var e=this._currentRules(),g=0;g<e.length&&(!(c=this._input.match(this.rules[e[g]]))||b&&!(c[0].length>
b[0].length)||(b=c,d=g,this.options.flex));g++);if(b){if(c=b[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=c.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length};this.yytext+=b[0];this.match+=b[0];this.matches=b;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=
!1;this._input=this._input.slice(b[0].length);this.matched+=b[0];b=this.performAction.call(this,this.yy,this,e[d],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(b)return b}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return"undefined"!==typeof b?b:this.lex()},begin:function(b){this.conditionStack.push(b)},
popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(b){this.begin(b)},options:{},performAction:function(b,c,d,e){function g(b,d){return c.yytext=c.yytext.substr(b,c.yyleng-d)}switch(d){case 0:"\\\\"===c.yytext.slice(-2)?(g(0,1),this.begin("mu")):"\\"===c.yytext.slice(-1)?(g(0,1),this.begin("emu")):
this.begin("mu");if(c.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==c.yytext.slice(-1)&&this.popState(),"\\"===c.yytext.slice(-1)&&g(0,1),14;case 3:return g(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState();this.begin("com");break;case 12:return g(3,5),this.popState(),15;case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 19:return this.popState(),
24;case 20:return this.popState(),18;case 21:return c.yytext=g(1,2).replace(/\\"/g,'"'),32;case 22:return c.yytext=g(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return c.yytext=g(1,2),38;case 29:return"INVALID";case 30:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,
/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,
25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}}}}();d.lexer=e;c.prototype=d;d.Parser=c;return new c}()}(),b),e=function(b){function c(b){this.value=b}function d(){}var e=b.COMPILER_REVISION,g=b.REVISION_CHANGES,x=b.log;d.prototype={nameLookup:function(b,c){var k,e;0===b.indexOf("depth")&&(k=!0);e=/^[0-9]+$/.test(c)?b+"["+c+"]":d.isValidJavaScriptVariableName(c)?b+"."+c:b+"['"+c+"']";return k?"("+b+" && "+e+")":e},appendToBuffer:function(b){return this.environment.isSimple?
"return "+b+";":{appendToBuffer:!0,content:b,toString:function(){return"buffer += "+b+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(b,c,d,e){this.environment=b;this.options=c||{};x("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!d;this.context=d||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=
[];this.compileChildren(b,c);b=b.opcodes;this.i=0;for(d=b.length;this.i<d;this.i++)c=b[this.i],"DECLARE"===c.opcode?this[c.name]=c.value:this[c.opcode].apply(this,c.args),c.opcode!==this.stripNext&&(this.stripNext=!1);this.pushSource("");return this.createFunctionContext(e)},preamble:function(){var b=[];if(this.isChild)b.push("");else{var c=this.namespace,d="helpers = this.merge(helpers, "+c+".helpers);";this.environment.usePartial&&(d=d+" partials = this.merge(partials, "+c+".partials);");this.options.data&&
(d+=" data = data || {};");b.push(d)}this.environment.isSimple?b.push(""):b.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=b},createFunctionContext:function(b){var c=this.stackVars.concat(this.registers.list);0<c.length&&(this.source[1]=this.source[1]+", "+c.join(", "));if(!this.isChild)for(var d in this.context.aliases)this.context.aliases.hasOwnProperty(d)&&(this.source[1]=this.source[1]+", "+d+"="+this.context.aliases[d]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+
";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.pushSource("return buffer;");c=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];d=0;for(var w=this.environment.depths.list.length;d<w;d++)c.push("depth"+this.environment.depths.list[d]);d=this.mergeSource();this.isChild||(d="this.compilerInfo = ["+e+",'"+g[e]+"'];\n"+d);if(b)return c.push(d),Function.apply(this,c);b="function "+(this.name||"")+"("+c.join(",")+
") {\n "+d+"}";x("debug",b+"\n\n");return b},mergeSource:function(){for(var b="",c,d=0,e=this.source.length;d<e;d++){var g=this.source[d];g.appendToBuffer?c=c?c+"\n + "+g.content:g.content:(c&&(b+="buffer += "+c+";\n ",c=void 0),b+=g+"\n ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var b=["depth0"];this.setupParams(0,b);this.replaceStack(function(c){b.splice(1,0,c);return"blockHelperMissing.call("+b.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing=
"helpers.blockHelperMissing";var b=["depth0"];this.setupParams(0,b);var c=this.topStack();b.splice(1,0,c);b[b.length-1]="options";this.pushSource("if (!"+this.lastHelper+") { "+c+" = blockHelperMissing.call("+b.join(", ")+"); }")},appendContent:function(b){this.pendingContent&&(b=this.pendingContent+b);this.stripNext&&(b=b.replace(/^\s+/,""));this.pendingContent=b},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,""));this.stripNext="strip"},append:function(){this.flushInline();
var b=this.popStack();this.pushSource("if("+b+" || "+b+" === 0) { "+this.appendToBuffer(b)+" }");this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(b){this.lastContext!==b&&(this.lastContext=b)},lookupOnContext:function(b){this.push(this.nameLookup("depth"+this.lastContext,b,"context"))},
pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(b){return"typeof "+b+" === functionType ? "+b+".apply(depth0) : "+b})},lookup:function(b){this.replaceStack(function(c){return c+" == null || "+c+" === false ? "+c+" : "+this.nameLookup(c,b,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(b,c){this.pushStackLiteral("depth"+this.lastContext);
this.pushString(c);"string"===typeof b?this.pushString(b):this.pushStackLiteral(b)},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var b=this.hash;this.hash=void 0;this.options.stringParams&&(this.register("hashContexts","{"+b.contexts.join(",")+"}"),this.register("hashTypes","{"+b.types.join(",")+"}"));this.push("{\n "+
b.values.join(",\n ")+"\n }")},pushString:function(b){this.pushStackLiteral(this.quotedString(b))},push:function(b){this.inlineStack.push(b);return b},pushLiteral:function(b){this.pushStackLiteral(b)},pushProgram:function(b){null!=b?this.pushStackLiteral(this.programExpression(b)):this.pushStackLiteral(null)},invokeHelper:function(b,c){this.context.aliases.helperMissing="helpers.helperMissing";var d=this.lastHelper=this.setupHelper(b,c,!0),e=this.nameLookup("depth"+this.lastContext,c,"context");this.push(d.name+
" || "+e);this.replaceStack(function(b){return b+" ? "+b+".call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+")"})},invokeKnownHelper:function(b,c){var d=this.setupHelper(b,c);this.push(d.name+".call("+d.callParams+")")},invokeAmbiguous:function(b,c){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var d=this.setupHelper(0,b,c),e=this.lastHelper=this.nameLookup("helpers",b,"helper"),g=this.nameLookup("depth"+this.lastContext,b,"context"),r=this.nextStack();
this.pushSource("if ("+r+" = "+e+") { "+r+" = "+r+".call("+d.callParams+"); }");this.pushSource("else { "+r+" = "+g+"; "+r+" = typeof "+r+" === functionType ? "+r+".call("+d.callParams+") : "+r+"; }")},invokePartial:function(b){b=[this.nameLookup("partials",b,"partial"),"'"+b+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(b){var c=this.popStack(),d,e;this.options.stringParams&&
(e=this.popStack(),d=this.popStack());var g=this.hash;d&&g.contexts.push("'"+b+"': "+d);e&&g.types.push("'"+b+"': "+e);g.values.push("'"+b+"': ("+c+")")},compiler:d,compileChildren:function(b,c){for(var d=b.children,e,g,r=0,m=d.length;r<m;r++){e=d[r];g=new this.compiler;var h=this.matchExistingProgram(e);null==h?(this.context.programs.push(""),h=this.context.programs.length,e.index=h,e.name="program"+h,this.context.programs[h]=g.compile(e,c,this.context),this.context.environments[h]=e):(e.index=h,
e.name="program"+h)}},matchExistingProgram:function(b){for(var c=0,d=this.context.environments.length;c<d;c++){var e=this.context.environments[c];if(e&&e.equals(b))return c}},programExpression:function(b){this.context.aliases.self="this";if(null==b)return"self.noop";var c=this.environment.children[b];b=c.depths.list;for(var d=[c.index,c.name,"data"],e=0,g=b.length;e<g;e++)c=b[e],1===c?d.push("depth0"):d.push("depth"+(c-1));return(0===b.length?"self.program(":"self.programWithDepth(")+d.join(", ")+
")"},register:function(b,c){this.useRegister(b);this.pushSource(b+" = "+c+";")},useRegister:function(b){this.registers[b]||(this.registers[b]=!0,this.registers.list.push(b))},pushStackLiteral:function(b){return this.push(new c(b))},pushSource:function(b){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0);b&&this.source.push(b)},pushStack:function(b){this.flushInline();var c=this.incrStack();b&&this.pushSource(c+" = "+b+";");
this.compileStack.push(c);return c},replaceStack:function(b){var d="",k=this.isInline(),e;k?(e=this.popStack(!0),e instanceof c?e=e.value:(d=this.stackSlot?this.topStackName():this.incrStack(),d="("+this.push(d)+" = "+e+"),",e=this.topStack())):e=this.topStack();b=b.call(this,e);k?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+d+b+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+d+b+");"));return e},nextStack:function(){return this.pushStack()},
incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var b=this.inlineStack;if(b.length){this.inlineStack=[];for(var d=0,k=b.length;d<k;d++){var e=b[d];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(b){var d=this.isInline(),k=(d?this.inlineStack:
this.compileStack).pop();if(!b&&k instanceof c)return k.value;d||this.stackSlot--;return k},topStack:function(b){var d=this.isInline()?this.inlineStack:this.compileStack,d=d[d.length-1];return!b&&d instanceof c?d.value:d},quotedString:function(b){return'"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(b,c,d){var e=[];this.setupParams(b,e,d);b=this.nameLookup("helpers",c,"helper");
return{params:e,name:b,callParams:["depth0"].concat(e).join(", "),helperMissingParams:d&&["depth0",this.quotedString(c)].concat(e).join(", ")}},setupParams:function(b,c,d){var e=[],g=[],r=[],m,h;e.push("hash:"+this.popStack());m=this.popStack();if((h=this.popStack())||m)h||(this.context.aliases.self="this",h="self.noop"),m||(this.context.aliases.self="this",m="self.noop"),e.push("inverse:"+m),e.push("fn:"+h);for(h=0;h<b;h++)m=this.popStack(),c.push(m),this.options.stringParams&&(r.push(this.popStack()),
g.push(this.popStack()));this.options.stringParams&&(e.push("contexts:["+g.join(",")+"]"),e.push("types:["+r.join(",")+"]"),e.push("hashContexts:hashContexts"),e.push("hashTypes:hashTypes"));this.options.data&&e.push("data:data");e="{"+e.join(",")+"}";d?(this.register("options",e),c.push("options")):c.push(e);return c.join(", ")}};b="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" ");
for(var u=d.RESERVED_WORDS={},r=0,v=b.length;r<v;r++)u[b[r]]=!0;d.isValidJavaScriptVariableName=function(b){return!d.RESERVED_WORDS[b]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(b)?!0:!1};return d}(e),d=function(b,c,d,e){function g(){}var x={},u=c.parse;x.Compiler=g;g.prototype={compiler:g,disassemble:function(){for(var b=this.opcodes,c,d=[],e,k,g=0,m=b.length;g<m;g++)if(c=b[g],"DECLARE"===c.opcode)d.push("DECLARE "+c.name+"="+c.value);else{e=[];for(var l=0;l<c.args.length;l++)k=c.args[l],"string"===typeof k&&
(k='"'+k.replace("\n","\\n")+'"'),e.push(k);d.push(c.opcode+" "+e.join(" "))}return d.join("\n")},equals:function(b){var c=this.opcodes.length;if(b.opcodes.length!==c)return!1;for(var d=0;d<c;d++){var e=this.opcodes[d],k=b.opcodes[d];if(e.opcode!==k.opcode||e.args.length!==k.args.length)return!1;for(var g=0;g<e.args.length;g++)if(e.args[g]!==k.args[g])return!1}c=this.children.length;if(b.children.length!==c)return!1;for(d=0;d<c;d++)if(!this.children[d].equals(b.children[d]))return!1;return!0},guid:0,
compile:function(b,c){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=c;var d=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(d)for(var e in d)this.options.knownHelpers[e]=d[e];return this.accept(b)},accept:function(b){var c=b.strip||{};c.left&&this.opcode("strip");b=this[b.type](b);c.right&&this.opcode("strip");return b},program:function(b){b=b.statements;for(var c=0,d=b.length;c<d;c++)this.accept(b[c]);
this.isSimple=1===d;this.depths.list=this.depths.list.sort(function(b,c){return b-c});return this},compileProgram:function(b){b=(new this.compiler).compile(b,this.options);var c=this.guid++,d;this.usePartial=this.usePartial||b.usePartial;this.children[c]=b;for(var e=0,k=b.depths.list.length;e<k;e++)d=b.depths.list[e],2>d||this.addDepth(d-1);return c},block:function(b){var c=b.mustache,d=b.program;b=b.inverse;d&&(d=this.compileProgram(d));b&&(b=this.compileProgram(b));var e=this.classifyMustache(c);
"helper"===e?this.helperMustache(c,d,b):"simple"===e?(this.simpleMustache(c),this.opcode("pushProgram",d),this.opcode("pushProgram",b),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(c,d,b),this.opcode("pushProgram",d),this.opcode("pushProgram",b),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(b){b=b.pairs;var c,d;this.opcode("pushHash");for(var e=0,k=b.length;e<k;e++)c=b[e],d=c[1],this.options.stringParams?(d.depth&&this.addDepth(d.depth),
this.opcode("getContext",d.depth||0),this.opcode("pushStringParam",d.stringModeValue,d.type)):this.accept(d),this.opcode("assignToHash",c[0]);this.opcode("popHash")},partial:function(b){var c=b.partialName;this.usePartial=!0;b.context?this.ID(b.context):this.opcode("push","depth0");this.opcode("invokePartial",c.name);this.opcode("append")},content:function(b){this.opcode("appendContent",b.string)},mustache:function(b){var c=this.options,d=this.classifyMustache(b);"simple"===d?this.simpleMustache(b):
"helper"===d?this.helperMustache(b):this.ambiguousMustache(b);b.escaped&&!c.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(b,c,d){b=b.id;var e=b.parts[0],k=null!=c||null!=d;this.opcode("getContext",b.depth);this.opcode("pushProgram",c);this.opcode("pushProgram",d);this.opcode("invokeAmbiguous",e,k)},simpleMustache:function(b){b=b.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext"));
this.opcode("resolvePossibleLambda")},helperMustache:function(b,c,d){c=this.setupFullMustacheParams(b,c,d);b=b.id.parts[0];if(this.options.knownHelpers[b])this.opcode("invokeKnownHelper",c.length,b);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+b);this.opcode("invokeHelper",c.length,b)}},ID:function(b){this.addDepth(b.depth);this.opcode("getContext",b.depth);b.parts[0]?this.opcode("lookupOnContext",b.parts[0]):this.opcode("pushContext");
for(var c=1,d=b.parts.length;c<d;c++)this.opcode("lookup",b.parts[c])},DATA:function(c){this.options.data=!0;if(c.id.isScoped||c.id.depth)throw new b("Scoped data references are not supported: "+c.original);this.opcode("lookupData");c=c.id.parts;for(var d=0,e=c.length;d<e;d++)this.opcode("lookup",c[d])},STRING:function(b){this.opcode("pushString",b.string)},INTEGER:function(b){this.opcode("pushLiteral",b.integer)},BOOLEAN:function(b){this.opcode("pushLiteral",b.bool)},comment:function(){},opcode:function(b){this.opcodes.push({opcode:b,
args:[].slice.call(arguments,1)})},declare:function(b,c){this.opcodes.push({opcode:"DECLARE",name:b,value:c})},addDepth:function(b){if(isNaN(b))throw Error("EWOT");0===b||this.depths[b]||(this.depths[b]=!0,this.depths.list.push(b))},classifyMustache:function(b){var c=b.isHelper,d=b.eligibleHelper,e=this.options;d&&!c&&(e.knownHelpers[b.id.parts[0]]?c=!0:e.knownHelpersOnly&&(d=!1));return c?"helper":d?"ambiguous":"simple"},pushParams:function(b){for(var c=b.length,d;c--;)if(d=b[c],this.options.stringParams)d.depth&&
this.addDepth(d.depth),this.opcode("getContext",d.depth||0),this.opcode("pushStringParam",d.stringModeValue,d.type);else this[d.type](d)},setupMustacheParams:function(b){var c=b.params;this.pushParams(c);b.hash?this.hash(b.hash):this.opcode("emptyHash");return c},setupFullMustacheParams:function(b,c,d){var e=b.params;this.pushParams(e);this.opcode("pushProgram",c);this.opcode("pushProgram",d);b.hash?this.hash(b.hash):this.opcode("emptyHash");return e}};x.precompile=function(c,l){if(null==c||"string"!==
typeof c&&c.constructor!==e.ProgramNode)throw new b("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+c);l=l||{};"data"in l||(l.data=!0);var f=u(c),f=(new g).compile(f,l);return(new d).compile(f,l)};x.compile=function(c,l,f){if(null==c||"string"!==typeof c&&c.constructor!==e.ProgramNode)throw new b("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+c);l=l||{};"data"in l||(l.data=!0);var p;return function(b,e){if(!p){var q=u(c),q=(new g).compile(q,
l),q=(new d).compile(q,l,void 0,!0);p=f.template(q)}return p.call(this,b,e)}};return x}(d,g,e,b);return function(b,c,d,e,g){var x=d.parser,u=d.parse,r=e.Compiler,v=e.compile,f=e.precompile,p=b.create;d=function(){var b=p();b.compile=function(c,d){return v(c,d,b)};b.precompile=f;b.AST=c;b.Compiler=r;b.JavaScriptCompiler=g;b.Parser=x;b.parse=u;return b};b=d();b.create=d;return b}(c,b,g,d,e)}();(function(c,b,d){function e(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent("on"+c,d)}function g(b){if("keypress"==b.type){var c=String.fromCharCode(b.which);b.shiftKey||(c=c.toLowerCase());return c}return f[b.which]?f[b.which]:p[b.which]?p[b.which]:String.fromCharCode(b.which).toLowerCase()}function n(b){b=b||{};var c=!1,d;for(d in h)b[d]?c=!0:h[d]=0;c||(y=!1)}function l(b,c,d,e,k,f){var g,m,l=[],p=d.type;if(!B[b])return[];"keyup"==p&&x(b)&&(c=[b]);for(g=0;g<B[b].length;++g)if(m=
B[b][g],!(!e&&m.seq&&h[m.seq]!=m.level||p!=m.action||("keypress"!=p||d.metaKey||d.ctrlKey)&&c.sort().join(",")!==m.modifiers.sort().join(","))){var q=e&&m.seq==e&&m.level==f;(!e&&m.combo==k||q)&&B[b].splice(g,1);l.push(m)}return l}function t(b){var c=[];b.shiftKey&&c.push("shift");b.altKey&&c.push("alt");b.ctrlKey&&c.push("ctrl");b.metaKey&&c.push("meta");return c}function q(b,c,d){E.stopCallback(c,c.target||c.srcElement,d)||!1!==b(c,d)||(c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation(),
c.returnValue=!1,c.cancelBubble=!0)}function m(b){"number"!==typeof b.which&&(b.which=b.keyCode);var c=g(b);c&&("keyup"==b.type&&D===c?D=!1:E.handleKey(c,t(b),b))}function x(b){return"shift"==b||"ctrl"==b||"alt"==b||"meta"==b}function u(b,c,d,e){function k(c){return function(){y=c;++h[b];clearTimeout(z);z=setTimeout(n,1E3)}}function f(c){q(d,c,b);"keyup"!==e&&(D=g(c));setTimeout(n,10)}for(var m=h[b]=0;m<c.length;++m){var l=m+1===c.length?f:k(e||r(c[m+1]).action);v(c[m],l,e,b,m)}}function r(b,c){var d,
e,h,g=[];d="+"===b?["+"]:b.split("+");for(h=0;h<d.length;++h)e=d[h],w[e]&&(e=w[e]),c&&"keypress"!=c&&k[e]&&(e=k[e],g.push("shift")),x(e)&&g.push(e);d=e;h=c;if(!h){if(!A){A={};for(var m in f)95<m&&112>m||f.hasOwnProperty(m)&&(A[f[m]]=m)}h=A[d]?"keydown":"keypress"}"keypress"==h&&g.length&&(h="keydown");return{key:e,modifiers:g,action:h}}function v(b,c,d,e,k){s[b+":"+d]=c;b=b.replace(/\s+/g," ");var f=b.split(" ");1<f.length?u(b,f,c,d):(d=r(b,d),B[d.key]=B[d.key]||[],l(d.key,d.modifiers,{type:d.action},
e,b,k),B[d.key][e?"unshift":"push"]({callback:c,modifiers:d.modifiers,action:d.action,seq:e,level:k,combo:b}))}var f={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},p={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},k={"~":"`","!":"1",
"@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},w={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},A,B={},s={},h={},z,D=!1,C=!1,y=!1;for(d=1;20>d;++d)f[111+d]="f"+d;for(d=0;9>=d;++d)f[d+96]=d;e(b,"keypress",m);e(b,"keydown",m);e(b,"keyup",m);var E={bind:function(b,c,d){b=b instanceof Array?b:[b];for(var e=0;e<b.length;++e)v(b[e],c,d);return this},
unbind:function(b,c){return E.bind(b,function(){},c)},trigger:function(b,c){if(s[b+":"+c])s[b+":"+c]({},b);return this},reset:function(){B={};s={};return this},stopCallback:function(b,c){return-1<(" "+c.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==c.tagName||"SELECT"==c.tagName||"TEXTAREA"==c.tagName||c.isContentEditable},handleKey:function(b,c,d){var e=l(b,c,d),k;c={};var f=0,h=!1;for(k=0;k<e.length;++k)e[k].seq&&(f=Math.max(f,e[k].level));for(k=0;k<e.length;++k)e[k].seq?e[k].level==f&&(h=!0,
c[e[k].seq]=1,q(e[k].callback,d,e[k].combo)):h||q(e[k].callback,d,e[k].combo);e="keypress"==d.type&&C;d.type!=y||x(b)||e||n(c);C=h&&"keydown"==d.type}};c.Mousetrap=E;"function"===typeof define&&define.amd&&define(E)})(window,document);window.appstorm=window.a=_.noConflict();a.__defaultAjaxOptions={};a.url="";a.getStackTrace=function(){return Error().stack};a.isNone=function(c){return a.isNull(c)||a.isUndefined(c)};a.deepClone=function(c){if(a.isObject(c)){if(a.isArray(c))for(var b=c.length,d=Array(b),e=0;e<b;++e)d[e]=a.deepClone(c[e]);else for(b in d={},a.isFunction(c.constructor)&&(d=new c.constructor),a.isObject(c.prototype)&&(d.prototype=c.prototype),c)d[b]=a.deepClone(c[b]);return d}return c};
a.contains=function(c,b){if(c instanceof Array)for(var d=c.length;d--;){if(c[d]===b)return!0}else if(this.isObject(c))return b in c;return!1};a.isNumber=function(c){return!isNaN(parseFloat(c))&&isFinite(c)};a.isObject=function(c){return"object"===typeof c&&null!==c};a.isString=function(c){return"string"===typeof c};a.isFunction=function(c){return"function"===typeof c};a.isNull=function(c){return"undefined"===typeof c||null===c};a.isBoolean=function(c){return"boolean"===typeof c};
a.isArray=function(c){return c instanceof Array};a.setDefaultAjaxOptions=function(c){a.isObject(c)&&(this.__defaultAjaxOptions=c)};a.getDefaultAjaxOptions=function(){return this.__defaultAjaxOptions};(function(){var c=document.getElementById("a-core");c&&"undefined"!==typeof c.src&&(a.url=c.src.replace(/\/[^/]*$/,"/"))})();a.environment=new function(){var c={verbose:2,console:"log"};this.get=function(b){return b in c?c[b]:null};this.set=function(b,d){a.isNone(b)||(c[b]=d,a.message.dispatch("a.environment.add",{key:b,value:d}))};this.remove=function(b){a.isNone(c[b])||(delete c[b],a.message.dispatch("a.environment.remove",{key:b}))};this.clear=function(){c={verbose:2,console:"log"}}};a.console=function(){function c(c,e,g,n){a.isArray(b[c])||(c="log");b[c].push(e);if(!a.isNone(window.console)&&a.isFunction(window.console.log)&&!1!==n)switch(a.environment.get("console")){case "error":if("error"!==c)break;case "warning":case "warn":if("warn"!==c&&"error"!==c)break;case "info":if("log"===c)break;default:n=!0;var l=!1;if(a.isString(e)&&0<=e.indexOf(":"))for(var t=e.substr(0,e.indexOf(":")).split("."),q=t.length;q--;){var m="verbose-"+t.join("."),m=a.environment.get(m);if(!a.isNone(m)){l=
!0;n=m<g?!1:!0;break}t.pop()}l||(a.isNone(a.environment.get("verbose"))||a.isNone(g))||parseInt(a.environment.get("verbose"),10)<g&&(n=!1);if(n)window.console[c](e)}for(;2E3<b[c].length;)b[c].shift()}var b={log:[],warn:[],info:[],error:[]};return{log:function(b,e,g){c("log",b,e,g)},warn:function(b,e,g){c("warn",b,e,g)},info:function(b,e,g){c("info",b,e,g)},error:function(b,e,g){c("error",b,e,g)},trace:function(c){return a.isString(c)&&c in b?b[c]:b},clear:function(){b={log:[],warn:[],info:[],error:[]}}}}();a.eventEmitter=function(){function c(c){for(var e in b.__list)1>b.__list[e].length&&delete b.__list[e]}var b=function(){this.__list={};this.__base="a.message"};b.prototype.setName=function(b){this.__base=""+b};b.prototype.addListener=function(b,c){a.isFunction(c)?(a.isNone(this.__list[b])&&(this.__list[b]=[]),this.__list[b].push(c),this.dispatch(this.__base+".add",{type:b,fct:c})):a.console.warn(this.__base+".addListener : unable to bind function, this is not a function",1)};b.prototype.add=b.prototype.on=
b.prototype.bind=b.prototype.addListener;b.prototype.addListenerOnce=function(b,c){var g=this,n=function(l){c(l);g.removeListener(b,n)};this.addListener(b,n)};b.prototype.once=b.prototype.onOnce=b.prototype.bindOnce=b.prototype.addListenerOnce;b.prototype.removeListener=function(b,e){if(!a.isNone(this.__list[b])){var g=this.__list[b].length;if(a.isFunction(e))for(;g--;)this.__list[b][g]===e&&this.__list[b].splice(g,1);this.dispatch(this.__base+".remove",{type:b,fct:e});c(b)}};b.prototype.remove=b.prototype.off=
b.prototype.unbind=b.prototype.removeListener;b.prototype.removeAllListeners=function(b){a.isNone(this.__list[b])||(this.__list[b]=[],c(b))};b.prototype.removeAll=b.prototype.offAll=b.prototype.unbindAll=b.prototype.removeAllListeners;b.prototype.clear=function(){var b=this.__base+".clear",c;for(c in this.__list)c!==b&&delete this.__list[c];this.dispatch(b,{})};b.prototype.dispatch=function(b,c){var g=this.__list[b];if(!a.isNone(g))for(var n=0,l=g.length;n<l;++n)(function(b){setTimeout(function(){b(c)},
0)})(g[n])};return b}();a.message=new a.eventEmitter;a.message.setName=function(){};a.isNone(JSON)&&(a.isNone(JSON.parser)||a.isNone(JSON.stringify))&&function(){function c(c){var k,f,h,m="json"==c;if(m||"json-stringify"==c||"json-parse"==c){if("json-stringify"==c||m){if(k="function"==typeof q.stringify&&z){(h=function(){return 1}).toJSON=h;try{k="0"===q.stringify(0)&&"0"===q.stringify(new Number)&&'""'==q.stringify(new String)&&q.stringify(g)===b&&q.stringify(b)===b&&q.stringify()===b&&"1"===q.stringify(h)&&"[1]"==q.stringify([h])&&"[null]"==q.stringify([b])&&"null"==q.stringify(e)&&
"[null,null,null]"==q.stringify([b,g,e])&&'{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==q.stringify({A:[h,d,!1,e,"\x00\b\n\f\r\t"]})&&"1"===q.stringify(e,h)&&"[\n 1,\n 2\n]"==q.stringify([1,2],e,1)&&'"-271821-04-20T00:00:00.000Z"'==q.stringify(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==q.stringify(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==q.stringify(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==q.stringify(new Date(-1))}catch(l){k=!1}}if(!m)return k}if("json-parse"==
c||m){if("function"==typeof q.parse)try{if(0===q.parse("0")&&!q.parse(!1)&&(h=q.parse('{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'),f=5==h.a.length&&1==h.a[0])){try{f=!q.parse('"\t"')}catch(p){}if(f)try{f=1!=q.parse("01")}catch(w){}}}catch(n){f=!1}if(!m)return f}return k&&f}}var b=void 0,d=!0,e=null,g={}.toString,n,l,t="function"===typeof define&&define.c,q=!t&&"object"==typeof exports&&exports;q||t?"object"==typeof JSON&&JSON?t?q=JSON:(q.stringify=JSON.stringify,q.parse=JSON.parse):t&&(q=
this.JSON={}):q=this.JSON||(this.JSON={});var m,x,u,r,v,f,p,k,w,A,B,s,h,z=new Date(-0xc782b5b800cec),D,C,y;try{z=-109252==z.getUTCFullYear()&&0===z.getUTCMonth()&&1==z.getUTCDate()&&10==z.getUTCHours()&&37==z.getUTCMinutes()&&6==z.getUTCSeconds()&&708==z.getUTCMilliseconds()}catch(E){}c("json")||(z||(D=Math.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],y=function(b,c){return C[c]+365*(b-1970)+D((b-1969+(c=+(1<c)))/4)-D((b-1901+c)/100)+D((b-1601+c)/400)}),(n={}.hasOwnProperty)||(n=function(b){var c=
{},d;(c.__proto__=e,c.__proto__={toString:1},c).toString!=g?n=function(b){var c=this.__proto__;b=b in(this.__proto__=e,this);this.__proto__=c;return b}:(d=c.constructor,n=function(b){var c=(this.constructor||d).prototype;return b in this&&!(b in c&&this[b]===c[b])});c=e;return n.call(this,b)}),l=function(b,c){var d=0,k,f,h;(k=function(){this.valueOf=0}).prototype.valueOf=0;f=new k;for(h in f)n.call(f,h)&&d++;k=f=e;d?d=2==d?function(b,c){var d={},e="[object Function]"==g.call(b),k;for(k in b)e&&"prototype"==
k||n.call(d,k)||(d[k]=1)&&n.call(b,k)&&c(k)}:function(b,c){var d="[object Function]"==g.call(b),e,k;for(e in b)d&&"prototype"==e||!n.call(b,e)||(k="constructor"===e)||c(e);(k||n.call(b,e="constructor"))&&c(e)}:(f="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),d=function(b,c){var d="[object Function]"==g.call(b),e;for(e in b)d&&"prototype"==e||!n.call(b,e)||c(e);for(d=f.length;e=f[--d];n.call(b,e)&&c(e));});d(b,c)},c("json-stringify")||(m=
{"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},x=function(b,c){return("000000"+(c||0)).slice(-b)},u=function(b){for(var c='"',d=0,e;e=b.charAt(d);d++)c+=-1<'\\"\b\f\n\r\t'.indexOf(e)?m[e]:m[e]=" ">e?"\\u00"+x(2,e.charCodeAt(0).toString(16)):e;return c+'"'},r=function(c,k,f,h,m,p,q){var w=k[c],s,B,A,t,v,z,C,E,H;if("object"==typeof w&&w)if(s=g.call(w),"[object Date]"!=s||n.call(w,"toJSON"))"function"==typeof w.toJSON&&("[object Number]"!=s&&"[object String]"!=s&&"[object Array]"!=
s||n.call(w,"toJSON"))&&(w=w.toJSON(c));else if(w>-1/0&&w<1/0){if(y){A=D(w/864E5);for(s=D(A/365.2425)+1970-1;y(s+1,0)<=A;s++);for(B=D((A-y(s,0))/30.42);y(s,B+1)<=A;B++);A=1+A-y(s,B);t=(w%864E5+864E5)%864E5;v=D(t/36E5)%24;z=D(t/6E4)%60;C=D(t/1E3)%60;t%=1E3}else s=w.getUTCFullYear(),B=w.getUTCMonth(),A=w.getUTCDate(),v=w.getUTCHours(),z=w.getUTCMinutes(),C=w.getUTCSeconds(),t=w.getUTCMilliseconds();w=(0>=s||1E4<=s?(0>s?"-":"+")+x(6,0>s?-s:s):x(4,s))+"-"+x(2,B+1)+"-"+x(2,A)+"T"+x(2,v)+":"+x(2,z)+":"+
x(2,C)+"."+x(3,t)+"Z"}else w=e;f&&(w=f.call(k,c,w));if(w===e)return"null";s=g.call(w);if("[object Boolean]"==s)return""+w;if("[object Number]"==s)return w>-1/0&&w<1/0?""+w:"null";if("[object String]"==s)return u(w);if("object"==typeof w){for(c=q.length;c--;)if(q[c]===w)throw TypeError();q.push(w);E=[];k=p;p+=m;if("[object Array]"==s){B=0;for(c=w.length;B<c;H||(H=d),B++)s=r(B,w,f,h,m,p,q),E.push(s===b?"null":s);c=H?m?"[\n"+p+E.join(",\n"+p)+"\n"+k+"]":"["+E.join(",")+"]":"[]"}else l(h||w,function(c){var e=
r(c,w,f,h,m,p,q);e!==b&&E.push(u(c)+":"+(m?" ":"")+e);H||(H=d)}),c=H?m?"{\n"+p+E.join(",\n"+p)+"\n"+k+"}":"{"+E.join(",")+"}":"{}";q.pop();return c}},q.stringify=function(b,c,d){var e,k,f,h,m,l;if("function"==typeof c||"object"==typeof c&&c)if("[object Function]"==g.call(c))k=c;else if("[object Array]"==g.call(c))for(f={},h=0,m=c.length;h<m;l=c[h++],("[object String]"==g.call(l)||"[object Number]"==g.call(l))&&(f[l]=1));if(d)if("[object Number]"==g.call(d)){if(0<(d-=d%1))for(e="",10<d&&(d=10);e.length<
d;e+=" ");}else"[object String]"==g.call(d)&&(e=10>=d.length?d:d.slice(0,10));return r("",(l={},l[""]=b,l),k,f,e,"",[])}),c("json-parse")||(v=String.fromCharCode,f={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"},p=function(){s=h=e;throw SyntaxError();},k=function(){for(var b=h,c=b.length,k,g,m,l,w;s<c;)if(k=b.charAt(s),-1<"\t\r\n ".indexOf(k))s++;else{if(-1<"{}[]:,".indexOf(k))return s++,k;if('"'==k){g="@";for(s++;s<c;)if(k=b.charAt(s)," ">k)p();else if("\\"==k)if(k=b.charAt(++s),-1<
'\\"/btnfr'.indexOf(k))g+=f[k],s++;else if("u"==k){m=++s;for(l=s+4;s<l;s++)k=b.charAt(s),"0"<=k&&"9">=k||"a"<=k&&"f">=k||"A"<=k&&"F">=k||p();g+=v("0x"+b.slice(m,s))}else p();else{if('"'==k)break;g+=k;s++}if('"'==b.charAt(s))return s++,g}else{m=s;"-"==k&&(w=d,k=b.charAt(++s));if("0"<=k&&"9">=k){for("0"==k&&(k=b.charAt(s+1),"0"<=k&&"9">=k)&&p();s<c&&(k=b.charAt(s),"0"<=k&&"9">=k);s++);if("."==b.charAt(s)){for(l=++s;l<c&&(k=b.charAt(l),"0"<=k&&"9">=k);l++);l==s&&p();s=l}k=b.charAt(s);if("e"==k||"E"==
k){k=b.charAt(++s);"+"!=k&&"-"!=k||s++;for(l=s;l<c&&(k=b.charAt(l),"0"<=k&&"9">=k);l++);l==s&&p();s=l}return+b.slice(m,s)}w&&p();if("true"==b.slice(s,s+4))return s+=4,d;if("false"==b.slice(s,s+5))return s+=5,!1;if("null"==b.slice(s,s+4))return s+=4,e}p()}return"$"},w=function(b){var c,e;"$"==b&&p();if("string"==typeof b){if("@"==b.charAt(0))return b.slice(1);if("["==b){for(c=[];;e||(e=d)){b=k();if("]"==b)break;e&&(","==b?(b=k(),"]"==b&&p()):p());","==b&&p();c.push(w(b))}return c}if("{"==b){for(c=
{};;e||(e=d)){b=k();if("}"==b)break;e&&(","==b?(b=k(),"}"==b&&p()):p());","!=b&&"string"==typeof b&&"@"==b.charAt(0)&&":"==k()||p();c[b.slice(1)]=w(k())}return c}p()}return b},B=function(c,d,e){e=A(c,d,e);e===b?delete c[d]:c[d]=e},A=function(b,c,d){var e=b[c],k;if("object"==typeof e&&e)if("[object Array]"==g.call(e))for(k=e.length;k--;)B(e,k,d);else l(e,function(b){B(e,b,d)});return d.call(b,c,e)},q.parse=function(b,c){var d,f;s=0;h=b;d=w(k());"$"!=k()&&p();s=h=e;return c&&"[object Function]"==g.call(c)?
A((f={},f[""]=d,f),"",c):d}));t&&define(function(){return q})}();
a.parser={json:{stringify:function(c){try{return JSON.stringify(c)}catch(b){return a.console.error("a.parser.json.stringify: unable to stringify (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),""}},parse:function(c){try{return JSON.parse(c)}catch(b){return a.console.error("a.parser.json.parse: unable to parse (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null}}},xml:{stringify:function(c){if(!a.isNone(c)&&!a.isNone(c.xml))return c.xml;
if(!a.isNone(window.XMLSerializer))try{return(new window.XMLSerializer).serializeToString(c)}catch(b){a.console.error("a.parser.xml.stringify: unable to stringify (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1)}a.console.error("a.parser.xml.stringify: unable to find any parser available",1);return""},parse:function(c){if(!a.isNone(window.ActiveXObject)){for(var b=null,d=0;4>d;++d)try{b=new ActiveXObject(("MSXML2.DOMDocument."+(6-d)+".0")[d])}catch(e){}b.async=!1;
b.loadXML(c);return 0!=b.parseError.errorCode?(a.console.error("a.parser.xml.parse: unable to parse (value: "+c+", reason"+b.parseError.reason+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null):b}if(!a.isNone(window.DOMParser))return(new DOMParser).parseFromString(c,"text/xml");a.console.error("a.parser.xml.parse: unable to find any parser available",1);return null}}};a.timer=function(){var c={};setInterval(function(){a.message.dispatch("a.timer.tick");for(var b in c){var d=c[b];d.current+=50;d.current>=d.timeout&&(d.current=0,a.isFunction(d.fct)&&d.fct.call(d.scope||this))}},50);return{add:function(b,d,e){var g;for(g=Math.floor(1E6*Math.random());!a.isNone(c[g]);)g=Math.floor(1E6*Math.random());if(!a.isNumber(e)||0>=e)e=1E3,a.console.warn("The timeout has not been setted properly into timer, timeout has been setted to 1000ms",1);c[g]={fct:b,scope:d,timeout:e,
current:0};return g},once:function(b,c,e){var g=this.add(function(){a.isFunction(b)&&b.call(this);a.timer.remove(g)},c,e);return g},get:function(b){b=c[b];return a.isNone(b)?null:b},remove:function(b){return delete c[b]},clear:function(){c={}}}}();a.dom={query:function(c,b){b=b||document;return!b.querySelectorAll&&window.jQuery?this.el(jQuery(c)):this.el(b.querySelectorAll(c))},el:function(c){if(c instanceof a.dom.children)return c;if(window.jQuery&&c instanceof jQuery){for(var b=[],d=c.size();d--;)b.push(c.get(d));c=b}return a.isArray(c)?new this.children(c):new this.children([c])},id:function(c){return this.attr("id",c,document)},cls:function(c,b){return this.attr("class",c,b)},tag:function(c,b){b=a.isObject(b)?b:document;var d=a.isString(c)?
c.replace(/ /g,"").split(","):c,e=[],g=d.length;if(1<g){for(;g--;)for(var n=this.tag(d[g],b).getElements(),l=n.length;l--;)a.contains(e,n[l])||e.push(n[l]);return new a.dom.children(e)}e=b.querySelectorAll?b.querySelectorAll(c):b.getElementsByTagName(c);return new a.dom.children(e)},attr:function(c,b,d){function e(b,c){for(var d=c.length;d--;)a.contains(b,c[d])||b.push(c[d])}if(a.isNone(d)){a.isNone(b)&&(b=document);if(a.isObject(b)&&!a.isArray(b))return this.attr(c,null,b);d=document}if(c&&(a.isArray(c)||
0<=c.indexOf(","))){var g=a.isString(c)?c.replace(/ /g,"").split(","):c,n=g.length;if(1<n){for(var l=[];n--;){var t=this.attr(g[n],b,d),t=t.getElements();e(l,t)}return new a.dom.children(l)}}if(b&&(a.isArray(b)||0<b.indexOf(","))&&(g=a.isString(b)?b.replace(/ /g,"").split(","):b,n=g.length,1<n)){for(l=[];n--;)t=this.attr(c,g[n],d),t=t.getElements(),e(l,t);return new a.dom.children(l)}g=a.isString(b);l=[];c=c.replace(/ /g,"");g&&(b=b.replace(/ /g,""));if("class"==c)l=d.getElementsByClassName(b);else if("id"==
c)l=[d.getElementById(b)],a.isNull(l[0])&&l.pop();else if(d.querySelectorAll)l=d.querySelectorAll(g?"["+c+'="'+b+'"]':"["+c+"]");else for(d=d.getElementsByTagName("*"),n=d.length;n--;){var t=d[n],q=t.getAttribute(c);q&&(g&&q==b||!g)&&(a.contains(l,t)||l.push(t))}return new a.dom.children(l)}};
a.dom.event=new function(){function c(b,c,d){b.addEventListener(c,d,!1)}function b(b,c,d){b.removeEventListener(c,d,!1)}function d(b,c,d){b.attachEvent("on"+c,d)}function e(b,c,d){b.detachEvent("on"+c,d)}function g(b,c,d){b["on"+c]=d}function n(b,c,d){b["on"+c]=null}var l=null,t=null;a.isFunction(window.addEventListener)?(l=c,t=b):a.isFunction(document.attachEvent)?(l=d,t=e):(l=g,t=n);this.bind=l;this.unbind=t};
a.dom.children=function(c){this.elementList=c="undefined"===typeof c.length?[c]:c;this.length=c.length};
a.dom.children.prototype={_perform:function(){var c=[],b=this.elementList,d=Array.prototype.slice.call(arguments),e=d[0],d=d.slice(1),g=d.length,n=b.length;for(d.push(null);n--;){d[g]=b[n];for(var l=e.apply(a.dom,d).getElements(),t=l.length;t--;)a.contains(c,l[t])||c.push(l[t])}this.elementList=c;this.length=c.length;return this},get:function(c){return this.elementList[c]||null},getElements:function(){return this.elementList},id:function(c){return this._perform(a.dom.id,c)},cls:function(c){return this._perform(a.dom.cls,
c)},css:function(c,b){c=c||"";if(0<=c.indexOf("-")){for(var d=c.split("-"),e=1,g=d.length;e<g;++e){var n=d[e];d[e]=n.charAt(0).toUpperCase()+n.slice(1)}c=d.join("")}if(a.isUndefined(b)){d=[];g=this.elementList;for(e=g.length;e--;)n=g[e].style[c],a.isNone(n)||d.push(n);return 1>=d.length?d[0]||"":d}this.each(function(){this.style[c]=b})},addClass:function(c){var b=RegExp("(\\s|^)"+c+"(\\s|$)");this.each(function(){this.classList?this.classList.add(c):this.className.match(b)||(this.className+=" "+c)});
return this},hasClass:function(c){c=RegExp("(\\s|^)"+c+"(\\s|$)");for(var b=this.elementList,d=b.length;d--;)if(!b[d].className.match(c))return!1;return!0},removeClass:function(c){this.each(function(b){this.classList?this.classList.remove(c):(b=RegExp("(\\s|^)"+c+"(\\s|$)"),this.className.match(b)&&this.className.replace(b,""))},this);return this},toggleClass:function(c){this.each(function(b){this.classList?this.classList.toggle(c):(b=RegExp("(\\s|^)"+c+"(\\s|$)"),this.className.match(b)?this.className.replace(b,
""):this.className+=" "+c)},this);return this},bind:function(c,b){var d=a.isString(c)?c.split(" "):c;for(i=d.length;i--;)d[i]&&""!=d[i]&&this.each(function(c){a.dom.event.bind(this,c,b)},d[i].toLowerCase());return this},unbind:function(c,b){var d=a.isString(c)?c.split(" "):c;for(i=d.length;i--;)d[i]&&""!=d[i]&&this.each(function(c){a.dom.event.unbind(this,c,b)},d[i].toLowerCase());return this},tag:function(c){return this._perform(a.dom.tag,c)},attr:function(c,b){return this._perform(a.dom.attr,c,
b)},attribute:function(c,b){var d=a.isString(c)?c.replace(/ /g,"").split(","):c;if(a.isUndefined(b)){for(var e=[],g=this.elementList,n=g.length;n--;)for(var l=0,t=d.length;l<t;++l)try{var q=g[n].getAttribute(d[l]);a.isNone(q)||a.contains(e,q)||e.push(q)}catch(m){}return 2>e.length?e.join(""):e}this.each(function(){for(var c=0,e=d.length;c<e;++c)try{this.setAttribute(d[c],b)}catch(g){}});return this},data:function(c,b){return this.attribute("data-"+c,b)},appstorm:function(c,b){return this.attribute("data-"+
c+",a-"+c+","+c,b)},parent:function(){for(var c=this.elementList,b=[],d=c.length;d--;){var e=c[d].parentNode;a.contains(b,e)||b.push(e)}this.elementList=b;return this},children:function(){for(var c=this.elementList,b=[],d=c.length;d--;)b.push(a.toArray(c[d].childNodes));c=a.uniq(a.flatten(b));for(b=c.length;b--;)3==c[b].nodeType&&c.splice(b,1);this.elementList=c;return this},insertBefore:function(c){var b=a.dom.el(c).getElements();this.each(function(){for(var c=0,e=b.length;c<e;++c)this.parentNode.insertBefore(b[c],
this)});return this},insertAfter:function(c){var b=a.dom.el(c).getElements();this.each(function(){for(var c=0,e=b.length;c<e;++c)this.parentNode.insertBefore(b[c],this.nextSibling)});return this},empty:function(){this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)});return this},remove:function(c){var b=a.dom.el(c).getElements();this.each(function(){try{for(var c=0,e=b.length;c<e;++c)this.removeChild(b[c])}catch(g){}});return this},append:function(c){var b=a.dom.el(c).getElements();
this.each(function(){for(var c=0,e=b.length;c<e;++c)this.appendChild(b[c])});return this},replace:function(c){this.empty();return this.append(c)},each:function(){for(var c=this.elementList,b=Array.prototype.slice.call(arguments),d=b[0],b=b.slice(1),d=a.isFunction(d)?d:function(){},e=0,g=c.length;e<g;++e)d.apply(c[e],b);return this}};a.ajax=function(c,b,d){var e=a.getDefaultAjaxOptions();this.params={url:"",method:"GET",type:"raw",async:!0,cache:!1,data:{},header:{}};for(var g in this.params)"data"!==g&&"header"!==g&&(g in e&&typeof e[g]===typeof this.params[g]&&(this.params[g]=e[g]),g in c&&typeof c[g]===typeof this.params[g]&&(this.params[g]=c[g]));if(a.isObject(e.data))for(var n in e.data)this.params.data[n]=e.data[n];if(a.isObject(e.header))for(var l in e.header)this.params.header[l]=e.header[l];if(a.isString(c.data))this.params.data=
c.data;else if(a.isObject(c.data))for(var t in c.data)this.params.data[t]=c.data[t];if(a.isObject(c.header))for(var q in c.header)this.params.header[q]=c.header[q];this.success=a.isFunction(b)?b:function(){};this.error=a.isFunction(d)?d:function(){};this.request=null;if(a.isNone(window.XMLHttpRequest)){c=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var m in c)try{this.request=new ActiveXObject(c[m])}catch(x){}}else this.request=new XMLHttpRequest};
a.ajax.prototype.parseResult=function(c,b){if(204===b.status)return"";var d=c.type.toLowerCase();return"json"===d?a.parser.json.parse(b.responseText):"xml"===d?b.responseXML:b.responseText};a.ajax.prototype.abort=function(){try{this.request.abort()}catch(c){}};
a.ajax.prototype.send=function(){var c=this.params.method.toUpperCase();if(!1===this.params.cache){var b=Math.floor(1E5*Math.random())+1;try{this.params.data.cachedisable=b}catch(d){}}b="";if(a.isString(this.params.data))b=this.params.data;else{for(var e in this.params.data)b+=encodeURIComponent(e)+"="+encodeURIComponent(this.params.data[e])+"&";b=b.slice(0,-1)}var g=this.params.url;e=this.params.async;"GET"===c&&""!==b&&(g+="?"+b);if(!0===e){var n={success:this.success,params:this.params,error:this.error,
request:this.request,parseResult:this.parseResult};this.request.onreadystatechange=function(){if(4===n.request.readyState){var b=200<=n.request.status&&400>n.request.status;b?n.success(n.parseResult(n.params,n.request),n.request.status):n.error(g,n.request.status);a.message.dispatch("a.ajax",{success:b,status:n.request.status,url:n.params.url,method:n.method,params:n.params})}}}this.request.open(c,g,e);var l=["Content-Type","Content-type","content-type"],t=!1,q;for(q in this.params.header)this.request.setRequestHeader(q,
this.params.header[q]),!t&&a.contains(l,q)&&(t=!0);t||"POST"!==c||this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.request.send(b);return!1===e?this.parseResult(this.params,this.request):"No return in async mode"};a.loader=function(){function c(b,c){if(a.isNone(b))return!1;for(var d=0,g=e.length;d<g;++d)if(e[d]===b)return a.isFunction(c)&&c(),!0;return!1}function b(b,c,d,m,n,u){for(var r in c)b.setAttribute(r,c[r]);!a.isNone(n)&&n.id&&b.setAttribute("id",n.id);var v=!1,f=function(c){v||(v=!0,a.isFunction(d)&&d(b),(a.isNone(n)||!1!==n.cache)&&e.push(m))};b.addEventListener?b.addEventListener("load",f,!1):b.readyState?b.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||f()}:
b.onload=f;if("text/css"===c.type){var p=document.styleSheets.length;g++;var k=a.timer.add(function(){document.styleSheets.length>p+g-1&&(g--,a.timer.remove(k),f())},null,50)}document.getElementsByTagName("head")[0].appendChild(b)}function d(b,c,d,g){var x={url:b,method:"GET",type:"raw",async:!0,cache:!0,data:{},header:{}};a.console.log("a.loader: load resource (url: "+b+")",3);a.isNone(d)||(a.contains(n,d.method)&&(x.method=d.method),a.isNone(d.type)||"json"!==d.type&&"xml"!==d.type||(x.type=d.type),
a.isObject(d.data)&&(x.data=d.data),a.isObject(d.header)&&(x.header=d.header),a.isBoolean(d.cache)&&(x.cache=d.cache));g=a.isFunction(g)?g:function(){};(new a.ajax(x,function(g,m){a.isFunction(c)&&c(g,m);(a.isNone(d)||!1!==d.cache)&&e.push(b)},g)).send()}var e=[],g=0,n="GET POST PUT DELETE HEAD OPTIONS".split(" ");return{js:function(b,d,e,g){c(b,d)||this.jsonp(b,d,e,g)},jsonp:function(c,d,e,g){var n=a.isObject(e)&&e.type?e.type:"text/javascript";a.console.log("a.loader: load resource (url: "+c+")",
3);b(document.createElement("script"),{type:n,src:c},d,c,e,g)},json:function(b,c,e,g){a.isObject(e)||(e={});e.type="json";a.isObject(e.header)||(e.header={});e.header.accept="application/json, text/javascript";d(b,c,e,g)},xml:function(b,c,e,g){a.isObject(e)||(e={});e.type="xml";a.isObject(e.header)||(e.header={});e.header.accept="application/xml, text/xml";d(b,c,e,g)},css:function(d,e,g,m){c(d,e)||(a.console.log("a.loader: load resource (url: "+d+")",3),b(document.createElement("link"),{rel:"stylesheet",
type:"text/css",href:d},e,d,g,m))},html:function(b,e,g,m){c(b,e)||(a.isObject(g)||(g={}),g.type="raw",!0===a.environment.get("debug")&&(g.cache=!1),a.isObject(g.header)||(g.header={}),g.header.accept="text/html",d(b,e,g,m))},javafx:function(b,d,e,g){if(a.isNone(e)||a.isNone(e.code)||a.isNone(e.id))a.console.warn("a.loader.javafx : the system need args.code and args.name setted to be able to load any javafx resource... This uri will not be loaded : "+b,3);else if(!c(b,d)){this.js("http://dl.javafx.com/"+
(e.version?e.version:"1.3")+"/dtfx.js",function(){javafx({archive:b,width:e.width||1,height:e.height||1,code:e.code,name:e.id})});var n=null,u=2E3,n=a.timer.add(function(){0<u--&&!a.isNone(document.getElementById(e.id).Packages)?(a.timer.remove(n),a.isFunction(d)&&d()):0>=u&&a.isFunction(g)&&g(b,408)},null,200)}},flash:function(b,d,e,g){a.isNone(e)||a.isNone(e.rootId)||a.isNone(e.id)?a.console.warn("a.loader.flash : the system need args parameters : rootId, id, setted to be able to load any flash resource... This uri will not be loaded : "+
b,3):c(b,d)||this.js(a.url+"vendor/storage/flash/swfobject.js",function(){swfobject.embedSWF(b,e.rootId,"100%","100%","10.0.0",a.url+"vendor/storage/flash/expressInstall.swf",e.flashvars,e.params,{id:e.id},function(c){!1===c.success&&a.isFunction(g)?g(b,408):!0===c.success&&a.isFunction(d)&&setTimeout(d,500)})})},silverlight:function(b,d,e,g){if(a.isNone(e)||a.isNone(e.rootId)||a.isNone(e.id))a.console.warn("a.loader.silverlight : the system need args parameters : rootId, id, setted to be able to load any silverlight resource... This uri will not be loaded : "+
b,3);else if(!c(b,d)){a.console.log("a.loader: load resource (url: "+b+")",3);var n=document.createElement("object");n.id=e.id;n.data="data:application/x-silverlight-2,";n.type="application/x-silverlight-2";a.isArray(e.params)||(e.params=[]);e.params.push({name:"source",value:b});for(var u=0,r=e.params.length;u<r;++u){var v=document.createElement("param");v.name=e.params[u].name;v.value=e.params[u].value;n.appendChild(v)}document.getElementById(e.rootId).appendChild(n);var f=null,p=2E3,f=a.timer.add(function(){0<
p--&&!a.isNone(document.getElementById(e.id).Content)?(a.timer.remove(f),d()):0>=p&&a.isFunction(g)&&g(b,408)},null,200)}},trace:function(){return e}}}();a.keyboard=function(c){return a.isNone(c)?(a.console.error("a.keyboard.global: error, Mousetrap is undefined, the plugin a.keyboard will not work",1),{addListener:function(){},removeListener:function(){},reset:function(){},clear:function(){}}):{addListener:function(b,d){a.console.log("a.keyboard.addListener: bind key: "+b,3);c.bind(b,d)},removeListener:function(b){a.console.log("a.keyboard.removeLister: remove listener on key: "+b,3);c.unbind(b)},reset:function(){a.console.log("a.keyboard.reset: clear all keys",
3);c.reset()},clear:function(){a.console.log("a.keyboard.clear: clear all keys",3);c.reset()}}}(window.Mousetrap);a.callback={};
a.callback.synchronizer=function(){function c(){t--;0>=t&&!1===u?(x=!1,v.prototype.dispatch("a.callback.synchronizer.success",{}),q(r)):0>=t&&(x=u=!1)}function b(){!0===x&&(u=!0,x=!1,v.prototype.dispatch("a.callback.synchronizer.error",{}),m.apply(this,arguments))}function d(b,c){r[b]=c}function e(b){a.isObject(b)&&(r=b)}function g(b){return a.isNone(r[b])?null:r[b]}function n(){return r}var l=[],t=0,q=function(){return!0},m=function(){return!0},x=!1,u=!1,r={},v=function(){};v.prototype=new a.eventEmitter;
v.prototype.constructor=this;v.prototype.setSuccess=function(b){q=a.isFunction(b)?b:q};v.prototype.setDone=v.prototype.setSuccess;v.prototype.setFail=function(b){m=a.isFunction(b)?b:m};v.prototype.setError=v.prototype.setFail;v.prototype.addCallback=function(){for(var f=[],f=!a.isNone(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,k=0,m=f.length;k<m;++k){var A=f[k];a.isFunction(A)&&(t++,l.push(A),!0===x&&A({success:c,done:c,getData:g,getFullData:n,setData:d,setFullData:e,fail:b,error:b}))}!0===
x&&a.console.warn("a.callback.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",1)};v.prototype.removeCallback=function(b){for(var c=l.length-1;0<=c;--c)l[c]===b&&(!0===x&&a.console.warn("a.callback.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1),t--,l.splice(c,1))};v.prototype.start=function(f,k){if(0>=t)c();else{x=!0;r={};for(var m=0,A=l.length;m<A;++m)l[m]({success:c,done:c,getData:g,getFullData:n,setData:d,
setFullData:e,fail:b,error:b},k);a.isNumber(f)&&0<f?setTimeout(function(){var c=parseInt(f,10);v.prototype.dispatch("a.callback.synchronizer.error",{timeout:c});b({timeout:c})},f):v.prototype.dispatch("a.callback.synchronizer.start",{timeout:-1})}};v.prototype.isRunning=function(){return x};var f=new v;f.setName("a.callback.synchronizer");return f};
a.callback.chainer=function(){function c(){0==m.length?(m=[],t(x),u.prototype.dispatch("a.callback.chainer.success",{})):u.prototype.start(arguments)}function b(){m=[];q.apply(this,arguments);u.prototype.dispatch("a.callback.chainer.error",{})}function d(b,c){x[b]=c}function e(b){a.isObject(b)&&(x=b)}function g(b){return a.isNone(x[b])?null:x[b]}function n(){return x}var l=[],t=function(){return!0},q=function(){return!0},m=[],x={},u=function(){};u.prototype=new a.eventEmitter;u.prototype.constructor=
this;u.prototype.setSuccess=function(b){t=a.isFunction(b)?b:t};u.prototype.setDone=u.prototype.setSuccess;u.prototype.setFail=function(b){q=a.isFunction(b)?b:q};u.prototype.setError=u.prototype.setFail;u.prototype.addCallback=function(){for(var b=[],b=!a.isNone(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,c=0,d=b.length;c<d;++c){var e=b[c];a.isFunction(e)&&(l.push(e),!0===u.prototype.isRunning()&&m.push(e))}!0===u.prototype.isRunning()&&a.console.warn("a.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",
1)};u.prototype.removeCallback=function(b){for(var c=l.length-1;0<=c;--c)if(l[c]===b){if(!0===u.prototype.isRunning()){for(var d=m.length-1;0<=d;--d)m[d]===b&&m.splice(d,1);a.console.warn("a.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1)}l.splice(c,1)}};u.prototype.start=function(){if(0==m.length){for(var r=0,f=l.length;r<f;++r)m.push(l[r]);u.prototype.dispatch("a.callback.chainer.start",{});x={};0==m.length&&c()}r=m.shift();a.isFunction(r)&&r({success:c,
done:c,getData:g,getFullData:n,setData:d,setFullData:e,fail:b,error:b},arguments)};u.prototype.isRunning=function(){return 0==m.length?!1:!0};var r=new u;r.setName("a.callback.chainer");return r};a.storage={__printGetItem:function(c,b,d){"__test_support"!==b&&a.console.log("a.storage.type."+c+".getItem: get element (key: "+b+", value: "+d+")",3)},__printGetErrorItem:function(c,b){"__test_support"!==b&&a.console.log("a.storage.type."+c+".getItem: unable to find key ("+b+") in store",2)},__printSetItem:function(c,b,d){"__test_support"!==b&&a.console.log("a.storage.type."+c+".setItem: add element (key: "+b+", value: "+d+")",3)},__printRemoveItem:function(c,b){"__test_support"!==b&&a.console.log("a.storage.type."+
c+".removeItem: remove element (key: "+b+")",3)},type:{}};
a.storage.type.cookie=function(){var c=!1,b={support:!1,engine:"cookie",setItem:function(b,c,g){var n="";a.storage.__printSetItem("cookie",b,c);g&&(n=new Date,n.setTime(n.getTime()+864E5*g),n="; expires="+n.toGMTString());document.cookie=b+"="+escape(a.parser.json.stringify(c))+n+"; path=/"},getItem:function(b){if(0<document.cookie.length){var c=document.cookie.indexOf(b+"=");if(-1!=c){var c=c+b.length+1,g=document.cookie.indexOf(";",c);-1==g&&(g=document.cookie.length);c=a.parser.json.parse(unescape(document.cookie.substring(c,
g)));a.storage.__printGetItem("cookie",b,c);return c}}a.storage.__printGetErrorItem("cookie",b);return null},removeItem:function(b){a.storage.__printRemoveItem("cookie",b);this.setItem(b,"",-1);c&&a.message.dispatch("a.storage.remove",{key:b})}};b.setItem("__test_support","ok");"ok"===b.getItem("__test_support")&&(b.removeItem("__test_support"),b.support=!0);c=!0;return b}();a.storage.cookie=a.storage.type.cookie;
a.storage.type.localStorage=function(){var c=!1;"localStorage"in window&&null!==window.localStorage&&(window.localStorage.setItem("__test_support","o"),"o"===window.localStorage.getItem("__test_support")&&(window.localStorage.removeItem("__test_support"),c=!0));return{support:c,engine:"localStorage",getItem:function(b){if(c){var d=window.localStorage.getItem(b);if(a.isNone(d))return a.storage.__printGetErrorItem("localStorage",b),null;d=a.parser.json.parse(d);a.storage.__printGetItem("localStorage",
b,d);return d}return null},setItem:function(b,d){c&&(a.storage.__printSetItem("localStorage",b,d),window.localStorage.setItem(b,a.parser.json.stringify(d)),a.message.dispatch("a.storage.add",{key:b,value:d}))},removeItem:function(b){c&&(a.storage.__printRemoveItem("localStorage",b),window.localStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.globalStorage=function(){var c=!1,b=window.location.hostname;a.isNone(window.globalStorage)||(window.globalStorage[b].setItem("__test_support","ok"),"ok"==window.globalStorage[b].getItem("__test_support")&&(window.globalStorage[b].removeItem("__test_support"),c=!0));return{support:c,engine:"globalStorage",getItem:function(d){if(c){var e=window.globalStorage[b].getItem(d);if(a.isObject(e)&&!a.isNone(e.value))return e=a.parser.json.parse(e.value),a.storage.__printGetItem("globalStorage",
d,e),e;if(a.isNone(e))a.storage.__printGetErrorItem("globalStorage",d);else return e=a.parser.json.parse(e),a.storage.__printGetItem("globalStorage",d,e),e}return null},setItem:function(d,e){c&&(a.storage.__printSetItem("globalStorage",d,e),window.globalStorage[b].setItem(d,a.parser.json.stringify(e)),a.message.dispatch("a.storage.add",{key:d,value:e}))},removeItem:function(d){c&&(a.storage.__printRemoveItem("globalStorage",d),window.globalStorage[b].removeItem(d),a.message.dispatch("a.storage.remove",
{key:d}))}}}();
a.storage.type.memory=function(){var c={};return{support:!0,engine:"memory",getItem:function(b){var d=c[b];if(!a.isNone(d))return a.storage.__printGetItem("memory",b,d),a.console.log("a.storage.memory.getItem: found item (key: "+b+", value: "+d+")",3),d;a.storage.__printGetErrorItem("memory",b);return null},setItem:function(b,d){c[b]=d;a.storage.__printSetItem("memory",b,d);a.message.dispatch("a.storage.add",{key:b,value:d})},removeItem:function(b){a.storage.__printRemoveItem("memory",b);a.isNone(c[b])||
(delete c[b],a.message.dispatch("a.storage.remove",{key:b}))}}}();a.storage.memory=a.storage.type.memory;
a.storage.type.sessionStorage=function(){var c=!1;"sessionStorage"in window&&!a.isNone(window.sessionStorage)&&(window.sessionStorage.setItem("__test_support","o"),"o"===window.sessionStorage.getItem("__test_support")&&(window.sessionStorage.removeItem("__test_support"),c=!0));return{support:c,engine:"sessionStorage",getItem:function(b){if(c){var d=window.sessionStorage.getItem(b);if(a.isNone(d))return a.storage.__printGetErrorItem("sessionStorage",b),null;d=a.parser.json.parse(d);a.storage.__printGetItem("sessionStorage",
b,d);return d}return null},setItem:function(b,d){c&&(a.storage.__printSetItem("sessionStorage",b,d),window.sessionStorage.setItem(b,a.parser.json.stringify(d)),a.message.dispatch("a.storage.add",{key:b,value:d}))},removeItem:function(b){c&&(a.storage.__printRemoveItem("sessionStorage",b),window.sessionStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.userData=function(){var c=!1;if(document.all)try{document.write('<input type="hidden" id="a_storage" style="display:none;behavior:url(\'#default#userData\')" />');var b=document.getElementById("a_storage");b.load("aUserDataStorage");b.setAttribute("__test_support","ok");b.save("aUserDataStorage");"ok"===b.getAttribute("__test_support")&&(b.removeAttribute("__test_support"),b.save("aUserDataStorage"),c=!0)}catch(d){c=!1}return{support:c,engine:"userData",getItem:function(d){if(c){var g=
a.parser.json.parse(b.getAttribute(d));if(a.isNone(g))return a.storage.__printGetErrorItem("userData",d),null;a.storage.__printGetItem("userData",d,g);return g}return null},setItem:function(d,g){c&&(a.storage.__printSetItem("userData",d,g),b.setAttribute(d,a.parser.json.stringify(g)),b.save("aUserDataStorage"),a.message.dispatch("a.storage.add",{key:d,value:g}))},removeItem:function(d){c&&(a.storage.__printRemoveItem("userData",d),b.removeAttribute(d),b.save("aUserDataStorage"),a.message.dispatch("a.storage.remove",
{key:d}))}}}();
a.storage.type.flash=function(){function c(c){if(!1===b&&!1===d){var n=document.createElement("div");n.id="flashstoragecontent";document.body.appendChild(n);var l={id:e,rootId:n.id,flashvars:{},params:{wmode:"transparent",menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always"}};a.loader.flash(a.url+"vendor/storage/flash/localStorage.swf",function(e){d=!0;e=document.getElementById(l.id);!0===e.testData()&&(b=!0,e.setDatabase("a_flashStorage"));!0===b&&a.isFunction(c)&&c(b)},
l)}else!0===b&&a.isFunction(c)&&c(b)}var b=!1,d=!1,e="flashstorage";return{support:function(){return b},ready:function(){return d},engine:"flash",start:function(b){c(b)},getItem:function(c){this.start();if(!0===b){var d=document.getElementById(e).getData(c);if(a.isNone(d))return a.storage.__printGetErrorItem("flash",c),null;a.storage.__printGetItem("flash",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("flash",c,d),document.getElementById(e).setData(c,
d))},removeItem:function(c){this.start();if(!0===b)return a.storage.__printRemoveItem("flash",c),document.getElementById(e).removeData(c)}}}();
a.storage.type.silverlight=function(){function c(c){if(!1===b&&!1===d){var n=document.createElement("div");n.id="__silverlightstorage";document.body.appendChild(n);var l={id:e,rootId:n.id,params:[{name:"minRuntimeVersion",value:"2.0.31005.0"},{name:"autoUpgrade",value:"true"}]};a.loader.silverlight(a.url+"vendor/storage/silverlight/silverlightStorage.xap",function(e){d=!0;!0===document.getElementById(l.id).Content.store.testData()&&(b=!0);!0===b&&a.isFunction(c)&&c(b)},l)}else!0===b&&a.isFunction(c)&&
c(b)}var b=!1,d=!1,e="silverlightstorage";return{support:function(){return b},ready:function(){return d},engine:"silverlight",start:function(b){c(b)},getItem:function(c){this.start();if(!0===b){var d=document.getElementById(e).Content.store.loadData(c);if(a.isNone(d)||"false"===d)return a.storage.__printGetErrorItem("silverlight",c),null;d=a.parser.json.parse(d);a.storage.__printGetItem("silverlight",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("silverlight",
c,d),document.getElementById(e).Content.store.saveData(c,a.parser.json.stringify(d)))},removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("silverlight",c),document.getElementById(e).Content.store.removeData(c))}}}();
a.storage.type.javafx=function(){function c(c){!1===b&&!1===d?a.loader.javafx(a.url+"vendor/storage/javafx/JavaFXStorage.jar",function(){d=!0;!0===document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.testData()&&(b=!0,el.setDatabase("a_javafxStorage"));!0===b&&a.isFunction(c)&&c(b)},{code:"javafxstorage.Main",id:"javafxstorage"}):!0===b&&a.isFunction(c)&&c(b)}var b=!1,d=!1;return{support:function(){return b},ready:function(){return d},engine:"javafx",start:function(b){c(b)},
getItem:function(c){this.start();if(!0===b){var d=document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.loadData(c);if(a.isNone(d)||"false"===d)return a.storage.__printGetErrorItem("javafx",c),null;d=a.parser.json.parse(d);a.storage.__printGetItem("javafx",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("javafx",c,d),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.saveData(c,a.parser.json.stringify(d)))},
removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("javafx",c),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.removeData(c))}}}();a.storage.temporary=function(){for(var c=["sessionStorage","cookie","memory"],b=0,d=c.length;b<d;++b){var e=c[b];if(a.storage.type[e].support)return a.console.log("a.storage.temporary: choosing storage "+a.storage.type[e].engine,3),a.message.dispatch("a.storage.temporary.change",{engine:e}),a.storage.type[e]}return null}();
a.storage.external=function(){function c(b,c){a.storage.external.ready=b.ready;a.storage.external.support=b.support;a.storage.external.engine=b.engine;a.storage.external.getItem=b.getItem;a.storage.external.setItem=b.setItem;a.storage.external.removeItem=b.removeItem;a.isFunction(c)&&c()}return{start:function(b){var d=a.storage.type.silverlight,e=a.storage.type.flash,g=a.storage.type.javafx;d.start(function(n){n?(a.console.log("a.storage.external: choosing storage silverlight",3),c(d,b)):e.start(function(d){d?
(a.console.log("a.storage.external: choosing storage flash",3),c(e,b)):g.start(function(d){d?(a.console.log("a.storage.external: choosing storage javafx",3),c(g,b)):a.console.warn("a.storage.external: choosing storage NONE AVAILABLE",3)})})})}}}();
a.storage.persistent=function(){for(var c=["localStorage","globalStorage","userData","cookie"],b=0,d=c.length;b<d;++b){var e=c[b];if(a.storage.type[e].support)return a.console.log("a.storage.persistent: choosing storage "+a.storage.type[e].engine,3),a.message.dispatch("a.storage.persistent.change",{engine:e}),a.storage.type[e]}return null}();
null==a.storage.persistent&&(a.storage.persistent={},a.storage.persistent.support=!1,a.storage.persistent.engine=function(){return"none"},a.storage.persistent.getItem=function(){return null},a.storage.persistent.setItem=function(){},a.storage.persistent.removeItem=function(){});a.storage.support=a.storage.persistent.support;a.storage.engine=a.storage.persistent.engine;a.storage.getItem=a.storage.persistent.getItem;a.storage.setItem=a.storage.persistent.setItem;a.storage.removeItem=a.storage.persistent.removeItem;a.language=function(){function c(b,c){if(a.isNone(t[b]))return null;var d=t[b][c];if(a.isNone(d))a.console.info("a.language.__getRawTranslate: unable to find hash in dictionnary (value: "+c+", language: "+b+")",3);else return d;return null}function b(b){b=""+b;0>b.indexOf("{{")&&(b="{{"+b+"}}");b=b.replace("{{","\\{\\{");return b=b.replace("}}","\\}\\}")}function d(d,e){var f=c(n,d);if(!a.isNone(f)){var g=f;if(a.isArray(e))for(var m=0,s=e.length;m<s;++m)var h=b(m+1),h=RegExp(h,"gi"),g=g.replace(h,
e[m]);else for(m in e)h=b(m),h=RegExp(h,"gi"),g=g.replace(h,e[m]);if(0<=g.indexOf("{{")&&0<=g.indexOf("}}"))for(f=f.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],m=0,s=f.length;m<s;++m){var h=b(f[m]),l=f[m].replace("{{","").replace("}}",""),l=a.isNone(u[l])?null:u[l];a.isNone(l)||(h=RegExp(h,"gi"),g=g.replace(h,l))}return g=g.replace(/\{\{[a-z\-_0-9]+\}\}/gi,"")}return d}function e(b,c){a.isString(c)||(c=m);try{return b.getAttribute(c)}catch(d){return null}}function g(b){a.isNone(b)&&(b=document);var k=[];
a.isNone(e(b))||k.push(b);var f=[];b.querySelectorAll?(f=b.querySelectorAll("*["+m+"]"),0===f.length&&(f=b.querySelectorAll("*"))):f=b.getElementsByTagName("*");b=0;for(var g=f.length;b<g;++b)a.isNone(e(f[b]))||k.push(f[b]);f=0;for(b=k.length;f<b;++f){var l=k[f],g=e(l);if(!a.isNone(g)){var s=c(n,g),h={};a.isNone(s)&&(s=g);for(var s=s.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],r=0,t=s.length;r<t;++r){var v=s[r].replace("{{","").replace("}}",""),y=e(l,m+"-"+v);a.isNone(y)?(y="undefined"===u[v]?null:u[v],a.isNone(y)||
(h[v]=y)):h[v]=y}s=d(g,h);g=e(l,x);if(!a.isNone(g))try{l[g]=s}catch(E){}else if(l)if("INPUT"!==l.nodeName||"submit"!==l.type&&"reset"!==l.type)if("INPUT"===l.nodeName)try{l.placeholder=s}catch(J){}else if("FIELDSET"===l.nodeName)l.title=s;else if(!a.isNone(l.text)&&document.all)l.text=s;else if(a.isNone(l.childNodes))l.innerHTML=s;else if(g=l.childNodes.length,h=document.createTextNode(s),"leave"===q){for(s=!1;g--;)r=l.childNodes[g],3===r.nodeType&&(s||(l.insertBefore(h,r),s=!0),l.removeChild(r));
s||l.appendChild(h)}else{for(;g--;)l.removeChild(l.firstChild);l.appendChild(h)}else l.value=s}}}var n="en",l=["en","fr","de","sp"],t={},q="leave",m="data-tr",x="data-tr-attr",u={},r=!a.isNone(a.storage)&&!0===a.storage.persistent.support;if(r){var v=a.storage.persistent.getItem("a_language_store_language"),f=a.storage.persistent.getItem("a_language_store_allowed");a.isString(v)&&(n=v,g(document));a.isArray(f)&&(l=f)}return{setBehavior:function(b){q="erase"===b?"erase":"leave"},getBehavior:function(){return q},
getCurrent:function(){return n},setCurrent:function(b,c){!a.isString(b)||0>=b.length?a.console.error("a.language.setCurrent: setting a non-string lang, or empty string, as default language: "+b,1):(a.isNone(c)&&(c=!0),a.contains(l,b)||a.console.warn("a.language.setCurrent: unable to find language in available language list (value: "+b+", available: "+l.join(";")+")",2),n=b,a.isNone(t[n])&&(t[n]={}),a.console.log("a.language.setCurrent: set current language to "+n+", request update ? "+c,3),a.message.dispatch("a.language.change",
{value:n}),r&&a.storage.persistent.setItem("a_language_store_language",n),this.translate(document,c))},getAllowed:function(){return l},setAllowed:function(b){a.isString(b)&&(b=[b]);if(a.isArray(b)){l=b;var c=0;for(b=b.length;c<b;++c)a.isNone(t[c])&&(t[c]={});r&&(a.console.log("a.language.setAllowed: set allowed language to "+l,3),a.storage.persistent.setItem("a_language_store_allowed",l))}else a.console.error("a.language.setAllowed: the allowed language must be an Array (value: "+b+")",1)},getSingleTranslation:function(b,
c){return d(b,c)},addSingleTranslation:function(b,c,d,e){a.isNone(t[b])&&(a.console.warn("a.language.addSingleTranslation: be carefull, the language you submit does not seems to exist in dict (value: "+b+", dict: "+l.join(";")+")",1),t[b]={});t[b][c]=d;this.translate(document,e)},addTranslation:function(b,c,d){a.isNone(t[b])&&(t[b]={});for(var e in c)t[b][e]=c[e];this.translate(document,d)},getTranslation:function(b){return a.isString(b)?t[b]:t},translate:function(b,c){!1!==c&&g(b)},addVariable:function(b,
c){a.console.log("a.language.addVariable: add global variable (key: "+b+", value: "+c+")",3);u[b]=c},getVariable:function(b){return"undefined"===u[b]?null:u[b]},removeVariable:function(b){a.console.log("a.language.removeVariable: remove global variable (key: "+b+")",3);delete u[b]},clear:function(){t={}}}}();a.form=function(){function c(b,c){return a.isNone(b.getAttribute)?null:b.getAttribute(c)}function b(b){for(var c=[],d=b.length;d--;)c.push(b[d]);return c}function d(b){var d=c(b,"name");if(a.isNone(d)||""===d)if(d=c(b,"id"),a.isNone(d)||""===d)d=c(b,"class");return d}function e(d){var e=d.getElementsByTagName("input"),g=d.getElementsByTagName("textarea");d=d.getElementsByTagName("select");for(var e=b(e),l=e.length;l--;){var n=c(e[l],"type");a.contains(q,n)||a.isNone(n)||e.splice(l,1)}return e.concat(b(g),
b(d))}function g(b,d,e,g){var l="";a.isNone(e)||""===e||(l=c(b,"data-error-"+e));if(a.isNone(l)||""===l)l=c(b,"data-error");(a.isNone(l)||""===l)&&a.console.warn("A data-error tag has not been setted for "+d+" with value "+g+", can't proceed error show",3);a.isNone(a.language)||(l=a.language.getSingleTranslation(l,{name:e,value:g}));return{el:b,id:d,error:l}}var n="text search url tel email password".split(" "),l="number range date datetime datetime-local month time week".split(" "),t=n.concat(l,
["number","checkbox","radio","file"]),q=l.concat(n,["color","checkbox","file","hidden","radio"]);return{skipNoValidate:!1,get:function(b){b=e(b);for(var g={},l=b.length;l--;){var n=b[l],q=d(n),f;f=n;var p=c(f,"type"),k=f.tagName.toLowerCase();f="input"===k||"textarea"===k?"checkbox"===p?f.checked:f.value:"select"===k?f.options[f.selectedIndex].value:void 0;null!==q&&""!==q&&(a.isNone(n)||"radio"!==c(n,"type")?g[q]=""===f?null:f:n.checked&&(g[q]=""===f?null:f))}a.console.log("a.form.get: found element list:",
3);a.console.log(g,3);return g},validate:function(b){if(!a.isNone(c(b,"novalidate"))&&!1===this.skipNoValidate)return[];b=e(b);for(var q=[],u="number range text search url email password color checkbox hidden radio".split(" "),r=RegExp("^[a-z]{2,}:\\/\\/([a-z0-9\\/\\.\\-_~+;:&=]{2,})$","gi"),v=RegExp("^.{2,}@.*\\.[a-z0-9]{2,}$","gi"),f=RegExp("^#([a-f]{3}|[a-f]{6})$","gi"),p=b.length;p--;){var k=b[p],w=k.tagName.toLowerCase();if("select"!==w&&a.isNone(c(k,"formnovalidate"))){var A=c(k,"type"),B=d(k),
s=k.value,h=c(k,"required"),z=c(k,"pattern");c(k,"multiple");var D=c(k,"min"),C=c(k,"max"),y=c(k,"step"),D=a.isNone(D)||""===D?null:parseFloat(D),C=a.isNone(C)||""===C?null:parseFloat(C),y=a.isNone(y)||""===y?null:parseFloat(y);"input"!==w||a.contains(u,A)||a.isNone(A)?"number"!==A&&"range"!==A||a.isNumber(s)?"url"!==A||r.test(s)?"email"!==A||v.test(s)?"color"!==A||f.test(s)?null!==h&&a.contains(t,A)&&(""===s||a.isNone(s))?q.push(g(k,B,"required",s)):null===z||"textarea"!==w&&!a.contains(n,A)&&!a.isNone(A)||
RegExp(z).test(s)?null===D&&null==C&&null==y||!a.contains(l,A)||(w=parseFloat(s),null!==D&&w<D?q.push(g(k,B,"min",s)):null!==C&&w>C?q.push(g(k,B,"max",s)):null!==y&&0!==w%y&&q.push(g(k,B,"step",s))):q.push(g(k,B,"pattern",s)):q.push(g(k,B,null,s)):q.push(g(k,B,null,s)):q.push(g(k,B,null,s)):q.push(g(k,B,null,s)):a.console.warn("Type "+A+" for input "+B+" not recognized or not supported",3)}}a.console.log("a.form.validate: found error list:",3);a.console.log(q,3);return q},validateAndGet:function(b){b=
{errorList:this.validate(b),error:!1,contentList:this.get(b)};0<b.errorList.length&&(b.error=!0);return b}}}();a.state=function(){function c(b){return a.isArray(b)?b.reverse():a.isString(b)?[b]:[]}function b(){for(var b=f;f===b||0>=f;)f=Math.floor(1E5*Math.random());return f}function d(b,c){var d=[],e=b.length;c=a.isFunction(c)?c:function(){return!0};for(var f=0;f<e;++f){for(var h=!1,g=0;g<e;++g)if(f!=g&&b[f].id===b[g].id&&c(b[f])){h=!0;break}h||d.push(b[f].id)}return d}function e(b){for(var c=0,d=[],e=a.state.helper.tree.selectLevel(b,q,c);0<e.length;)d.push(e),c++,e=a.state.helper.tree.selectLevel(b,q,c);
return d}function g(b){b=n(b);for(var c=v.length,d=[];c--;){for(var e=v[c].hashtagList,f=e.length,h=!1;f--&&(h=b({hash:e[f]}),!0!==h););h||(d=d.concat(v[c].itemList.slice()),v.splice(c,1))}return d}function n(b){return function(c){if(a.isObject(c)&&0<c.hash.length){if(c.hash===b)return!0;if(0<=c.hash.indexOf("{{")&&0<=c.hash.indexOf("}}")){var d=a.state.helper.parameter.extract(c.hash);c=c.hash;for(var e=d.length;e--;)c=a.state.helper.parameter.replace(c,d[e]);return RegExp("^"+c+"$","gi").test(b)}}return!1}}
function l(b){return function(c){return a.isObject(c)&&(a.isArray(b)&&a.contains(b,c.id)||c.id===b)?!0:!1}}function t(b,c){var d=l(c),e=n(b);return function(b){return!0===d(b)||!0===e(b)?!0:!1}}function q(b){return a.isObject(b)&&a.isArray(b.children)?b.children:[]}function m(b){return a.isObject(b)?b.id:-1}function x(b){return a.isObject(b)&&a.isObject(b.error)?b.error:null}function u(c){var f=a.deepClone(r),l=a.deepClone(r),p=a.deepClone(r),s=g(c.value),h=n(c.old),s=t(c.old,s),u=n(c.value);a.state.helper.tree.selectBranch(f,
q,s);a.state.helper.tree.selectBranch(l,q,u);a.state.helper.tree.selectBranch(p,q,n("*"));var s=a.state.helper.tree.flat(f.concat(l),q),v=d(s,function(b){return 0<=b.hash.indexOf("{{")&&0<=b.hash.indexOf("}}")&&!a.state.helper.tree.isInBranch(b,q,u)&&!a.state.helper.tree.isInBranch(b,q,h)?!1:!0}),x=a.state.helper.tree.flat(p,q,m),f=e(f),y=e(l);a.message.dispatch("a.state.begin",c);a.console.log("a.state: element allowed to proceed change: "+v+" (does not mean all of them will be loaded)",3);var E=
b();a.state.helper.chainer("unload",f,v,-1,function(){a.state.helper.chainer("load",y,v,E,function(){0<p.length?(p=[p],a.console.log("a.state: wildcard allowed to proceed change: "+x+" (does not mean all of them will be loaded)",3),a.state.helper.chainer("unload",p,x,-1,function(){a.state.helper.chainer("load",p,x,-1,function(){a.message.dispatch("a.state.end",c)})})):a.message.dispatch("a.state.end",c)})})}var r=[],v=[],f=-1,p=[];a.message.addListener("a.page.event.hash",u);a.message.addListener("a.message.clear",
function(){a.message.addListener("a.page.event.hash",u)});return{clear:function(){r=[]},tree:function(){return a.deepClone(r)},add:function(b,d){if(!a.isObject(b))return null;if(a.isArray(b))for(var e=0,f=b.length;e<f;++e)this.add(b[e]);else{b.hash=a.isString(b.hash)?b.hash:"";a.isObject(b.include)||(b.include={});b.include.css=c(b.include.css);b.include.js=c(b.include.js);b.include.translate=c(b.include.translate);b.include.html=a.isString(b.include.html)?b.include.html:null;for(var g=["preLoad",
"postLoad","preUnload","unload","postUnload"],h=0,e=g.length;h<e;++h)f=b[g[h]],a.isFunction(f)&&(f=f.toString(),f=f.slice(f.indexOf("(")+1,f.indexOf(")")).match(/([^\s,]+)/g),a.isNone(f)&&a.console.warn("The result parameter for function '"+g[h]+"' in id '"+b.id+"' has not been found, the state may not work properly",2));!a.isArray(b.children)&&a.isObject(b.children)&&(b.children=[a.deepClone(b.children)]);h=!a.isNone(b.parent);e=a.isArray(b.children);"*"===b.hash&&(h&&a.console.warn("a.state.add : The wildcard has a parent setted (not allowed)",
1),e&&a.console.warn("a.state.add : The wildcard has children (not allowed)",1),b.parent=null,h=!1,b.children=[]);g=[];e&&(g=b.children.slice());b.children=[];a.isNone(b.id)&&(b.id=1);for(;!a.isNone(a.state.helper.tree.getItem(r,q,l(b.id)));)b.id=Math.floor(1E5*Math.random()+1);if(h){h=a.state.helper.tree.getItem(r,q,l(b.parent));if(a.isNone(h))return null;h.children.push(b)}else r.push(b);h=b.id;e=0;for(f=g.length;e<f;++e)a.isObject(g[e])&&(g[e].parent=h,this.add(g[e]));"*"===b.hash&&a.state.helper.chainer("load",
[[b]],[h],-1,function(){});!0===b.bootOnLoad&&(g=a.deepClone(b),g.data=g.converter=g.options=null,g.preLoad=g.load=g.postLoad=null,g.preUnload=g.unload=g.postUnload=null,d=a.isFunction(d)?d:function(){},a.state.helper.chainer("load",[[g]],[h],-1,d));return h}},getById:function(b){return a.state.helper.tree.getItem(r,q,l(b))},removeById:function(b){var c=a.state.helper.tree.getItem(r,q,l(b));a.console.log("a.state.removeById: remove element (id: "+b+")",3);a.state.helper.tree.selectBranch(r,q,function(b){return b===
c?!1:!0})},loadById:function(b,f,g){var p=a.deepClone(r),s=a.page.event.hash.getHash(),h=a.deepClone(r);a.state.helper.tree.selectBranch(p,q,l(b));a.state.helper.tree.selectBranch(h,q,n(s));var t=a.state.helper.tree.flat(p,q),h=a.state.helper.tree.flat(h,q),h=d(h.concat(t)),p=e(p);g=a.isFunction(g)?g:function(){};a.console.log("a.state.loadById: element allowed to proceed change: "+h+" (does not mean all of them will be loaded)",3);a.state.helper.chainer("load",p,h,-1,g);a.isNone(f)&&(f=s);b={id:b,
itemList:a.state.helper.tree.flat(t,q,m),hashtagList:c(f)};v.push(b)},unloadById:function(b,c){for(var d=this.getById(b),d=e([d]),f=[],g=v.length;g--;)f=f.concat(v[g].itemList);a.console.log("a.state.unloadById: element allowed to proceed change: "+f+" (does not mean all of them will be unloaded)",3);g=a.isFunction(c)?c:function(){};a.state.helper.chainer("unload",d,f,-1,g)},forceReloadById:function(c,d){for(var f=a.isFunction(d)?d:function(){},g=v.length,l=[],h=a.deepClone(v);g--;)a.contains(v[g].itemList,
c)&&l.push(v[g].hashtagList);if(0<l.length)this.unloadById(c,function(){for(var b=l.length;b--;)a.state.loadById(c,l[b]);v=h;f()});else{var g=a.deepClone(r),p=a.page.event.hash.getHash();a.state.helper.tree.selectBranch(g,q,n(p));for(var p=a.state.helper.tree.flat(g,q),t=p.length;t--;)if(p[t].id===c){var u=e([p[t]]),x=a.state.helper.tree.flat(g,q,m);a.console.log("a.state.forceReloadById: element allowed to proceed change: "+x+" (does not mean all of them will be loaded/unloaded)",3);var E=b();a.state.helper.chainer("unload",
u,x,-1,function(){a.state.helper.chainer("load",u,x,E,f)});break}}},hashExists:function(b){return a.isString(b)&&""!==b?a.state.helper.tree.isInBranch(r,q,n(b)):!1},__currentGeneratedId:function(){return f},__getError:function(b,c){var d=b.id;c="_"+c;var e=a.deepClone(r);a.state.helper.tree.selectBranch(e,q,l(d));for(var d=a.state.helper.tree.flat(e,q,x),e=[c,c.substring(0,c.length-1)+"x",c.substring(0,c.length-2)+"xx","generic","_generic"],f=0,g=e.length;f<g;++f){var m;a:{m=e[f];for(var n=d.length;n--;){var p=
d[n];if(!a.isNone(p))for(var t in p)if(t==m){m=p[t];break a}}m=null}if(!a.isNone(m))return m}return null},type:{add:function(b,c){p[b]=c},get:function(b){return a.isFunction(p[b])?p[b]:null},list:function(){return p}},helper:{tree:{},chainer:{},parameter:{}}}}();
a.state.helper.tree={flat:function(c,b,d){var e=[];if(!a.isArray(c)||!a.isFunction(b))return[];d=a.isFunction(d)?d:function(b){return b};for(var g=0,n=c.length;g<n;++g){var l=this.flat(b(c[g]),b,d);e.push(d(c[g]));0<l.length&&(e=e.concat(l))}return e},getItem:function(c,b,d){if(!a.isArray(c)||!a.isFunction(d)||!a.isFunction(b))return null;for(var e=0,g=c.length;e<g;++e){if(!0===d(c[e]))return c[e];var n=this.getItem(b(c[e]),b,d);if(!a.isNone(n))return n}return null},isInBranch:function(c,b,d){c=this.getItem(c,
b,d);return a.isNone(c)?!1:!0},selectBranch:function(c,b,d){if(a.isArray(c)&&a.isFunction(b)&&a.isFunction(d))for(var e=c.length;e--;){var g=b(c[e]);!1===d(c[e])&&a.isNone(this.getItem(g,b,d))?c.splice(e,1):0<g.length&&this.selectBranch(g,b,d)}},selectLevel:function(c,b,d){if(!a.isArray(c)||!a.isFunction(b))return[];var e=[],g=c.length;if(a.isNone(d)||isNaN(d)||0>=d)return c;for(d--;g--;){var n=b(c[g]);0<n.length&&(e=e.concat(this.selectLevel(n,b,d)))}return e}};
a.state.helper.chainer=function(c,b,d,e,g){function n(b,c){var d={};a.isNone(b)||(d.resource=b);a.isNone(c)||(d.status=c);var e=a.state.__getError(f,c);a.message.dispatch("a.state.error",d);a.isNone(e)||(a.isString(e)?window.location.href="#"+e:a.isFunction(e)?e(f.id,b,c):a.console.error("a.state.helper.chainer.__error: error resolver cannot determine action to perform, please check your different error handler (status: "+c+", state id: "+f.id+")"))}function l(b){return function(c){r(b,function(){c.done()})}}
function t(b,c,d){return function(e){a.loader[b](c,function(b){a.isFunction(d)&&d(b);e.done()})}}function q(b,c,d){if(a.isObject(d))for(var e in d)d[e]=a.state.helper.parameter.extrapolate(d[e],b,c),q(b,c,d[e])}function m(b,c,d,e){var f=a.deepClone(d);d=a.page.event.hash.getHash();f.url=a.state.helper.parameter.extrapolate(c,d,e);q(d,e,f);c=c.replace(/^\s+|\s+$/g,"");return 0===c.indexOf("{{")&&c.indexOf("}}")===c.length-2?(c=a.state.helper.parameter.extrapolate(c,d,e,!1),function(d){var e=d.getData("data")||
{};a.isObject(e.a)||(e.a=e.appstorm={},e.a.parameter=e.appstorm.parameter={});a.isNone(b)?e=c:(e.a.parameter[b]=c,e.appstorm.parameter=e.a.parameter,a.isNone(e[b])&&(e[b]=c));d.setData("data",e);d.done()}):function(c){a.isNone(c.getData("data"))&&c.setData("data",{});(new a.ajax(f,function(d){if(a.isNone(b))c.setData("data",d);else{var e=c.getData("data");e[b]=d;c.setData("data",e)}c.done()},n)).send()}}function x(b,c){for(var d=new a.callback.synchronizer,e=b.include.css,f=b.include.js,g=b.include.html,
k=b.include.translate,l=b.data,p=b.title,r=b.options,q=b.converter,u=b.hash,v=e.length,x=f.length;v--;)d.addCallback(t("css",e[v]));for(;x--;)d.addCallback(t("js",f[x]));if(!a.isNone(a.language)&&0<k.length)for(e=k.length;e--;)d.addCallback(t("json",k[e],function(b){for(var c in b)a.language.addTranslation(c,b[c],!0)}));a.isString(g)&&(g=a.state.helper.parameter.extrapolate(g,a.page.event.hash.getHash(),u),d.addCallback(function(b){b.setData("html",g);a.page.template.get(g,{},b.done,n)}));if(a.isString(l)||
a.isObject(l))if(a.isObject(r)||(r={type:"json"}),a.isString(r.type)||(r.type="json"),a.isString(l))d.addCallback(m(null,l,r,u));else for(var G in l)a.isObject(l[G])&&a.isString(l[G].url)?(a.isObject(l[G].options)||(l[G].options={type:"json"}),d.addCallback(m(G,l[G].url,l[G].options,u))):d.addCallback(m(G,l[G],r,u));else d.addCallback(function(b){b.setData("data",{});b.done()});d.setSuccess(function(b){a.isNone(q)||q(b.data);a.isNone(p)||(p=a.state.helper.parameter.extrapolate(p,a.page.event.hash.getHash(),
u),a.isNone(a.language)?document.title=p:document.title=a.language.getSingleTranslation(p));var d=b.data,e=b.html,d=a.isNone(d)?{}:d;a.isNone(e)?a.isFunction(c)&&c(b,null):a.page.template.get(e,d,function(d){a.isFunction(c)&&c(b,d)})});d.setFail(n);d.start()}function u(b,d){f=b;var g=new a.callback.chainer;"unload"===c?g.addCallback(b.preUnload,b.unload,b.postUnload):g.addCallback(function(c){a.isFunction(b.preLoad)&&(-1==e||0<=e&&a.state.__currentGeneratedId()===e)?b.preLoad(c):c.done()},function(c){x(b,
function(d,f){a.isFunction(b.load)&&(-1==e||0<=e&&a.state.__currentGeneratedId()===e)&&b.load(f);var g=c.getFullData()||{};if(a.isObject(d.data))for(var k in d.data)g[k]=d.data[k];c.setFullData(g);c.done()})},function(c){a.isFunction(b.postLoad)&&(-1==e||0<=e&&a.state.__currentGeneratedId()===e)?b.postLoad(c):c.done()},function(c){var d={id:b.id,value:b.id};a.message.dispatch("a.state.load",d);a.message.dispatch("a.state.load-"+b.id,d);c.done()});g.setSuccess(d);g.setFail(n);g.start()}function r(b,
c){for(var e=new a.callback.synchronizer,f=b.length;f--;)a.contains(d,b[f].id)&&function(b){e.addCallback(function(c){u(b,function(){c.done()})})}(b[f]);e.setSuccess(c);e.setFail(n);e.start()}var v=b.length,f=null;c="unload"===c?"unload":"load";d=d||[];var p=new a.callback.chainer;if("unload"===c)for(;v--;)p.addCallback(l(b[v]));else for(var k=0;k<v;)p.addCallback(l(b[k])),k++;p.setSuccess(g);p.setFail(n);p.start()};
a.state.helper.parameter={extract:function(c,b){var d=/\{\{(\s*\w+\s*:\s*[a-z0-9_\-\[\]\(\)\^.\|\+\*\?\\\/]+\s*)\}\}/gmi,e=/^\s+|\s+$/g,g=!a.isNone(b);g&&(d=b);for(var n=[],l;l=d.exec(c);){var t=null,t=g?["hash",l[1]]:l[1].split(":",2);n.push({original:l[0].replace(e,""),name:t[0].replace(e,""),regex:t[1].replace(e,""),start:l.index})}return n},replace:function(c,b,d){d=a.isNone(d)?"("+b.regex+")":d;return c.substr(0,b.start)+d+c.substr(b.start+b.original.length)},extrapolate:function(c,b,d,e){if(a.isString(c)&&
0<=c.indexOf("{{")&&0<=c.indexOf("}}")){for(var g=this.extract(c),n=this.extract(d),l=this.extract(c,/\{\{(\s*\w+\s*)\}\}/gmi),g=g.concat(l),l=n.length;l--;)d=this.replace(d,n[l]);if(l=RegExp("^"+d+"$","gi").exec(b)){b=0;for(d=n.length;b<d;++b)n[b].value=l[b+1];for(var l=0,t=g.length;l<t;++l)for(b=0;b<d;++b)n[b].name===g[l].regex&&"hash"===g[l].name&&(g[l].value=n[b].value)}n=g.length;for(e=!1===e?function(b,c,d){return d}:this.replace;n--;){b=g[n];"hash"!==b.name&&"hashtag"!==b.name||a.isNone(b.value)||
(c=this.replace(c,b,b.value));d=!1;if(!a.isNone(a.storage))switch(b.name){case "temporary":c=e(c,b,a.storage.temporary.getItem(b.regex));d=!0;break;case "memory":c=e(c,b,a.storage.memory.getItem(b.regex));d=!0;break;case "persistent":c=e(c,b,a.storage.persistent.getItem(b.regex));d=!0;break;case "cookie":c=e(c,b,a.storage.cookie.getItem(b.regex));d=!0;break;case "store":case "storage":d=a.storage.temporary.getItem(b.regex),c=a.isNone(d)?e(c,b,a.storage.persistent.getItem(b.regex)):e(c,b,d),d=!0}if(!d&&
(d=a.state.type.list(),a.isObject(d)))for(var q in d)q===b.name&&(l=d[q],c=a.isFunction(l)?e(c,b,l(b.regex)):e(c,b,l))}}return c}};a.page={};
a.page.template={__tmpl:{},get:function(c,b,d,e){var g=null;a.isObject(window.Handlebars)&&(g=window.Handlebars);if(null==g)a.console.error("a.page.template.get: unable to find Handlebars.JS ! Can't proceed",1);else{var n=c.replace(/[^a-zA-Z0-9\\-]/g,"_"),l="a_tmpl_"+n+"_a",t=function(b,c,d){a.isFunction(b)&&(a.isNone(g.to_html)?(c=g.compile(a.page.template.__tmpl[c]),b(c(d))):b(g.to_html(a.page.template.__tmpl[c],d)))};a.isString(this.__tmpl[l])?(a.console.log("a.page.template.get: loading "+l+" from cache",
3),t(d,l,b)):document.getElementById(l)?(this.__tmpl[l]||(a.console.log("a.page.template.get: loading "+l+" from inner html page",3),this.__tmpl[l]=document.getElementById(l).innerHTML),t(d,l,b)):document.getElementById(n)?(this.__tmpl[n]||(a.console.log("a.page.template.get: loading "+n+" from inner html page",3),this.__tmpl[n]=document.getElementById(n).innerHTML),t(d,n,b)):(a.console.log("a.page.template.get: loading "+c+" from external resource",3),a.loader.html(c,function(c,e,g){a.page.template.__tmpl[l]||
(a.page.template.__tmpl[l]=c);t(d,l,b)},{},e))}},htmlToDom:function(c){var b=document.createElement("div");b.innerHTML=c.replace(/^\s+|\s+$/g,"");c=b.childNodes;for(var b=[],d=0,e=c.length;d<e;++d){var g=c.item(d);!a.isObject(g)||"1"!==g.nodeType.toString()&&"3"!==g.nodeType.toString()||b.push(g)}return b},remove:function(c,b){for(;c.firstChild;)c.removeChild(c.firstChild);a.isFunction(b)&&b()},append:function(c,b,d){var e=this.htmlToDom(b);if(a.isObject(e))for(var g=0,n=e.length;g<n;++g)c.appendChild(e[g]);
a.isNone(a.language)||a.language.translate(c);a.isFunction(d)&&d(b)},replace:function(c,b,d){this.remove(c);this.append(c,b,d)}};
a.page.event=function(){function c(b,c){a.isObject(c)||(c={});return function(){a.message.dispatch("a.page.event."+b,c)}}function b(){var b=(new Date).getTime();b>l+2*n&&(a.console.log("a.page.event.hibernate: hibernate mode has been detected",3),c("hibernate")());l=b}function d(b,c){window.addEventListener?window.addEventListener(b,c,!1):window.attachEvent&&window.attachEvent("on"+b,c)}function e(b){var d=window.location.hash?window.location.hash.substring(1):null;if(t!==d){if(!0!==b){for(q.push({hash:d,
time:(new Date).getTime()});1E3<q.length;)q.shift();a.console.log("a.page.event.hash: hash change (previous: "+t+", new: "+d+")",3);c("hash",{value:d,old:t})()}t=d}}var g={},n=1E4,l=(new Date).getTime(),t=null,q=[];g.hash={getHash:function(){return window.location.hash?window.location.hash.substring(1):null},getPreviousHash:function(){return t},setPreviousHash:function(b){a.console.log("a.page.event.hash.setPreviousHash: change previous hash to "+b,3);t=b},trace:function(){return q}};e(!0);!a.isNone(window.onhashchange)&&
(void 0===document.documentMode||7<document.documentMode)?window.onhashchange=e:a.timer.add(e,null,50);var m=["resize","load","unload"],x;for(x in m)d(m[x],c(m[x]));d("load",function(){a.timer.add(b,null,n)});return g}();a.translate=a.i18n=function(){function c(b,c){return b.getAttribute(c)||b.getAttribute("a-"+c)||b.getAttribute("data-"+c)||""}function b(b,d){var e=c(b,r);if(e&&""!=e)try{b[e]=d}catch(f){}else if("INPUT"==b.nodeName)if("submit"==b.type||"reset"==b.type)b.value=d;else try{b.placeholder=d}catch(g){}else if("FIELDSET"===b.nodeName)b.title=d;else if(""!==c(b,v))a.dom.el(b).empty().append(document.createTextNode(d));else{for(var e=d.split("<tag>"),h=0,l=e.length,m=0,n=b.childNodes.length;m<n&&h<l;++m){var p=
b.childNodes[m];3==p.nodeType&&(p.nodeValue=e[h],h++)}if(h!=l)for(;h<l;++h)b.appendChild(document.createTextNode(e[h]));if(m!=n)for(;n-- >m;)p=b.childNodes[n],3==p.nodeType&&b.removeChild(p)}}function d(d){d=d||document;d=a.dom.el(d);var e=m[q];d.attr(u+",a-"+u+",data-"+u).each(function(){var d=c(this,u),g=e[d]||"";""===g&&(g=d);for(var g=g.match(f),g=a.match(g,function(b){return b.replace("{{","").replace("}}","")}),k={},h=g.length;h--;){var l=g[h],m=c(this,u+"-"+l);m&&(k[l]=m)}d=t(d,k,!0);b(this,
d)})}function e(){return q}function g(b,c){q=b;!1!==c&&d()}function n(b,c,e,f){m[b]||(m[b]={});m[b][c]=e;!1!==f&&d()}function l(b,c,e){if(null===c)delete m[b];else for(var f in c)n(b,f,c[f],!1);!1!==e&&d()}function t(b,c,d){function e(b){for(var d=[c,x],f=0;2>f;++f)for(var g in d[f])if(b==="{{"+g+"}}")return d[f][g];return""}b=m[q][b]||null;if(a.isNull(b))return"";if(!1===d)return b;d=b.match(f)||[];for(var g=0,h=d.length;g<h;++g){var l=d[g];b=b.replace(l,e(l))}return b.replace(f,"")}var q="en-US",
m={},x={},u="tr",r="custom-tr",v="erase-tr",f=/\{\{[a-z0-9\-_]+\}\}/gi;if(a.storage&&a.storage.persistent.support){var p=a.storage.persistent.getItem("_app.language");a.isString(p)&&0<p.length&&(q=p,d())}return{getLanguage:e,getCurrent:e,setLanguage:g,setCurrent:g,translate:d,i18n:d,getDictionnary:function(b){return b?m[b]||{}:m},getGlobalVariable:function(b){return x[b]||""},setGlobalVariable:function(b,c){x[b]=c},add:n,addTranslation:n,get:t,getTranslation:t,set:l,setTranslation:l}}();
